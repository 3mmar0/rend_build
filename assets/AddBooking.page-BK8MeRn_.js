import{j as e,L as K,k as L,r as o,e as D,g as ie,I as ne,S as le,d as U,t as ae,n as oe}from"./index-BYyXun5x.js";import{f as P,e as $,h as H,z as u,a as ce,b as de,c as me,d as xe,u as J,t as Q,F as X}from"./index-C2_QJ2lf.js";import{b as I,a as ee}from"./axios-utils-AvuZ81CO.js";import{S as te}from"./SubtleButton-CpZm4xzO.js";import{U as pe}from"./UnderlineHeading-ByjNC2ge.js";import{S as ue}from"./SearchableSelectInputForm-v1_SI72T.js";import{M as k}from"./MainHeading-DYhLcFx9.js";import{A as fe,T as he,C as be,a as je,b as ge}from"./LocationIcon-IJcczQ5j.js";import{D as R}from"./DateInputForm-D1c84cxT.js";import{T as S}from"./TextInputForm-DXNY8AYK.js";import{P as V}from"./PrimaryButton-CZnRZgcz.js";import{t as z,d as ye,n as O,f as B}from"./format-D6Kkl3rb.js";import{c as we}from"./popover-BWwxYxvp.js";import{S as Y}from"./SelectInputForm-CG_Opxs4.js";import{T as Ne}from"./TextAreaInputForm-BzEUWSiD.js";import{L as ve}from"./CarNumberIcon-BeI9YipW.js";import{S as A}from"./SecondaryButton-DL_Bkgwn.js";import{C as ke}from"./CancelPopup-DUQLiKLA.js";import{E as Ce,a as _e}from"./jspdf.plugin.autotable-ljygzmMq.js";import{D as Se,a as Le,b as De,c as Me}from"./dialog-CC_6CGm6.js";import{u as Fe}from"./index-BUOh6qUH.js";import{r as Ve}from"./removeDuplicated-BgoSiW5F.js";import{S as Ae}from"./SuccessIcon-BhPCSHz0.js";import"./index-CV4wEvKw.js";import"./select-779NlImg.js";import"./Combination-cklTRtAe.js";import"./index-Gk0NKYh3.js";import"./CustomPagination-BD2pf3AX.js";import"./pagination-DR230PoL.js";import"./chevron-right-CymCusjh.js";import"./chevron-left-DVnc3BG0.js";import"./Dropdown-DI0KLpyc.js";import"./index-CLYNl1a9.js";import"./index-DEdjAgo6.js";import"./CloseIcon-DUkjG1gO.js";import"./configs.data-DRMm0Ppl.js";import"./CalendarIcon-ChMYIy2j.js";import"./textarea-CQid9q9Y.js";import"./index-Cod7pasn.js";function Pe(s,t){const n=z(s),r=z(t),i=G(n,r),l=Math.abs(ye(n,r));n.setDate(n.getDate()-i*l);const c=+(G(n,r)===-i),a=i*(l-c);return a===0?0:a}function G(s,t){const n=s.getFullYear()-t.getFullYear()||s.getMonth()-t.getMonth()||s.getDate()-t.getDate()||s.getHours()-t.getHours()||s.getMinutes()-t.getMinutes()||s.getSeconds()-t.getSeconds()||s.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}const Ee=({steps:s,current:t})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-row justify-between mb-6",children:[e.jsx(pe,{text:"حجز سيارة"}),t===0&&e.jsx(K,{to:"/booking",children:e.jsx(te,{className:"bg-white-blue-50 text-base font-medium leading-[125%] text-white-blue-900 border border-white-blue-500 shadow-[0px_1px_2px_0px_#1018280D]",children:"عودة لقائمة الحجوزات"})})]}),e.jsx("nav",{className:"flex justify-center mt-6",children:e.jsx("ol",{className:"flex justify-between w-full space-x-6",children:s.map((n,r)=>e.jsxs("li",{className:"flex flex-row items-center gap-4",children:[r!==t&&r<t?e.jsx("div",{className:"h-10 w-10 rounded-full bg-primery-blue-500 flex items-center justify-center",children:e.jsx("svg",{width:"14",height:"10",viewBox:"0 0 14 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.7071 0.292893C14.0976 0.683417 14.0976 1.31658 13.7071 1.70711L5.70711 9.70711C5.31658 10.0976 4.68342 10.0976 4.29289 9.70711L0.292893 5.70711C-0.0976311 5.31658 -0.0976311 4.68342 0.292893 4.29289C0.683417 3.90237 1.31658 3.90237 1.70711 4.29289L5 7.58579L12.2929 0.292893C12.6834 -0.0976311 13.3166 -0.0976311 13.7071 0.292893Z",fill:"white"})})}):e.jsxs("div",{className:L("h-10 w-10 rounded-full flex transition-colors items-center justify-center border-2 text-white-blue-800 text-sm leading-4 font-medium",{"border-primery-blue-500 text-primery-blue-500":r===t,"border-white-blue-300":r!==t}),children:["0",r+1]}),e.jsxs("div",{className:"flex flex-col items-start justify-center gap-2",children:[e.jsx("p",{className:L("font-medium font-cairo  text-xl leading-[150%] flex items-center tracking-normal",{"text-primery-blue-500":r===t,"text-primery-blue-900":r<t,"text-white-blue-800":r>t}),children:n.label}),e.jsx("p",{className:L("text-sm leading-[120%] font-cairo font-medium flex items-center tracking-normal",{"text-primery-blue-900":r===t,"text-white-blue-800":r<t||r>t}),children:n.description})]})]},n.label))})})]}),He=()=>{const[s,t]=o.useState([]),[n,r]=o.useState(null);return o.useEffect(()=>{(async()=>{try{const c=(await I({endpoint:D.customer.list})).data.data.data.map(a=>({name:a.full_name,value:String(a.id),description:a.personal_id_number}));t(c),r(null)}catch{r("Error fetching customers. Please try again later.")}})()},[]),e.jsxs(e.Fragment,{children:[e.jsx(k,{text:"بيانات العميل",className:"mt-6"}),e.jsxs("div",{className:"mb-6 flex flex-row items-center justify-between gap-4",children:[e.jsx(ue,{className:"w-full",name:"customer_id",placeholder:"بحث عن اسم أو كود العميل",label:"اسم العميل",options:s,error:n,data:!0}),e.jsx("div",{className:"mt-auto",children:e.jsx(K,{to:"/customer-relations/add-customer",children:e.jsxs(te,{className:"bg-primery-blue-50 text-primery-blue-500 text-base font-cairo font-semibold",children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M9.9987 10.0001C12.2999 10.0001 14.1654 8.1346 14.1654 5.83341C14.1654 3.53223 12.2999 1.66675 9.9987 1.66675C7.69751 1.66675 5.83203 3.53223 5.83203 5.83341C5.83203 8.1346 7.69751 10.0001 9.9987 10.0001Z",stroke:"#145DA0",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M2.83984 18.3333C2.83984 15.1083 6.04817 12.5 9.99817 12.5C10.7982 12.5 11.5732 12.6083 12.2982 12.8083",stroke:"#145DA0",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M18.3346 15.0001C18.3346 15.2667 18.3013 15.5251 18.2346 15.7751C18.1596 16.1084 18.0263 16.4334 17.8513 16.7167C17.2763 17.6834 16.218 18.3334 15.0013 18.3334C14.143 18.3334 13.368 18.0084 12.7846 17.4751C12.5346 17.2584 12.318 17.0001 12.1513 16.7167C11.843 16.2167 11.668 15.6251 11.668 15.0001C11.668 14.1001 12.0263 13.2751 12.6096 12.6751C13.218 12.0501 14.068 11.6667 15.0013 11.6667C15.9846 11.6667 16.8763 12.0918 17.4763 12.7751C18.0096 13.3668 18.3346 14.1501 18.3346 15.0001Z",stroke:"#145DA0",strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M16.2411 14.9832H13.7578",stroke:"#145DA0",strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M15 13.7666V16.2583",stroke:"#145DA0",strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"})]}),"أضافة عميل جديد"]})})})]})]})},Te=({car:s})=>{var l;const{setValue:t,watch:n}=P(),r=n(),i=()=>{t("vehicle_id",String(s.id))};return e.jsxs("div",{className:L("group flex flex-col gap-2 shadow-[0px_2px_12px_0px_#14142B14] rounded-lg p-2",{"border border-green-success-100":(r==null?void 0:r.vehicle_id)==s.id,"hover:border hover:border-red-error-100":(r==null?void 0:r.vehicle_id)==s.id}),children:[e.jsxs("div",{className:"flex flex-row justify-between",children:[e.jsxs("div",{className:"inline-block",children:[e.jsx("img",{className:"h-4 w-4 inline-block me-1",src:(l=s==null?void 0:s.brand)==null?void 0:l.logo,alt:""}),e.jsxs("p",{className:"inline-block text-white-blue-900 font-cairo font-medium text-[16px] leading-[20px] tracking-normal text-right",children:[s.brand.name," ",s.brand_model.name," ",s.make_year]})]}),e.jsx("span",{className:"text-white-blue-50 rounded-sm p-1 bg-[#22AD5C] font-cairo font-medium text-[12px] leading-[13.8px] tracking-normal",children:s.status})]}),e.jsx("div",{children:e.jsx("img",{src:s.media.image,width:242,height:100,alt:""})}),e.jsxs("div",{className:"py-1 flex flex-row justify-between",children:[e.jsxs("div",{className:"flex flex-row items-center gap-[6px]",children:[s.transmission_type==="auto"&&e.jsx(fe,{}),e.jsx("p",{className:"font-cairo font-medium text-primery-blue-900 text-[14px] leading-[16.8px] tracking-normal text-center",children:s.transmission_type})]}),e.jsxs("div",{className:"flex flex-row items-center gap-1",children:[e.jsx(he,{}),e.jsx("p",{className:"font-cairo font-medium text-primery-blue-900 text-[14px] leading-[16.8px] tracking-normal text-center",children:"السعودية"})]})]}),e.jsxs(V,{type:"button",onClick:i,className:L("rounded-lg w-full lg:py-2 xl:py-2 lg:px-[14] shadow-[0px_1px_2px_0px_#1018280D] font-medium lg:text-xs lg:leading-[13.8px] tracking-normal transition-all duration-300",{"bg-green-success-100 focus:ring-green-success-100 text-green-success-600 group-hover:bg-red-error-100 focus:group-hover:ring-red-error-100 group-hover:text-[#A21515]":(r==null?void 0:r.vehicle_id)==s.id}),children:[(r==null?void 0:r.vehicle_id)==s.id?e.jsx("span",{className:"group-hover:hidden",children:"تم الاختيار"}):"اختيار",(r==null?void 0:r.vehicle_id)==s.id&&e.jsx("span",{className:"hidden group-hover:inline",children:"الغاء الاختيار"})]})]})},Ie=({CarListPagination:s})=>{const[t,n]=o.useState([]),[r,i]=o.useState(1),[l,c]=o.useState(0),[a,d]=o.useState({}),[b,g]=o.useState(""),[m,j]=o.useState(!0),[h,N]=o.useState(null);return o.useEffect(()=>{(async()=>{try{const x=await I({endpoint:D.cars.pagination,queryParams:{page:r,...a,search:b}});c(x.data.data.pagination.total),n(x.data.data.data)}catch{N("Failed to load cars")}finally{j(!1)}})()},[r,a,b]),m?e.jsx(ie,{}):h?e.jsx("div",{className:"mt-6 mb-[102px] text-center py-20",children:e.jsx("h2",{className:"text-xl text-red-500",children:h})}):t?e.jsxs("div",{className:"mb-10",children:[e.jsxs("div",{className:"flex flex-row items-center w-[287px] border border-white-blue-300 bg-white-blue-50 h-[36px] p-2 rounded-[6px]",children:[e.jsx(ne,{placeholder:"ابحث برقم السيارة أو الماركة أو الموديل ....",className:"text-white-blue-800 p-0 tracking-normal text-xs lg:text-sm lg:leading-[16.8px] border-none outline-none focus-visible:ring-0 placeholder:text-white-blue-800",onChange:p=>g(p.target.value)}),e.jsx("button",{className:"bg-transparent border-none",children:e.jsx(le,{className:"text-white-blue-800"})})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(be,{setFilters:d}),e.jsx("div",{className:"mt-6",children:e.jsx(je,{cars:t,CarCard:Te})})]}),e.jsx("div",{className:"mt-4",children:e.jsx(s,{currentPage:r,setCurrentPage:i,totalItems:l})})]}):e.jsx("div",{className:"mt-6 mb-[102px] text-center py-20",children:e.jsx("h2",{className:"text-xl",children:"Car not found"})})},Be=()=>{var a;const{watch:s,setValue:t,getValues:n,formState:{errors:r}}=P(),[i,l,c]=s(["start_date","end_date","num_days"]);return o.useEffect(()=>{const d=O(i),b=O(l),g=Number(c);if(d&&!isNaN(g)&&g>=0){const m=we(new Date(i),g),j=n("end_date");if(!j||new Date(j).getTime()!==m.getTime()){t("end_date",m);return}}if(d&&b){const m=Pe(new Date(l),new Date(i)),j=Number(n("num_days"));!isNaN(m)&&m!==j&&m>=0&&t("num_days",m)}},[i,l,c,t,n]),e.jsxs(e.Fragment,{children:[e.jsx(k,{text:"تفاصيل الحجز",className:"mt-6"}),e.jsxs("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(R,{name:"start_date",disabled:d=>d<new Date(new Date().setHours(0,0,0,0)),label:"تاريخ بدء الحجز",placeholder:"ادخل تاريخ بدء الحجز"}),e.jsx(S,{type:"number",name:"num_days",label:"مدة الحجز",placeholder:"ادخل مدة الحجز"}),e.jsx(R,{name:"end_date",disabledDate:!0,label:"تاريخ الإرجاع ",placeholder:"ادخل تاريخ الإرجاع"}),e.jsx(S,{type:"number",name:"limited_km",label:"عدد الكيلومتر المسموح / اليوم",placeholder:"ادخل عدد الكيلومتر المسموح"})]}),e.jsx(k,{text:"تفاصيل السيارة",className:"mt-6"}),e.jsx(Ie,{CarListPagination:ge}),r.vehicle_id&&e.jsx($,{className:"text-destructive mt-[-1rem] mb-4",children:(a=r.vehicle_id.message)==null?void 0:a.toString()})]})},We=()=>{const{setValue:s,control:t}=P(),n=H({name:"insurance_price",control:t}),r=H({name:"price",control:t}),i=H({name:"tax",control:t}),l=H({name:"discount",control:t});return o.useEffect(()=>{const c=parseFloat(n)||0,a=parseFloat(r)||0,d=parseFloat(i)||0,b=parseFloat(l)||0,g=(c+a)*(1-b)*(1+d);s("total_price",g.toFixed(2))},[r,i,l,s]),e.jsxs(e.Fragment,{children:[e.jsx(k,{text:"تفاصيل الدفع",className:"mt-6"}),e.jsxs("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(Y,{name:"insurance_type",label:"نوع التامن",placeholder:"اختر  نوع التامين",options:[{name:"شامل",value:"comperhensive"},{name:"ضد الغير",value:"thirdParty"}]}),e.jsx(S,{name:"insurance_price",label:"تكلفة التأمين",placeholder:"450 ر.س"}),e.jsx(S,{name:"price",label:"تكلفة الحجز",placeholder:"8000 ر.س"}),e.jsx(S,{name:"tax",label:"الضريبة",placeholder:"250 ر.س"}),e.jsx(Y,{name:"payment_status",label:"طريقة الدفع",placeholder:"اختر طريقة الدفع",options:[{name:"option1",value:"option1"},{name:"option2",value:"option2"},{name:"option3",value:"option3"},{name:"option4",value:"option4"}]}),e.jsx(S,{type:"number",name:"discount",label:"نسبة الخصم",placeholder:"ادخل نسبة الخصم"}),e.jsx(S,{type:"number",name:"total_price",label:"اجمالي المبلغ",placeholder:"4000 ر.س",disabled:!0})]}),e.jsx("div",{children:e.jsx(Ne,{name:"notes",className:"flex flex-col min-h-[157px]",label:"ملاحظات",placeholder:"أدخل الملاحظات"})})]})},Z=[u.object({customer_id:u.string().min(1,"Customer field is required.")}),u.object({start_date:u.date(),num_days:u.string(),end_date:u.date(),limited_km:u.string(),vehicle_id:u.string({required_error:"Vehicle is required."}).min(1,"Vehicle is required.")}),u.object({insurance_type:u.string().min(1,"This field is required."),insurance_price:u.string().min(1,"This field is required."),price:u.string().min(1,"This field is required."),tax:u.string().min(1,"This field is required."),payment_status:u.string().min(1,"This field is required."),discount:u.string().min(1,"This field is required."),total_price:u.string().min(1,"This field is required."),notes:u.string().min(1,"This field is required.")})],qe=({car:s})=>{var t,n;return e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex flex-row items-center gap-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex flex-row items-center gap-2 justify-between p-2 rounded-lg border border-primery-blue-300",children:[e.jsx("p",{className:"font-bold text-[22px] text-white-blue-900 leading-[33px] tracking-normal text-start",children:"ح ن ط 7356"}),e.jsx(ve,{}),e.jsx("p",{className:"font-bold text-[22px] text-white-blue-900 leading-[33px] tracking-normal text-start",children:"T N K 7356"})]}),e.jsxs("div",{className:"flex h-full flex-col gap-1 shadow-[0px_2px_12px_0px_#14142B14] rounded-lg p-2",children:[e.jsx("div",{className:"flex flex-row justify-between",children:e.jsxs("div",{className:"inline-block",children:[e.jsx("img",{className:"h-4 w-4 inline-block me-1",src:(t=s==null?void 0:s.brand)==null?void 0:t.logo,alt:""}),e.jsxs("p",{className:"inline-block text-white-blue-900 font-cairo font-medium text-[16px] leading-[20px] tracking-normal text-right",children:[s.brand.name," ",s.brand_model.name," ",s.make_year]})]})}),e.jsx("div",{children:e.jsx("img",{src:(n=s==null?void 0:s.media)==null?void 0:n.image,className:"h-[119px] w-full object-contain",alt:""})})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex flex-row items-center border-b border-b-white-blue-500",children:[e.jsx("p",{className:"bg-white-blue-100 px-4 py-4 text-sm text-primery-blue-500 font-semibold tracking-normal leading-6 w-full",children:"الماركة والموديل"}),e.jsxs("p",{className:"flex flex-row items-center gap-4 p-2 w-full",children:[e.jsx("img",{src:s.brand.logo,alt:""}),s.brand.name," ",s.brand_model.name]})]}),e.jsxs("div",{className:"flex flex-row items-center border-b border-b-white-blue-500",children:[e.jsx("p",{className:"bg-white-blue-100 px-4 py-4 text-sm text-primery-blue-500 font-semibold tracking-normal leading-6 w-full",children:"نوع ناقل الحركة"}),e.jsx("p",{className:"flex flex-row items-center gap-4 p-2 w-full",children:s.transmission_type})]}),e.jsxs("div",{className:"flex flex-row items-center border-b border-b-white-blue-500",children:[e.jsx("p",{className:"bg-white-blue-100 px-4 py-4 text-sm text-primery-blue-500 font-semibold tracking-normal leading-6 w-full",children:"سعة المحرك"}),e.jsx("p",{className:"flex flex-row items-center gap-4 p-2 w-full",children:s.brand_model.engine_size})]}),e.jsxs("div",{className:"flex flex-row items-center border-b border-b-white-blue-500",children:[e.jsx("p",{className:"bg-white-blue-100 px-4 py-4 text-sm text-primery-blue-500 font-semibold tracking-normal leading-6 w-full",children:"عداد المسافة الحالي"}),e.jsxs("p",{className:"flex flex-row items-center gap-4 p-2 w-full",children:[s.mileage," كيلومتر"]})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex flex-row items-center border-b border-b-white-blue-500",children:[e.jsx("p",{className:"bg-white-blue-100 px-4 py-4 text-sm text-primery-blue-500 font-semibold tracking-normal leading-6 w-full",children:"اللون"}),e.jsxs("div",{className:"flex flex-row items-center gap-4 p-2 w-full",children:[e.jsx("span",{className:"w-[30px] h-[30px] rounded-full",style:{backgroundColor:s.color}}),s.color]})]}),e.jsxs("div",{className:"flex flex-row items-center border-b border-b-white-blue-500",children:[e.jsx("p",{className:"bg-white-blue-100 px-4 py-4 text-sm text-primery-blue-500 font-semibold tracking-normal leading-6 w-full",children:"نوع السيارة"}),e.jsx("p",{className:"flex flex-row items-center gap-4 p-2 w-full",children:s.brand_model.type})]}),e.jsxs("div",{className:"flex flex-row items-center border-b border-b-white-blue-500",children:[e.jsx("p",{className:"bg-white-blue-100 px-4 py-4 text-sm text-primery-blue-500 font-semibold tracking-normal leading-6 w-full",children:"رقم الهيكل"}),e.jsx("p",{className:"flex flex-row items-center gap-4 p-2 w-full",children:s.vin})]}),e.jsxs("div",{className:"flex flex-row items-center border-b border-b-white-blue-500",children:[e.jsx("p",{className:"bg-white-blue-100 px-4 py-4 text-sm text-primery-blue-500 font-semibold tracking-normal leading-6 w-full",children:"الحالة الحالية"}),e.jsx("p",{className:"flex flex-row items-center gap-4 p-2 w-full",children:e.jsx("span",{className:"px-3 py-[6px] bg-[#F59E0B] rounded text-base text-white-blue-50 font-medium tracking-normal leading-5",children:s.status})})]})]})]})})},Ze=()=>{const{getValues:s}=P(),t=s(),[n,r]=o.useState(null),[i,l]=o.useState(null),[c,a]=o.useState(null),[d,b]=o.useState(!0),[g,m]=o.useState(null);return o.useEffect(()=>{(async()=>{try{const h=await I({endpoint:D.customer.show+t.customer_id});l(h.data.data)}catch{r("Failed to load customer details")}})()},[t.customer_id]),o.useEffect(()=>{(async()=>{try{const h=await I({endpoint:D.cars.show+t.vehicle_id});a(h.data.data)}catch{m("Failed to load car details")}finally{b(!1)}})()},[t.vehicle_id]),e.jsxs("div",{className:"mt-6",children:[e.jsx(k,{text:"بيانات العميل",className:"mt-6"}),e.jsx("div",{className:"mt-6",children:e.jsxs("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(352px,1fr))] gap-6 justify-center sm:justify-between gap-x-6 gap-y-4",children:[e.jsxs("div",{className:"flex flex-row",children:[e.jsx("div",{className:"flex items-center justify-start text-sm font-medium font-cairo text-primery-blue-500 px-4 py-3 bg-white-blue-100",children:"العميل / الجهة"}),e.jsxs("div",{className:"flex items-center justify-start text-base font-medium font-cairo text-primery-blue-900 px-4 py-3",children:[i==null?void 0:i.full_name,n&&n]})]}),e.jsxs("div",{className:"flex flex-row ",children:[e.jsx("div",{className:"flex items-center justify-start text-sm font-medium font-cairo text-primery-blue-500 px-4 py-3 bg-white-blue-100",children:"العنوان"}),e.jsx("div",{className:"flex items-center justify-start text-base font-medium font-cairo text-primery-blue-900 px-4 py-3",children:i==null?void 0:i.address})]}),e.jsxs("div",{className:"flex flex-row ",children:[e.jsx("div",{className:"flex items-center justify-start text-sm font-medium font-cairo text-primery-blue-500 px-4 py-3 bg-white-blue-100",children:"رقم الهاتف"}),e.jsx("div",{className:"flex items-center justify-start text-base font-medium font-cairo text-primery-blue-900 px-4 py-3",children:i==null?void 0:i.phone})]}),e.jsxs("div",{className:"flex flex-row ",children:[e.jsx("div",{className:"flex items-center justify-start text-sm font-medium font-cairo text-primery-blue-500 px-4 py-3 bg-white-blue-100",children:"البطاقة الشخصية"}),e.jsx("div",{className:"flex items-center justify-start text-base font-medium font-cairo text-primery-blue-900 px-4 py-3",children:i==null?void 0:i.personal_id_number})]}),e.jsxs("div",{className:"flex flex-row ",children:[e.jsx("div",{className:"flex items-center justify-start text-sm font-medium font-cairo text-primery-blue-500 px-4 py-3 bg-white-blue-100",children:"رخصة القيادة"}),e.jsx("div",{className:"flex items-center justify-start text-base font-medium font-cairo text-primery-blue-900 px-4 py-3",children:i==null?void 0:i.driver_license_number})]})]})}),e.jsx(k,{text:"تفاصيل الحجز",className:"mt-6"}),e.jsx("div",{className:"mt-6",children:e.jsxs("div",{className:"grid grid-cols-4 gap-6 justify-center sm:justify-between gap-x-6 gap-y-4",children:[e.jsxs("div",{className:"flex flex-row",children:[e.jsx("div",{className:"flex items-center justify-start text-sm font-medium font-cairo text-primery-blue-500 px-4 py-3 bg-white-blue-100",children:"مدة الحجز"}),e.jsx("div",{className:"flex items-center justify-start text-base font-medium font-cairo text-primery-blue-900 px-4 py-3",children:t.num_days})]}),e.jsxs("div",{className:"flex flex-row ",children:[e.jsx("div",{className:"flex items-center justify-start text-sm font-medium font-cairo text-primery-blue-500 px-4 py-3 bg-white-blue-100",children:"تبدأ يوم"}),e.jsx("div",{className:"flex items-center justify-start text-base font-medium font-cairo text-primery-blue-900 px-4 py-3",children:(t==null?void 0:t.start_date)&&B(t==null?void 0:t.start_date,"yyyy-MM-dd")})]}),e.jsxs("div",{className:"flex flex-row ",children:[e.jsx("div",{className:"flex items-center justify-start text-sm font-medium font-cairo text-primery-blue-500 px-4 py-3 bg-white-blue-100",children:"تنتهي يوم"}),e.jsx("div",{className:"flex items-center justify-start text-base font-medium font-cairo text-primery-blue-900 px-4 py-3",children:(t==null?void 0:t.end_date)&&B(t==null?void 0:t.end_date,"yyyy-MM-dd")})]}),e.jsxs("div",{className:"flex flex-row ",children:[e.jsx("div",{className:"flex items-center justify-start text-sm font-medium font-cairo text-primery-blue-500 px-4 py-3 bg-white-blue-100",children:"المسافة"}),e.jsx("div",{className:"flex items-center justify-start text-base font-medium font-cairo text-primery-blue-900 px-4 py-3",children:t==null?void 0:t.limited_km})]})]})}),e.jsxs("div",{className:"mt-6",children:[e.jsx(k,{text:"تفاصيل السيارة",className:"mt-6"}),c&&e.jsx(qe,{car:c})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx(k,{text:"تفاصيل الدفع"}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 justify-center sm:justify-between gap-x-6 gap-y-4",children:[e.jsxs("div",{className:"flex flex-row",children:[e.jsx("div",{className:"flex items-center w-[164px] justify-start text-sm font-medium font-cairo text-primery-blue-500 px-4 py-3 bg-white-blue-100",children:"طريقة الدفع"}),e.jsx("div",{className:"flex items-center justify-start text-base font-medium font-cairo text-primery-blue-900 px-4 py-3",children:t.payment_status})]}),e.jsxs("div",{className:"flex flex-row ",children:[e.jsx("div",{className:"flex items-center w-[164px] justify-start text-sm font-medium font-cairo text-primery-blue-500 px-4 py-3 bg-white-blue-100",children:"رسوم الحجز"}),e.jsx("div",{className:"flex items-center justify-start text-base font-medium font-cairo text-primery-blue-900 px-4 py-3",children:t==null?void 0:t.price})]}),e.jsxs("div",{className:"flex flex-row ",children:[e.jsx("div",{className:"flex items-center justify-start w-[164px] text-sm font-medium font-cairo text-primery-blue-500 px-4 py-3 bg-white-blue-100",children:"الضريبة"}),e.jsx("div",{className:"flex items-center justify-start text-base font-medium font-cairo text-primery-blue-900 px-4 py-3",children:t==null?void 0:t.tax})]}),e.jsxs("div",{className:"flex flex-row ",children:[e.jsx("div",{className:"flex items-center justify-start w-[164px] text-sm font-medium font-cairo text-primery-blue-500 px-4 py-3 bg-white-blue-100",children:"تكلفة التأمين"}),e.jsx("div",{className:"flex items-center justify-start text-base font-medium font-cairo text-primery-blue-900 px-4 py-3",children:t==null?void 0:t.insurance_price})]}),e.jsxs("div",{className:"flex flex-row ",children:[e.jsx("div",{className:"flex items-center justify-start w-[164px] text-sm font-medium font-cairo text-primery-blue-500 px-4 py-3 bg-white-blue-100",children:"نوع التأمين"}),e.jsx("div",{className:"flex items-center justify-start text-base font-medium font-cairo text-primery-blue-900 px-4 py-3",children:t==null?void 0:t.insurance_type})]}),e.jsxs("div",{className:"flex flex-row ",children:[e.jsx("div",{className:"flex items-center justify-start w-[164px] text-sm font-medium font-cairo text-primery-blue-500 px-4 py-3 bg-white-blue-100",children:"الخصم"}),e.jsx("div",{className:"flex items-center justify-start text-base font-medium font-cairo text-primery-blue-900 px-4 py-3",children:t==null?void 0:t.discount})]}),e.jsxs("div",{className:"flex flex-row ",children:[e.jsx("div",{className:"flex items-center justify-start w-[164px] text-sm font-medium font-cairo text-primery-blue-500 px-4 py-3 bg-white-blue-100",children:"إجمالي الفاتورة"}),e.jsx("div",{className:"flex items-center justify-start text-base font-medium font-cairo text-primery-blue-900 px-4 py-3",children:t==null?void 0:t.total_price})]})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx(k,{text:"بنود التعاقد"}),e.jsx("div",{children:"1. الأهلية لحجز السيارة يجب أن يكون عمر المستأجر 21 عامًا على الأقل (قد يختلف العمر المطلوب حسب فئة السيارة). يجب أن يكون لدى المستأجر رخصة قيادة سارية المفعول صالحة لمدة لا تقل عن سنة واحدة. قد يُطلب تقديم جواز السفر أو بطاقة الهوية الوطنية للتحقق من الهوية. في بعض الحالات، قد يتطلب الحجز بطاقة ائتمان باسم المستأجر لضمان الدفع والتأمين. 2. شروط الحجز والدفع يمكن الحجز عبر الموقع الإلكتروني، التطبيق، أو الفروع المباشرة. يجب دفع عربون تأميني عند الحجز، تحدده فئة السيارة ومدة الإيجار. تشمل خيارات الدفع: بطاقات الائتمان والخصم المباشر (Visa، Mastercard، Amex). المحافظ الرقمية (PayPal، Apple Pay، Google Pay). الدفع عند الاستلام (في بعض الفروع وحسب الشروط المحددة). قد يتم رفض الحجز في حال عدم توفر المستندات المطلوبة أو وجود سجل تأجيري غير مرضٍ. 3. استلام السيارة يجب على العميل الحضور في الموعد المحدد مع جميع المستندات المطلوبة (رخصة القيادة، بطاقة الهوية، بطاقة الدفع إن لزم الأمر). يتم فحص السيارة من قبل العميل والموظف قبل التسليم، ويتم توثيق أي خدوش أو أضرار سابقة. يجب استلام السيارة بمستوى وقود محدد كما هو مذكور في العقد، وإعادتها بنفس المستوى. في حالة التأخير عن موعد الاستلام لأكثر من ساعتين بدون إشعار مسبق، قد يتم إلغاء الحجز تلقائيًا. 4. إرجاع السيارة يجب إعادة السيارة في المكان والموعد المحددين في عقد الإيجار. يتم فحص السيارة من قبل الموظف عند الإرجاع، وفي حال وجود أي أضرار غير موثقة مسبقًا، قد يتم خصم تكلفة الإصلاح من التأمين. يتم فرض رسوم إضافية لكل ساعة تأخير بعد الموعد المحدد للإرجاع. يجب إعادة السيارة بنفس مستوى الوقود عند الاستلام، وإلا سيتم فرض رسوم تعبئة الوقود. 5. سياسة الإلغاء والتعديلات الإلغاء قبل 24 ساعة من موعد الحجز: استرداد كامل المبلغ المدفوع. الإلغاء خلال 12-24 ساعة من موعد الحجز: استرداد 50% من المبلغ المدفوع. الإلغاء قبل أقل من 12 ساعة من موعد الحجز: لا يتم استرداد أي مبلغ. يمكن تعديل موعد الحجز أو نوع السيارة حسب التوافر، وقد يتم تطبيق رسوم إضافية إذا كانت السيارة المطلوبة أعلى فئة. 6. الاستخدام المسموح به والمحظور الاستخدام المسموح به: القيادة داخل نطاق المناطق المحددة في العقد. الاستخدام الشخصي أو التجاري وفقًا للعقد. الالتزام بقوانين المرور المحلية. الاستخدام المحظور: القيادة خارج الحدود المحددة دون إذن مسبق. استخدام السيارة في السباقات أو الاختبارات أو أي أنشطة غير قانونية. نقل مواد غير قانونية أو خطرة. السماح لشخص غير مخول بقيادة السيارة. 7. التأمين والمسؤولية جميع السيارات مؤمنة بتغطية تأمين أساسي ضد الحوادث والأضرار. يمكن إضافة تغطية تأمينية شاملة مقابل رسوم إضافية لتقليل المسؤولية المالية في حالة وقوع حادث. في حالة وقوع حادث، يجب على المستأجر إبلاغ الشركة والسلطات المختصة فورًا واتخاذ الإجراءات اللازمة حسب العقد. 8. سياسة الصيانة والأعطال في حالة حدوث عطل ميكانيكي، توفر الشركة سيارة بديلة حسب التوافر. الأعطال الناتجة عن إهمال العميل (مثل نفاد الوقود أو فقدان المفاتيح) تخضع لرسوم إضافية. يمنع تمامًا إصلاح السيارة بدون إذن مسبق من الشركة. 9. حالات انتهاك العقد والعقوبات في حال انتهاك أي من الشروط، يحق للشركة: إلغاء الحجز فورًا. فرض رسوم إضافية أو غرامات وفقًا لنوع المخالفة. إحالة القضية للجهات المختصة في حالة المخالفات القانونية الجسيمة."})]})]})};function Ue({maintenanceCenter:s,setShowCancelPopup:t,showCancelPopup:n,loading:r,nextStep:i,prevStep:l,step:c,steps:a}){const d=U();return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-row justify-between items-center mt-8",children:[s?e.jsx(A,{type:"button",className:"xl:px-[64.5px] xl:py-[18px] border border-r-red-error-50 bg-red-error-50 text-[#A21515] xl:font-bold",onClick:()=>t(!0),children:"إلغاء الحجز"}):e.jsx(A,{type:"button",className:"xl:px-[64.5px] xl:py-3 border border-r-red-error-50 bg-red-error-50 text-[#A21515] xl:font-bold",onClick:()=>t(!0),children:"الغاء"}),e.jsx("div",{children:s?e.jsx(V,{className:"xl:px-[91px] xl:py-3 xl:font-semibold ms-6",disabled:r,children:r?"جاري التحميل...":"حفظ التغييرات"}):e.jsxs("div",{className:"flex flex-row items-center justify-between",children:[e.jsxs(A,{type:"button",className:L("",{hidden:c===0}),disabled:c===0,onClick:l,children:[e.jsxs("svg",{width:"25",height:"24",viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M12.5 22C18.0228 22 22.5 17.5228 22.5 12C22.5 6.47715 18.0228 2 12.5 2C6.97715 2 2.5 6.47715 2.5 12C2.5 17.5228 6.97715 22 12.5 22Z",stroke:"#145DA0",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M9 12H15",stroke:"#145DA0",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M13 15L16 12L13 9",stroke:"#145DA0",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),c===1?"بيانات العميل":c===2?"تفاصيل الحجز والسيارة":"تفاصيل الدفع"]}),c<a.length-1?e.jsxs(V,{className:"xl:px-[91px] xl:py-3 xl:font-semibold ms-6",disabled:r,type:"button",onClick:i,children:[c===0?"تفاصيل الحجز":c===1?"تفاصيل الدفع":"التعاقد وإصدار الفاتورة",e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M15.5 12H9.5",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M11.5 9L8.5 12L11.5 15",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})]}):e.jsxs(V,{className:"xl:px-[91px] xl:py-3 xl:font-semibold ms-6",disabled:r,type:"submit",children:[e.jsxs("svg",{width:"25",height:"24",viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M7.75 7H17.25V5C17.25 3 16.5 2 14.25 2H10.75C8.5 2 7.75 3 7.75 5V7Z",stroke:"white",strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M16.5 15V19C16.5 21 15.5 22 13.5 22H11.5C9.5 22 8.5 21 8.5 19V15H16.5Z",stroke:"white",strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M21.5 10V15C21.5 17 20.5 18 18.5 18H16.5V15H8.5V18H6.5C4.5 18 3.5 17 3.5 15V10C3.5 8 4.5 7 6.5 7H18.5C20.5 7 21.5 8 21.5 10Z",stroke:"white",strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M17.5 15H16.29H7.5",stroke:"white",strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M7.5 11H10.5",stroke:"white",strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"})]}),"حفظ وطباعة العقد والفاتورة"]})]})})]}),e.jsx(ke,{open:n,onClickButton1:()=>{t(!1)},onClickButton2:()=>{d("/cars/booking"),t(!1)},text1:s?"إلغاء تعديل بيانات تسجيل الحجز":"إلغاء تسجيل الحجز",text2:s?"أنت على وشك إلغاء عملية تعديل بيانات الحجز دون إكمال البيانات المطلوبة. سيتم تجاهل جميع البيانات المدخلة، هل أنت متأكد؟":"أنت على وشك إلغاء عملية إضافة الحجز دون إكمال البيانات المطلوبة. سيتم تجاهل جميع البيانات المدخلة، هل أنت متأكد؟",textButton1:"إكمال الحجز",textButton2:"إلغاء الحجز"})]})}const Re=s=>{const t=new Ce;t.setFontSize(16),t.text("Contract Details",105,20,{align:"center"});const r=Object.entries({customer_id:"Customer ID",start_date:"Start Date",end_date:"End Date",num_days:"Number of Days",limited_km:"Limited Kilometers",vehicle_id:"Vehicle",insurance_type:"Insurance Type",insurance_price:"Insurance Price",price:"Price",tax:"Tax",discount:"Discount",total_price:"Total Price",payment_status:"Payment Status",notes:"Notes"}).map(([i,l])=>[l,s[i]??"N/A"]);_e(t,{startY:30,head:[["Field","Value"]],body:r,styles:{halign:"left"},headStyles:{fillColor:[41,128,185],textColor:255},alternateRowStyles:{fillColor:[245,245,245]},margin:{horizontal:10}}),t.save("contract-details.pdf")},ze=({className:s,name:t,label:n,maxSize:r,multiple:i,editImages:l})=>{const{control:c,setValue:a,watch:d,getValues:b}=P(),[g,m]=o.useState([]),j=p=>{const x=b(t),y=Array.isArray(x)?x.filter((w,C)=>C!==p):[];a(t,y,{shouldValidate:!0}),m(w=>w.filter((E,v)=>(v===p&&URL.revokeObjectURL(w[v]),v!==p)))},h=(p,x)=>{if(i&&l){const y=b(x),C=[...Array.isArray(y)?y:[],...p];a(x,Ve(C),{shouldValidate:!0});const E=p.map(v=>URL.createObjectURL(v));m(v=>[...v,...E])}else a(x,i?p:p[0],{shouldValidate:!0}),m(p.map(y=>URL.createObjectURL(y)))},N=d(t);return o.useEffect(()=>{(!N||N.length===0)&&m([])},[N]),o.useEffect(()=>{l&&(a(t,l,{shouldValidate:!0}),m(Array.isArray(l)?l:[l]))},[]),e.jsx(ce,{control:c,name:t,render:({field:p})=>e.jsxs(de,{className:s,children:[e.jsx(me,{className:"text-primery-blue-900 font-medium text-[18px] leading-[33.73px] tracking-normal text-start",children:n}),e.jsx(xe,{children:e.jsx(Oe,{onDrop:x=>h(x,t),acceptedFiles:p.value,previews:g,maxSize:r,multiple:i,removeImage:j})}),e.jsx($,{})]})})};function Oe({onDrop:s,previews:t,maxSize:n,multiple:r,removeImage:i}){const{getRootProps:l,getInputProps:c}=Fe({onDrop:s,accept:{"application/pdf":[],"image/*":[]},multiple:r,maxSize:n});return e.jsxs("div",{...l(),className:"border-2 border-dashed border-primery-blue-500 rounded-lg p-4 text-center cursor-pointer",children:[e.jsx("input",{...c()}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-row items-center justify-between text-base leading-5 tracking-normal font-medium",children:[e.jsxs("div",{className:"flex flex-row items-center gap-2 mb-5",children:[e.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M10.7521 23.4006C10.366 25.0819 8.41456 26.783 6.31738 25.3982C6.31738 25.3982 7.67526 26.605 10.4333 26.605H22.4646C23.9666 26.605 25.2654 25.5577 25.5843 24.0894L27.0886 16.6907C27.5357 14.373 26.0064 13.2734 23.9703 13.2734H15.5231C14.0248 13.2734 12.7272 14.3158 12.4059 15.7791L10.7521 23.4006Z",stroke:"#145DA0",strokeWidth:"1.44",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M10.4339 26.6056C6.46498 26.6056 4.12744 24.2731 4.12744 20.314V11.685C4.12744 7.73098 5.58202 5.39844 9.54101 5.39844H11.754C12.5485 5.39844 13.2958 5.77329 13.7715 6.40842L14.7815 7.75215C15.2597 8.38605 16.0081 8.75965 16.8026 8.76214H18.6707C22.0917 8.76214 23.6522 10.2628 24.017 13.2641",stroke:"#145DA0",strokeWidth:"1.44",strokeLinecap:"round",strokeLinejoin:"round"})]}),e.jsx("p",{className:"font-medium text-sm text-[#2D2D3A]",children:"قم برفع ملف أو قم سحبه هنا"})]}),e.jsx(A,{type:"button",className:"h-[30px]",children:"اختيار الملف"})]}),e.jsx("div",{className:"flex flex-row justify-center gap-2 border-2 border-dashed border-primery-blue-500 rounded-lg p-8",children:t==null?void 0:t.map((a,d)=>e.jsxs("div",{className:"relative group flex flex-col items-center text-sm text-muted-foreground",children:[e.jsx("img",{src:a,alt:`Preview ${d+1}`,className:"w-20 h-20 object-cover rounded-md"}),e.jsx("button",{type:"button",onClick:b=>{b.stopPropagation(),i(d)},className:"absolute w-6 h-6 top-1 start-1 bg-red-error-600 text-white-blue-50 p-1 rounded-full text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:"✕"})]},d))}),e.jsx("div",{children:e.jsxs("ul",{className:"text-xs leading-[22.5px] font-medium tracking-normal text-start text-[#90868C] list-[square] marker:text-[8px] ps-5 mt-2",children:[e.jsxs("li",{children:["اقصى حجم ",e.jsxs("span",{className:"font-bold ms-[2px]",children:[n/1024/1024,"MB"]})]}),e.jsxs("li",{children:["الملفات المسموح بها",e.jsx("span",{className:"font-bold ms-[2px]",children:"jpeg , png , jpg, gif, svg"})]})]})})]})]})}const Ye=({open:s,onAddAnother:t,onReturnToList:n,text1:r,textButton1:i,textButton2:l,contractId:c=""})=>{const[a,d]=o.useState(!1),[b,g]=o.useState(""),m=U(),j=J({resolver:Q(u.object({contract_file:u.instanceof(File,{message:"File is required"})})),defaultValues:{contract_file:void 0}}),h=async N=>{var p,x;d(!0),g(null);try{await ee({endpoint:D.contract.uploadContract+c,body:{...N,status:"approved"},config:{headers:{"Content-Type":"multipart/form-data"}}}),ae.success("تم تسجيل بيانات العقد بنجاح",{duration:3e3,className:"font-cairo",icon:e.jsx(Ae,{width:"25",height:"25",className:"text-green-success-600"})}),m("/cars/contract-archive")}catch(y){if((x=(p=y.response)==null?void 0:p.data)!=null&&x.errors)Object.entries(y.response.data.errors).forEach(([w,C])=>{j.setError(w,{type:"manual",message:C.join(", ")})});else{let w="حدث خطأ أثناء إرسال البيانات. يرجى المحاولة مرة أخرى.";y.response?w=y.response.data.msg||w:y.request&&(w="تعذر الاتصال بالخادم. يرجى التحقق من اتصالك بالإنترنت."),g(w)}}finally{d(!1)}};return e.jsxs(Se,{open:s,children:[e.jsx("div",{className:L("fixed inset-0 bg-black/50 z-[999]",{"!hidden":!s})}),e.jsxs(Le,{showCloseButton:!1,className:"z-[1000] max-w-lg rounded-lg p-6 bg-white-blue-50 font-cairo gap-0 [&_[aria-label=Close]]:opacity-0",children:[e.jsxs(De,{className:"flex flex-col items-center",children:[e.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M24 27.5C23.18 27.5 22.5 26.82 22.5 26V16C22.5 15.18 23.18 14.5 24 14.5C24.82 14.5 25.5 15.18 25.5 16V26C25.5 26.82 24.82 27.5 24 27.5Z",fill:"#145DA0"}),e.jsx("path",{d:"M29.78 6.9H18.22C17.42 6.9 16.78 6.26 16.78 5.46C16.78 4.66 17.42 4 18.22 4H29.78C30.58 4 31.22 4.64 31.22 5.44C31.22 6.24 30.58 6.9 29.78 6.9Z",fill:"#145DA0"}),e.jsx("path",{opacity:"0.4",d:"M30 39.9403V34.0603C30 31.5203 31.52 30.0003 34.06 30.0003H39.94C40.32 30.0003 40.66 30.0403 41 30.1203C41.22 29.0003 41.34 27.8403 41.34 26.6603C41.34 17.1003 33.56 9.32031 24 9.32031C14.44 9.32031 6.65997 17.1003 6.65997 26.6603C6.65997 36.2203 14.44 44.0003 24 44.0003C26.42 44.0003 28.72 43.5003 30.82 42.6003C30.3 41.9203 30 41.0403 30 39.9403Z",fill:"#145DA0"}),e.jsx("path",{d:"M39.94 30H34.08C31.52 30 30 31.52 30 34.06V39.92C30 42.46 31.52 43.98 34.06 43.98H39.92C42.46 43.98 43.98 42.46 43.98 39.92V34.06C44 31.52 42.48 30 39.94 30ZM35.84 40.12C35.84 40.76 35.32 41.28 34.68 41.28C34.04 41.28 33.52 40.76 33.52 40.12V33.9C33.52 33.26 34.04 32.74 34.68 32.74C35.32 32.74 35.84 33.26 35.84 33.9V40.12ZM40.5 40.12C40.5 40.76 39.98 41.28 39.34 41.28C38.7 41.28 38.18 40.76 38.18 40.12V33.9C38.18 33.26 38.7 32.74 39.34 32.74C39.98 32.74 40.5 33.26 40.5 33.9V40.12Z",fill:"#145DA0"})]}),e.jsx(Me,{className:"text-center text-green-success-600 font-bold text-[22px] leading-[33px] tracking-normal",children:r})]}),e.jsx(X,{...j,children:e.jsxs("form",{onSubmit:j.handleSubmit(h),className:"mb-8",children:[e.jsx("div",{className:"mt-2 mb-6 text-center text-[#6B7280] font-medium text-[14px] leading-[28px] tracking-normal",children:e.jsx(ze,{name:"contract_file",label:"رفع ملف",multiple:!1,maxSize:10*1024*1024})}),e.jsxs("div",{className:"flex flex-row gap-3",children:[e.jsx(V,{type:"submit",className:"w-full text-base leading-5 tracking-normal font-medium py-[10px]",children:i}),e.jsx(A,{onClick:t,className:"w-full text-base leading-5 tracking-normal py-[10px] font-medium",children:l})]})]})})]})]})},Ge=Z[0].merge(Z[1]).merge(Z[2]),T=[{title:"بيانات العميل",description:"تفاصيل المستأجر",component:He},{title:"بيانات الحجز والسيارة",description:"مدة الحجز واختيار السيارة",component:Be},{title:"تفاصيل الدفع",description:"تفاصيل التكاليف وإصدار الفاتورة",component:We},{title:"Confirmation",description:"تاكد من البيانات",component:Ze}],Ke=s=>s===0?["customer_id"]:s===1?["num_days","end_date","limited_km","vehicle_id"]:s===2?["insurance_type","insurance_price","price","tax","payment_status","discount","total_price","notes"]:[];function $e({maintenanceCenter:s,carID:t}){const[n,r]=o.useState(null),[i,l]=o.useState(!1),[c,a]=o.useState(!1),[d,b]=o.useState(!1),[g,m]=o.useState(),j=U(),[h,N]=oe.useState(0),p=o.useMemo(()=>({vehicle_id:t||void 0}),[s]),x=J({resolver:Q(Ge),defaultValues:p}),{trigger:y}=x,w=async f=>{f.preventDefault();const M=Ke(h);await y(M)&&N(q=>Math.min(T.length-1,q+1))},C=f=>{f.preventDefault(),N(M=>Math.max(0,M-1))},E=async f=>{var M,W;if(f.contract_file)console.log("asd");else{l(!0),r(null);const q={...f,start_date:f!=null&&f.start_date?B(f.start_date,"yyyy-MM-dd"):"",end_date:f!=null&&f.end_date?B(f.end_date,"yyyy-MM-dd"):""};try{const _=await ee({endpoint:s?D.maintenanCenter.update+s.id:D.contract.create,body:q,config:{headers:{"Content-Type":"multipart/form-data"}}});m(_.data.data.id),Re(f),a(!0)}catch(_){if((W=(M=_.response)==null?void 0:M.data)!=null&&W.errors)Object.entries(_.response.data.errors).forEach(([F,re])=>{x.setError(F,{type:"manual",message:re.join(", ")})});else{let F="حدث خطأ أثناء إرسال البيانات. يرجى المحاولة مرة أخرى.";_.response?F=_.response.data.msg||F:_.request&&(F="تعذر الاتصال بالخادم. يرجى التحقق من اتصالك بالإنترنت."),r(F)}}finally{l(!1)}}},v=()=>{a(!1)},se=T[h].component;return e.jsxs(e.Fragment,{children:[e.jsx(Ee,{steps:T.map(f=>({label:f.title,description:f.description})),current:h}),e.jsx(X,{...x,children:e.jsxs("form",{onSubmit:x.handleSubmit(E),className:"mb-8",children:[e.jsx(se,{}),n&&e.jsx("div",{className:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:n}),e.jsx("button",{onClick:()=>r(null),className:"text-red-700 hover:text-red-900",children:"×"})]})}),e.jsx(Ue,{maintenanceCenter:s,loading:i,setShowCancelPopup:b,setShowSuccessPopup:a,showCancelPopup:d,showSuccessPopup:c,nextStep:w,prevStep:C,step:h,steps:T})]})}),e.jsx(Ye,{text1:s?"تم تعديل بيانات الحجز بنحاح":"بانتظار رفع العقد بعد التوقيع",textButton1:"استكمال",textButton2:s?"تعديل بيانات اخرى":"إغلاق",open:c,onAddAnother:v,onReturnToList:()=>{j("/customer-relations/complaints"),a(!1)},contractId:g})]})}function Ht(){const t=new URLSearchParams(window.location.search).get("carID");return e.jsx("div",{className:"mt-6 w-full",children:e.jsx($e,{carID:t})})}export{Ht as default};
//# sourceMappingURL=AddBooking.page-BK8MeRn_.js.map
