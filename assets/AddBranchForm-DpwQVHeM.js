import{j as t,r as n,d as q,e as g}from"./index-CG21Kl6L.js";import{M as F}from"./MainHeading-D0_31WmT.js";import{U as k}from"./UnderlineHeading-6dFpHrZu.js";import{z as s,u as E,t as M,F as H}from"./index-CVKxZN6H.js";import{P as y}from"./PrimaryButton-CqSNXaEZ.js";import{a as T}from"./axios-utils-DWLLXNPU.js";import{S as v}from"./SecondaryButton-C8PAsQMM.js";import{C as b}from"./CancelPopup-DkpTHoXx.js";import{S}from"./SelectInputForm-nhbT-0nq.js";import{T as i}from"./TextInputForm-ML6m37PA.js";import{S as I}from"./SuccessPopup-CoLlaGCA.js";const W=()=>t.jsxs("div",{className:"mb-6",children:[t.jsx("div",{className:"flex flex-row justify-between mb-6",children:t.jsx(k,{text:"اضافة فرع"})}),t.jsx(F,{text:"المعلومات الأساسية"})]}),L=s.object({name:s.string().min(1,"Maintenance center name is required"),area:s.string().min(1,"Area is required"),city:s.string().min(1,"City is required"),address:s.string().min(1,"Address is required"),phone:s.string().min(1,"رقم الهاتف مطلوب").refine(e=>/^\d+$/.test(e),"الرجاء إدخال أرقام فقط").refine(e=>e.length>=8&&e.length<=15,"يجب أن يتكون رقم الهاتف من 8 إلى 15 رقم"),status:s.enum(["active","not active"],{required_error:"Status is required"})});function R(){return t.jsxs("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsx(i,{name:"name",label:"اسم الفرع",placeholder:"ادخل اسم مركز الصيانة"}),t.jsx(S,{name:"area",label:"المنطفة",placeholder:"المنطقة الشرقة",options:[{name:"option1",value:"option1"},{name:"option2",value:"option2"},{name:"option3",value:"option3"},{name:"option4",value:"option4"}]}),t.jsx(i,{name:"city",label:"المدينة",placeholder:"الدمام"}),t.jsx(i,{name:"address",label:"عنوان الفرع",placeholder:"ادخل عنوان الفرع"}),t.jsx(i,{type:"tel",name:"phone",label:"رقم التواصل",placeholder:"ادخل رقم التواصل",className:"[&>input]:text-end [&>input]:placeholder:text-end"}),t.jsx(S,{name:"status",label:"الحالة",placeholder:"الشرقية",options:[{name:"متاح",value:"active"}]})]})}function X({branch:e}){const[x,d]=n.useState(null),[a,u]=n.useState(!1),[N,m]=n.useState(!1),[A,l]=n.useState(!1),c=q(),B=n.useMemo(()=>({name:(e==null?void 0:e.name)||"",area:(e==null?void 0:e.area)||"",city:(e==null?void 0:e.city)||"",address:(e==null?void 0:e.address)||"",phone:(e==null?void 0:e.phone)||"",status:(e==null?void 0:e.status)||"active"}),[e]),p=E({resolver:M(L),defaultValues:B}),C=()=>{m(!1)},h=async w=>{var f,j;u(!0),d(null);try{await T({endpoint:e?g.branch.update+e.id:g.branch.create,body:w,config:{headers:{"Content-Type":"multipart/form-data"}}}),m(!0)}catch(r){if((j=(f=r.response)==null?void 0:f.data)!=null&&j.errors)Object.entries(r.response.data.errors).forEach(([o,P])=>{p.setError(o,{type:"manual",message:P.join(", ")})});else{let o="حدث خطأ أثناء إرسال البيانات. يرجى المحاولة مرة أخرى.";r.response?o=r.response.data.msg||o:r.request&&(o="تعذر الاتصال بالخادم. يرجى التحقق من اتصالك بالإنترنت."),d(o)}}finally{u(!1)}};return t.jsxs(t.Fragment,{children:[t.jsx(H,{...p,children:t.jsxs("form",{onSubmit:p.handleSubmit(h),className:"mb-8",children:[t.jsx(R,{}),x&&t.jsx("div",{className:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{children:x}),t.jsx("button",{onClick:()=>d(null),className:"text-red-700 hover:text-red-900",children:"×"})]})}),t.jsxs("div",{className:"flex flex-row justify-between items-center mt-8",children:[e?t.jsx(v,{type:"button",className:"xl:px-[101px] xl:py-[18px] text-[#A21515] border border-red-error-50 xl:font-bold bg-red-error-50",onClick:()=>l(!0),children:"إلغاء الطلب"}):t.jsx(v,{type:"button",className:"xl:px-[64.5px] xl:py-[18px] border border-r-red-error-50 bg-red-error-50 text-[#A21515] xl:font-bold",onClick:()=>l(!0),children:"الغاء"}),t.jsx("div",{children:e?t.jsx(y,{className:"xl:px-[107px] xl:py-[18px] xl:font-bold ms-6",disabled:a,children:a?"جاري التحميل...":"حفظ التغييرات"}):t.jsx(y,{className:"xl:px-[107px] xl:py-[18px] xl:font-bold ms-6",disabled:a,children:a?"جاري التحميل...":"اضافة"})})]})]})}),t.jsx(b,{open:A,onClickButton1:()=>{l(!1)},onClickButton2:()=>{c("/branches/list"),l(!1)},text1:e?"إلغاء تعديل بيانات فرع":"إلغاء طلب اضافة فرع",text2:e?"أنت على وشك إلغاء عملية تعديل بيانات فرع دون إكمال البيانات المطلوبة. سيتم تجاهل جميع البيانات المدخلة، هل أنت متأكد؟":"أنت على وشك إلغاء عملية إضافة فرع دون إكمال البيانات المطلوبة. سيتم تجاهل جميع البيانات المدخلة، هل أنت متأكد؟",textButton1:"إكمال الطلب",textButton2:"إلغاء الطلب"}),t.jsx(I,{text1:e?"تم تعديل بيانات الفرع بنحاح":"تم إضافة فرع جديد بنحاح",text2:e?"تم تعديل الفرع، يمكنك متابعة الفروع من قائمة الفروع.":"تم تسجيل فرع جديد، يمكنك متابعة الفروع من قائمة الفروع.",textButton1:"العودة لقائمة الفروع",textButton2:e?"تعديل بيانات اخرى":"إضافة فرع أخر",open:N,onAddAnother:C,onReturnToList:()=>{c("/branches/list"),m(!1)}})]})}export{X as A,W as H};
//# sourceMappingURL=AddBranchForm-DpwQVHeM.js.map
