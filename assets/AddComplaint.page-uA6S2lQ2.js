import{j as s,d as F,r as x,e as j}from"./index-BYyXun5x.js";import{A}from"./BulkAddIcon-CkJjb4i1.js";import{S as C}from"./SyncIcon-Bc7rrv6_.js";import{z as m,u as k,t as w,F as B}from"./index-C2_QJ2lf.js";import{a as P}from"./axios-utils-AvuZ81CO.js";import{R as q}from"./RichTextInput-C1v2YfXj.js";import{S as b}from"./SelectInputForm-CG_Opxs4.js";import{T as I}from"./TextInputForm-DXNY8AYK.js";import{S as T}from"./SuccessPopup-D1XZ3Spp.js";import{S as h}from"./SecondaryButton-DL_Bkgwn.js";import{P as g}from"./PrimaryButton-CZnRZgcz.js";import{C as R}from"./CancelPopup-DUQLiKLA.js";import"./index-CV4wEvKw.js";import"./select-779NlImg.js";import"./Combination-cklTRtAe.js";import"./index-Gk0NKYh3.js";import"./SuccessIcon-BhPCSHz0.js";import"./dialog-CC_6CGm6.js";import"./index-CLYNl1a9.js";function D({maintenanceOrder:t}){return s.jsx("div",{className:"my-6",children:s.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[s.jsx(I,{name:"title",placeholder:"بحث عن منتج، أو كتابة عنوان الشكوى",label:"موضوع الشكوى"}),s.jsx(b,{name:"type",placeholder:"خيارات",label:"طريقة استقبال الشكوى",options:[{name:"البريد الإلكتروني",value:"email"},{name:"الهاتف",value:"phone"},{name:"الفاكس",value:"fax"},{name:"البريد العادي",value:"mail"}],data:t}),s.jsx(b,{name:"department",placeholder:"خيارات",label:"القسم المختص",options:[{name:"القسم الأول",value:"1"},{name:"القسم الثاني",value:"2"},{name:"القسم الثالث",value:"3"},{name:"القسم الرابع",value:"4"}],data:t})]})})}function L({maintenanceOrder:t,setShowCancelPopup:e,setShowSuccessPopup:o,showCancelPopup:u,showSuccessPopup:a,loading:l}){const i=F(),c=()=>{o(!1)};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex flex-row justify-end items-center mt-8",children:[t?s.jsx(h,{type:"button",className:"xl:px-[87px] xl:py-3 text-[#A21515] border border-red-error-50 xl:font-semibold bg-red-error-50",onClick:()=>e(!0),children:"إلغاء الشكوى"}):s.jsx(h,{type:"button",className:"xl:px-[87px] xl:py-3 border bordr-[#E8EFF6] xl:font-semibold",onClick:()=>e(!0),children:"الغاء"}),s.jsx("div",{children:t?s.jsx(g,{className:"xl:px-[91px] xl:py-3 xl:font-semibold ms-6",disabled:l,children:l?"جاري التحميل...":"حفظ التغييرات"}):s.jsx(g,{className:"xl:px-[91px] xl:py-3 xl:font-semibold ms-6",disabled:l,children:l?"جاري التحميل...":"تسجيل الشكوى"})})]}),s.jsx(R,{open:u,onClickButton1:()=>{e(!1)},onClickButton2:()=>{i("/self-services/services"),e(!1)},text1:t?"إلغاء تعديل بيانات تسجيل الشكوى":"إلغاء تسجيل الشكوى",text2:t?"أنت على وشك إلغاء عملية تعديل بيانات الشكوى دون إكمال البيانات المطلوبة. سيتم تجاهل جميع البيانات المدخلة، هل أنت متأكد؟":"أنت على وشك إلغاء عملية إضافة الشكوى دون إكمال البيانات المطلوبة. سيتم تجاهل جميع البيانات المدخلة، هل أنت متأكد؟",textButton1:"إكمال الشكوى",textButton2:"إلغاء الشكوى"}),s.jsx(T,{text1:t?"تم تعديل بيانات الشكوى بنحاح":"تم إضافة الشكوى بنحاح",text2:'تم تعديل بيانات الشكوى المطلوبة، يمكنك المتابعه مع مركز الشكاوى".',textButton1:"العودة لقائمة الشكاوى",textButton2:t?"تعديل بيانات اخرى":"إضافة شكوى اخرى",open:a,onAddAnother:c,onReturnToList:()=>{i("/self-services/services?complaints=true"),o(!1)}})]})}const M=m.object({title:m.string().min(1,"Address is required"),type:m.string().min(1,"The complaint reception type field is required."),department:m.string().min(1,"Department is required"),description:m.string().min(1,"Description is required")});function z({maintenanceOrder:t}){const[e,o]=x.useState(null),[u,a]=x.useState(!1),[l,i]=x.useState(!1),[c,y]=x.useState(!1),v=x.useMemo(()=>({title:t!=null&&t.cost?String(t==null?void 0:t.cost):void 0,type:(t==null?void 0:t.description)||"",department:(t==null?void 0:t.description)||"",description:(t==null?void 0:t.description)||""}),[t]),d=k({resolver:w(M),defaultValues:v}),N=async S=>{var f,n;a(!0),o(null);try{await P({endpoint:t?j.employeeComplaint.update+t.id:j.employeeComplaint.create,body:S}),i(!0)}catch(p){if((n=(f=p.response)==null?void 0:f.data)!=null&&n.errors)Object.entries(p.response.data.errors).forEach(([r,E])=>{d.setError(r,{type:"manual",message:E.join(", ")})});else{let r="حدث خطأ أثناء إرسال البيانات. يرجى المحاولة مرة أخرى.";p.response?r=p.response.data.msg||r:p.request&&(r="تعذر الاتصال بالخادم. يرجى التحقق من اتصالك بالإنترنت."),o(r)}}finally{a(!1)}};return s.jsx(s.Fragment,{children:s.jsx(B,{...d,children:s.jsxs("form",{onSubmit:d.handleSubmit(N),className:"mb-8",children:[e&&s.jsx("div",{className:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"",children:e}),s.jsx("button",{onClick:()=>o(null),className:"text-red-700 hover:text-red-900",children:"×"})]})}),s.jsx(D,{maintenanceOrder:t}),s.jsxs("div",{children:[s.jsx("p",{className:"text-primery-blue-900 font-medium text-[18px] leading-[33.73px] tracking-normal text-start mb-4",children:"نص الشكوى"}),s.jsx(q,{form:d,data:t==null?void 0:t.description,name:"description",placeholder:"ادخل وصف المنتج"})]}),s.jsx(L,{maintenanceOrder:t,loading:u,setShowCancelPopup:y,setShowSuccessPopup:i,showCancelPopup:c,showSuccessPopup:l})]})})})}function rs(){return s.jsxs("div",{className:"w-full mt-6 p-4",children:[s.jsxs("div",{className:"flex flex-row items-center justify-between",children:[s.jsxs("h1",{className:"font-bold text-[#080614] text-[24px] tracking-normal flex flex-row items-center gap-2",children:[s.jsx(A,{}),"إضافة شكوى"]}),s.jsxs("div",{className:"px-4 py-3 bg-[#F5F4F5] border border-[#E1DEE0] rounded-lg flex flex-row items-center justify-between gap-2",children:[s.jsx("p",{className:"font-bold text-[#423E41] text-base tracking-normal",children:"رقم الشكوى:"}),s.jsx("p",{className:"font-medium text-[#9E939A] text-base tracking-normal me-[2px]",children:"#2324510"}),s.jsx(C,{})]})]}),s.jsx(z,{})]})}export{rs as default};
//# sourceMappingURL=AddComplaint.page-uA6S2lQ2.js.map
