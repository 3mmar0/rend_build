{"version":3,"file":"AddInvoice.page-B-ul7p_C.js","sources":["../../src/features/invoicing/forms/addInvoice/InvoiceInfo.tsx","../../src/features/invoicing/forms/addInvoice/InvoiceTerms.tsx","../../src/features/invoicing/forms/addInvoice/AddInvoiceForm.tsx","../../src/features/invoicing/forms/addInvoice/Heading.tsx","../../src/features/invoicing/pages/AddInvoice.page.tsx"],"sourcesContent":["import { DateInputForm } from '@/components/forms/DateInputForm';\r\nimport SelectInputForm from '@/components/forms/SelectInputForm';\r\nimport TextInputForm from '@/components/forms/TextInputForm';\r\n\r\nexport default function InvoiceInfo() {\r\n    return (\r\n        <div className=\"mb-6 grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n            <TextInputForm name=\"name\" label=\"اسم العميل\" placeholder=\"اختر اسم العميل\" />\r\n            <TextInputForm name=\"description\" label=\"كود الفاتورة\" placeholder=\"#899657\" />\r\n            <DateInputForm name=\"\" label=\"تاريخ الفاتورة\" placeholder=\"2025/05/30\" />\r\n            <TextInputForm name=\"\" label=\"مسئول المبيعات\" placeholder=\"محمد علي\" />\r\n            <DateInputForm name=\"\" label=\"تاريخ الاصدار\" placeholder=\"2025/05/30\" />\r\n            <SelectInputForm\r\n                name=\"location\"\r\n                label=\"فترة السماح للسداد\"\r\n                placeholder=\"4 ايام\"\r\n                options={[{ name: '4 ايام', value: '4 ايام' }]}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n","import { DateInputForm } from '@/components/forms/DateInputForm';\r\nimport SelectInputForm from '@/components/forms/SelectInputForm';\r\nimport TextInputForm from '@/components/forms/TextInputForm';\r\n\r\nexport default function InvoiceTerms() {\r\n    return (\r\n        <div className=\"mb-6 grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n            {/* <TextInputForm name=\"name\" label=\"اسم العميل\" placeholder=\"اختر اسم العميل\" />\r\n            <TextInputForm name=\"description\" label=\"كود الفاتورة\" placeholder=\"#899657\" />\r\n            <DateInputForm name=\"\" label=\"تاريخ الفاتورة\" placeholder=\"2025/05/30\" />\r\n            <TextInputForm name=\"\" label=\"مسئول المبيعات\" placeholder=\"محمد علي\" />\r\n            <DateInputForm name=\"\" label=\"تاريخ الاصدار\" placeholder=\"2025/05/30\" />\r\n            <SelectInputForm\r\n                name=\"location\"\r\n                label=\"فترة السماح للسداد\"\r\n                placeholder=\"4 ايام\"\r\n                options={[{ name: '4 ايام', value: '4 ايام' }]}\r\n            /> */}\r\n        </div>\r\n    );\r\n}\r\n","import { Form } from '@/components/ui/form';\r\nimport { useForm } from 'react-hook-form';\r\nimport { zodResolver } from '@hookform/resolvers/zod';\r\nimport { PrimaryButton } from '@/components/buttons/PrimaryButton';\r\nimport { apiPost } from '@/lib/axios/axios-utils';\r\nimport { endpoints } from '@/lib/axios/axios-global';\r\nimport { useMemo, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { SecondaryButton } from '@/components/buttons/SecondaryButton';\r\nimport CancelPopup from '@/components/Popups/CancelPopup';\r\nimport MainHeading from '@/components/heading/MainHeading';\r\nimport {\r\n    AddMaintenanceCenterFormValues,\r\n    AddMaintenanceCenterSchema,\r\n} from '@/features/maintenance/forms/schemas/add-maintenance-center-schema';\r\nimport SuccessPopup from '@/components/Popups/SuccessPopup';\r\nimport { MaintenanceCenter } from '@/types/maintenanceCenter';\r\nimport InvoiceInfo from './InvoiceInfo';\r\nimport InvoiceTerms from './InvoiceTerms';\r\nimport TextAreaInputForm from '@/components/forms/TextAreaInputForm';\r\n\r\ninterface Props {\r\n    maintenanceCenter?: MaintenanceCenter | null;\r\n}\r\n\r\nexport default function AddInvoiceForm({ maintenanceCenter }: Props) {\r\n    const [error, setError] = useState<string | null>(null);\r\n    const [loading, setLoading] = useState(false);\r\n    const [showSuccessPopup, setShowSuccessPopup] = useState(false);\r\n    const [showCancelPopup, setShowCancelPopup] = useState(false);\r\n    const navigate = useNavigate();\r\n\r\n    const defaultValues = useMemo(\r\n        () => ({\r\n            name: maintenanceCenter?.name || '',\r\n            location: (maintenanceCenter?.location as 'الرياض' | 'الشرقية') || undefined,\r\n            contact_number: maintenanceCenter?.contact_number || '',\r\n            description: maintenanceCenter?.description || '',\r\n            status: (maintenanceCenter?.status as 'active' | 'not active') || undefined,\r\n            contract_status: (maintenanceCenter?.contract_status as 'active' | 'not active') || undefined,\r\n            features: maintenanceCenter?.features || [],\r\n        }),\r\n        [maintenanceCenter],\r\n    );\r\n\r\n    const form = useForm<AddMaintenanceCenterFormValues>({\r\n        resolver: zodResolver(AddMaintenanceCenterSchema),\r\n        defaultValues,\r\n    });\r\n\r\n    const handleAddAnother = () => {\r\n        setShowSuccessPopup(false);\r\n    };\r\n\r\n    const onSubmit = async (data: AddMaintenanceCenterFormValues) => {\r\n        setLoading(true);\r\n        setError(null); // Clear previous errors\r\n        try {\r\n            await apiPost({\r\n                endpoint: maintenanceCenter\r\n                    ? endpoints.maintenanCenter.update + maintenanceCenter.id\r\n                    : endpoints.maintenanCenter.create,\r\n                body: data,\r\n                config: { headers: { 'Content-Type': 'multipart/form-data' } },\r\n            });\r\n            setShowSuccessPopup(true);\r\n        } catch (error: any) {\r\n            if (error.response?.data?.errors) {\r\n                // Handle field-specific errors\r\n                Object.entries(error.response.data.errors).forEach(([field, messages]) => {\r\n                    form.setError(field as any, {\r\n                        type: 'manual',\r\n                        message: (messages as string[]).join(', '),\r\n                    });\r\n                });\r\n            } else {\r\n                // Handle generic error\r\n                let errorMessage = 'حدث خطأ أثناء إرسال البيانات. يرجى المحاولة مرة أخرى.';\r\n                if (error.response) {\r\n                    errorMessage = error.response.data.msg || errorMessage;\r\n                } else if (error.request) {\r\n                    errorMessage = 'تعذر الاتصال بالخادم. يرجى التحقق من اتصالك بالإنترنت.';\r\n                }\r\n                setError(errorMessage);\r\n            }\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Form {...form}>\r\n                <form onSubmit={form.handleSubmit(onSubmit)} className=\"mb-8\">\r\n                    <MainHeading text=\"معلومات الفاتورة\" />\r\n                    <InvoiceInfo />\r\n                    <MainHeading text=\"بنود الفاتورة\" />\r\n                    <InvoiceTerms />\r\n                    <TextAreaInputForm\r\n                        className=\"flex flex-col min-h-[157px]\"\r\n                        name=\"الوصف\"\r\n                        label=\"الوصف\"\r\n                        placeholder=\"ادخل الوصف\"\r\n                    />\r\n                    {error && (\r\n                        <div className=\"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg\">\r\n                            <div className=\"flex justify-between items-center\">\r\n                                <span>{error}</span>\r\n                                <button onClick={() => setError(null)} className=\"text-red-700 hover:text-red-900\">\r\n                                    ×\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                    <div className=\"flex flex-row justify-end items-center mt-8\">\r\n                        {maintenanceCenter ? (\r\n                            <SecondaryButton\r\n                                type=\"button\"\r\n                                className=\"xl:px-[101px] xl:py-[18px] text-[#A21515] border border-red-error-50 xl:font-bold bg-red-error-50\"\r\n                                onClick={() => setShowCancelPopup(true)}\r\n                            >\r\n                                إلغاء الطلب\r\n                            </SecondaryButton>\r\n                        ) : (\r\n                            <SecondaryButton\r\n                                type=\"button\"\r\n                                className=\"xl:px-[64.5px] xl:py-[18px] border border-r-red-error-50 bg-red-error-50 text-[#A21515] xl:font-bold\"\r\n                                onClick={() => setShowCancelPopup(true)}\r\n                            >\r\n                                الغاء\r\n                            </SecondaryButton>\r\n                        )}\r\n                        <div>\r\n                            {maintenanceCenter ? (\r\n                                <PrimaryButton\r\n                                    className=\"xl:px-[107px] xl:py-[18px] xl:font-bold ms-6\"\r\n                                    disabled={loading}\r\n                                >\r\n                                    {loading ? 'جاري التحميل...' : 'حفظ التغييرات'}\r\n                                </PrimaryButton>\r\n                            ) : (\r\n                                <PrimaryButton\r\n                                    className=\"xl:px-[107px] xl:py-[18px] xl:font-bold ms-6\"\r\n                                    disabled={loading}\r\n                                >\r\n                                    {loading ? 'جاري التحميل...' : 'انشاء فاتورة'}\r\n                                </PrimaryButton>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n            </Form>\r\n\r\n            <CancelPopup\r\n                open={showCancelPopup}\r\n                onClickButton1={() => {\r\n                    setShowCancelPopup(false);\r\n                }}\r\n                onClickButton2={() => {\r\n                    navigate('/maintenance/centers');\r\n                    setShowCancelPopup(false);\r\n                }}\r\n                text1={maintenanceCenter ? 'إلغاء تعديل بيانات مركز صيانة' : 'إلغاء إضافة مركز صيانة'}\r\n                text2={\r\n                    maintenanceCenter\r\n                        ? 'أنت على وشك إلغاء عملية تعديل بيانات مركز صيانة دون إكمال البيانات المطلوبة. سيتم تجاهل جميع البيانات المدخلة، هل أنت متأكد؟'\r\n                        : 'أنت على وشك إلغاء عملية إضافة مركز صيانة دون إكمال البيانات المطلوبة. سيتم تجاهل جميع البيانات المدخلة، هل أنت متأكد؟'\r\n                }\r\n                textButton1=\"إكمال الطلب\"\r\n                textButton2=\"إلغاء الطلب\"\r\n            />\r\n\r\n            <SuccessPopup\r\n                open={showSuccessPopup}\r\n                text1={maintenanceCenter ? 'تم تعديل بيانات مركز الصيانة بنحاح' : 'تم إضافة مركز صيانة جديد'}\r\n                text2={maintenanceCenter ? 'تم تعديل بيانات مركز الصيانة' : 'تم تسجيل بيانات مركز الصيانة'}\r\n                textButton1=\"العودة لقائمة مراكز الصيانة\"\r\n                textButton2={maintenanceCenter ? 'تعديل بيانات اخرى' : 'انشاء مركز صيانة اخر'}\r\n                onAddAnother={handleAddAnother}\r\n                onReturnToList={() => {\r\n                    navigate('/maintenance/centers');\r\n                    setShowSuccessPopup(false);\r\n                }}\r\n            />\r\n        </>\r\n    );\r\n}\r\n","import { SubtleButton } from '@/components/buttons/SubtleButton';\r\nimport UnderlineHeading from '@/components/heading/UnderlineHeading';\r\nimport ImportIcon from '@/components/icons/file/ImportIcon';\r\n\r\nconst Heading = () => {\r\n    return (\r\n        <div className=\"flex flex-row justify-between mb-6\">\r\n            <UnderlineHeading text=\"انشاء فاتورة\" />\r\n            <SubtleButton className=\"bg-primery-blue-50 text-base font-medium leading-[125%] text-primery-blue-500 border border-primery-blue-50\">\r\n                <ImportIcon />\r\n                استيراد ملف بيانات\r\n            </SubtleButton>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Heading;\r\n","import React from 'react';\r\nimport AddInvoiceForm from '../forms/addInvoice/AddInvoiceForm';\r\nimport Heading from '../forms/addInvoice/Heading';\r\n\r\nexport default function AddInvoicePage() {\r\n    return (\r\n        <div className=\"mt-6 w-full\">\r\n            <Heading />\r\n            <AddInvoiceForm />\r\n        </div>\r\n    );\r\n}\r\n"],"names":["InvoiceInfo","jsxs","jsx","TextInputForm","DateInputForm","SelectInputForm","InvoiceTerms","AddInvoiceForm","maintenanceCenter","error","setError","useState","loading","setLoading","showSuccessPopup","setShowSuccessPopup","showCancelPopup","setShowCancelPopup","navigate","useNavigate","defaultValues","useMemo","form","useForm","zodResolver","AddMaintenanceCenterSchema","handleAddAnother","onSubmit","data","apiPost","endpoints","field","messages","errorMessage","Fragment","Form","MainHeading","TextAreaInputForm","SecondaryButton","PrimaryButton","CancelPopup","SuccessPopup","Heading","UnderlineHeading","SubtleButton","ImportIcon","AddInvoicePage"],"mappings":"yrCAIA,SAAwBA,GAAc,CAE9B,OAAAC,EAAA,KAAC,MAAI,CAAA,UAAU,6CACX,SAAA,CAAAC,MAACC,GAAc,KAAK,OAAO,MAAM,aAAa,YAAY,kBAAkB,QAC3EA,EAAc,CAAA,KAAK,cAAc,MAAM,eAAe,YAAY,UAAU,QAC5EC,EAAc,CAAA,KAAK,GAAG,MAAM,iBAAiB,YAAY,aAAa,QACtED,EAAc,CAAA,KAAK,GAAG,MAAM,iBAAiB,YAAY,WAAW,QACpEC,EAAc,CAAA,KAAK,GAAG,MAAM,gBAAgB,YAAY,aAAa,EACtEF,EAAA,IAACG,EAAA,CACG,KAAK,WACL,MAAM,qBACN,YAAY,SACZ,QAAS,CAAC,CAAE,KAAM,SAAU,MAAO,QAAU,CAAA,CAAA,CAAA,CACjD,EACJ,CAER,CChBA,SAAwBC,GAAe,CAE/B,OAAAJ,EAAA,IAAC,MAAI,CAAA,UAAU,4CAYf,CAAA,CAER,CCKwB,SAAAK,EAAe,CAAE,kBAAAC,GAA4B,CACjE,KAAM,CAACC,EAAOC,CAAQ,EAAIC,EAAAA,SAAwB,IAAI,EAChD,CAACC,EAASC,CAAU,EAAIF,EAAAA,SAAS,EAAK,EACtC,CAACG,EAAkBC,CAAmB,EAAIJ,EAAAA,SAAS,EAAK,EACxD,CAACK,EAAiBC,CAAkB,EAAIN,EAAAA,SAAS,EAAK,EACtDO,EAAWC,EAAY,EAEvBC,EAAgBC,EAAA,QAClB,KAAO,CACH,MAAMb,GAAA,YAAAA,EAAmB,OAAQ,GACjC,UAAWA,GAAA,YAAAA,EAAmB,WAAqC,OACnE,gBAAgBA,GAAA,YAAAA,EAAmB,iBAAkB,GACrD,aAAaA,GAAA,YAAAA,EAAmB,cAAe,GAC/C,QAASA,GAAA,YAAAA,EAAmB,SAAsC,OAClE,iBAAkBA,GAAA,YAAAA,EAAmB,kBAA+C,OACpF,UAAUA,GAAA,YAAAA,EAAmB,WAAY,CAAA,CAAC,GAE9C,CAACA,CAAiB,CACtB,EAEMc,EAAOC,EAAwC,CACjD,SAAUC,EAAYC,CAA0B,EAChD,cAAAL,CAAA,CACH,EAEKM,EAAmB,IAAM,CAC3BX,EAAoB,EAAK,CAC7B,EAEMY,EAAW,MAAOC,GAAyC,SAC7Df,EAAW,EAAI,EACfH,EAAS,IAAI,EACT,GAAA,CACA,MAAMmB,EAAQ,CACV,SAAUrB,EACJsB,EAAU,gBAAgB,OAAStB,EAAkB,GACrDsB,EAAU,gBAAgB,OAChC,KAAMF,EACN,OAAQ,CAAE,QAAS,CAAE,eAAgB,qBAAwB,CAAA,CAAA,CAChE,EACDb,EAAoB,EAAI,QACnBN,EAAY,CACbA,IAAAA,GAAAA,EAAAA,EAAM,WAANA,YAAAA,EAAgB,OAAhBA,MAAAA,EAAsB,OAEf,OAAA,QAAQA,EAAM,SAAS,KAAK,MAAM,EAAE,QAAQ,CAAC,CAACsB,EAAOC,CAAQ,IAAM,CACtEV,EAAK,SAASS,EAAc,CACxB,KAAM,SACN,QAAUC,EAAsB,KAAK,IAAI,CAAA,CAC5C,CAAA,CACJ,MACE,CAEH,IAAIC,EAAe,wDACfxB,EAAM,SACSA,EAAAA,EAAM,SAAS,KAAK,KAAOwB,EACnCxB,EAAM,UACEwB,EAAA,0DAEnBvB,EAASuB,CAAY,CAAA,CACzB,QACF,CACEpB,EAAW,EAAK,CAAA,CAExB,EAEA,OAEQZ,EAAA,KAAAiC,WAAA,CAAA,SAAA,CAAChC,EAAA,IAAAiC,EAAA,CAAM,GAAGb,EACN,SAACrB,EAAA,KAAA,OAAA,CAAK,SAAUqB,EAAK,aAAaK,CAAQ,EAAG,UAAU,OACnD,SAAA,CAACzB,EAAAA,IAAAkC,EAAA,CAAY,KAAK,kBAAmB,CAAA,QACpCpC,EAAY,EAAA,EACbE,EAAAA,IAACkC,EAAY,CAAA,KAAK,eAAgB,CAAA,QACjC9B,EAAa,EAAA,EACdJ,EAAA,IAACmC,EAAA,CACG,UAAU,8BACV,KAAK,QACL,MAAM,QACN,YAAY,YAAA,CAChB,EACC5B,SACI,MAAI,CAAA,UAAU,oEACX,SAACR,EAAAA,KAAA,MAAA,CAAI,UAAU,oCACX,SAAA,CAAAC,EAAAA,IAAC,QAAM,SAAMO,CAAA,CAAA,EACbP,EAAAA,IAAC,UAAO,QAAS,IAAMQ,EAAS,IAAI,EAAG,UAAU,kCAAkC,SAEnF,GAAA,CAAA,CAAA,CAAA,CACJ,CACJ,CAAA,EAEJT,EAAAA,KAAC,MAAI,CAAA,UAAU,8CACV,SAAA,CACGO,EAAAN,EAAA,IAACoC,EAAA,CACG,KAAK,SACL,UAAU,oGACV,QAAS,IAAMrB,EAAmB,EAAI,EACzC,SAAA,aAAA,CAAA,EAIDf,EAAA,IAACoC,EAAA,CACG,KAAK,SACL,UAAU,uGACV,QAAS,IAAMrB,EAAmB,EAAI,EACzC,SAAA,OAAA,CAED,EAEJf,EAAAA,IAAC,OACI,SACGM,EAAAN,EAAA,IAACqC,EAAA,CACG,UAAU,+CACV,SAAU3B,EAET,WAAU,kBAAoB,eAAA,CAAA,EAGnCV,EAAA,IAACqC,EAAA,CACG,UAAU,+CACV,SAAU3B,EAET,WAAU,kBAAoB,cAAA,CAAA,CAG3C,CAAA,CAAA,CACJ,CAAA,CAAA,CAAA,CACJ,CACJ,CAAA,EAEAV,EAAA,IAACsC,EAAA,CACG,KAAMxB,EACN,eAAgB,IAAM,CAClBC,EAAmB,EAAK,CAC5B,EACA,eAAgB,IAAM,CAClBC,EAAS,sBAAsB,EAC/BD,EAAmB,EAAK,CAC5B,EACA,MAAOT,EAAoB,gCAAkC,yBAC7D,MACIA,EACM,+HACA,wHAEV,YAAY,cACZ,YAAY,aAAA,CAChB,EAEAN,EAAA,IAACuC,EAAA,CACG,KAAM3B,EACN,MAAON,EAAoB,qCAAuC,2BAClE,MAAOA,EAAoB,+BAAiC,+BAC5D,YAAY,8BACZ,YAAaA,EAAoB,oBAAsB,uBACvD,aAAckB,EACd,eAAgB,IAAM,CAClBR,EAAS,sBAAsB,EAC/BH,EAAoB,EAAK,CAAA,CAC7B,CAAA,CACJ,EACJ,CAER,CCtLA,MAAM2B,EAAU,IAERzC,EAAA,KAAC,MAAI,CAAA,UAAU,qCACX,SAAA,CAACC,EAAAA,IAAAyC,EAAA,CAAiB,KAAK,cAAe,CAAA,EACtC1C,EAAAA,KAAC2C,EAAa,CAAA,UAAU,8GACpB,SAAA,CAAA1C,EAAA,IAAC2C,EAAW,EAAA,EAAE,oBAAA,CAElB,CAAA,CAAA,EACJ,ECRR,SAAwBC,IAAiB,CAEjC,OAAA7C,EAAA,KAAC,MAAI,CAAA,UAAU,cACX,SAAA,CAAAC,EAAA,IAACwC,EAAQ,EAAA,QACRnC,EAAe,CAAA,CAAA,CAAA,EACpB,CAER"}