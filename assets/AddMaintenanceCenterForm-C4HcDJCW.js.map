{"version":3,"file":"AddMaintenanceCenterForm-C4HcDJCW.js","sources":["../../src/features/maintenance/forms/addMaintenanceCenter/MaintenanceCenterInfo.tsx","../../src/features/maintenance/forms/addMaintenanceCenter/ToggleServiceInput.tsx","../../src/features/maintenance/forms/addMaintenanceCenter/ServicesInfo.tsx","../../src/features/maintenance/forms/addMaintenanceCenter/AddMaintenanceCenterForm.tsx"],"sourcesContent":["import SelectInputForm from '@/components/forms/SelectInputForm';\r\nimport TextInputForm from '@/components/forms/TextInputForm';\r\n\r\nexport default function MaintenanceCenterInfo() {\r\n    return (\r\n        <div className=\"mb-6 grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n            <TextInputForm name=\"name\" label=\"اسم مركز الصيانة\" placeholder=\"ادخل اسم مركز الصيانة\" />\r\n            <SelectInputForm\r\n                name=\"status\"\r\n                label=\"حالة التعامل\"\r\n                placeholder=\"تجديد التعاقد\"\r\n                options={[{ name: 'active', value: 'active' }]}\r\n            />\r\n            <SelectInputForm\r\n                name=\"location\"\r\n                label=\"المنطقة\"\r\n                placeholder=\"الشرقية\"\r\n                options={[{ name: 'الرياض', value: 'الرياض' }]}\r\n            />\r\n            <TextInputForm name=\"description\" label=\"عنوان مركز الصيانة\" placeholder=\"ادخل عنوان مركز الصيانة\" />\r\n            <TextInputForm\r\n                label=\"رقم التواصل\"\r\n                placeholder=\"ادخل رقم التواصل\"\r\n                className=\"[&>input]:text-end [&>input]:placeholder:text-end\"\r\n                name=\"contact_number\"\r\n                type=\"tel\"\r\n            />\r\n            <SelectInputForm\r\n                name=\"contract_status\"\r\n                label=\"حالة التعاقد\"\r\n                placeholder=\"اختر حالة التعاقد\"\r\n                options={[{ name: 'active', value: 'active' }]}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n","import { useFormContext } from 'react-hook-form';\r\nimport { FormField, FormItem, FormLabel, FormControl, FormMessage } from '@/components/ui/form';\r\nimport { Switch } from '@/components/ui/switch';\r\n\r\ninterface Props {\r\n    className?: string;\r\n    name: string;\r\n    label?: string;\r\n}\r\n\r\nexport default function ToggleServiceInput({ className, name, label }: Props) {\r\n    const { control, setValue, watch } = useFormContext();\r\n    const features = watch('features') || [];\r\n\r\n    const handleSwitchChange = (checked: boolean) => {\r\n        const currentFeatures = watch('features') || [];\r\n        if (checked) {\r\n            // Add the label if it's not already in the array\r\n            setValue('features', [...currentFeatures, label]);\r\n        } else {\r\n            // Remove the label from the array\r\n            setValue(\r\n                'features',\r\n                currentFeatures.filter((feature: string) => feature !== label),\r\n            );\r\n        }\r\n    };\r\n\r\n    return (\r\n        <FormField\r\n            control={control}\r\n            name={name}\r\n            render={({ field }) => (\r\n                <FormItem className={className}>\r\n                    <FormControl>\r\n                        <Switch\r\n                            dir=\"ltr\"\r\n                            className=\"data-[state=checked]:bg-primery-blue-600\"\r\n                            checked={features.includes(label)}\r\n                            onCheckedChange={handleSwitchChange}\r\n                        />\r\n                    </FormControl>\r\n                    <FormLabel className=\"!mt-0 ms-2 text-primery-blue-900 font-medium text-[18px] leading-[33.73px] tracking-normal text-start\">\r\n                        {label}\r\n                    </FormLabel>\r\n                    <FormMessage />\r\n                </FormItem>\r\n            )}\r\n        />\r\n    );\r\n}\r\n","import ToggleServiceInput from './ToggleServiceInput';\r\n\r\nexport default function ServicesInfo() {\r\n    return (\r\n        <div className=\"mt-8 mb-8 grid grid-cols-[repeat(3,minmax(0,auto))] justify-between gap-y-4\">\r\n            <ToggleServiceInput className=\"w-full\" name=\"\" label=\"الصيانة الدورية\" />\r\n            <ToggleServiceInput className=\"w-full\" name=\"\" label=\"فحص وتشخيص الأعطال\" />\r\n            <ToggleServiceInput className=\"w-full\" name=\"\" label=\"إصلاح ناقل الحركة\" />\r\n            <ToggleServiceInput className=\"w-full\" name=\"\" label=\"إصلاح المحرك\" />\r\n            <ToggleServiceInput className=\"w-full\" name=\"\" label=\"غسيل السيارات والتلميع\" />\r\n            <ToggleServiceInput className=\"w-full\" name=\"\" label=\"تغير جنوط\" />\r\n        </div>\r\n    );\r\n}\r\n","import { Form } from '@/components/ui/form';\r\nimport { useForm } from 'react-hook-form';\r\nimport { zodResolver } from '@hookform/resolvers/zod';\r\nimport { PrimaryButton } from '@/components/buttons/PrimaryButton';\r\nimport { apiPost } from '@/lib/axios/axios-utils';\r\nimport { endpoints } from '@/lib/axios/axios-global';\r\nimport { useMemo, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { SecondaryButton } from '@/components/buttons/SecondaryButton';\r\nimport CancelPopup from '@/components/Popups/CancelPopup';\r\nimport MaintenanceCenterInfo from './MaintenanceCenterInfo';\r\nimport MainHeading from '@/components/heading/MainHeading';\r\nimport ServicesInfo from './ServicesInfo';\r\nimport {\r\n    AddMaintenanceCenterFormValues,\r\n    AddMaintenanceCenterSchema,\r\n} from '@/features/maintenance/forms/schemas/add-maintenance-center-schema';\r\nimport SuccessPopup from '@/components/Popups/SuccessPopup';\r\nimport { MaintenanceCenter } from '@/types/maintenanceCenter';\r\n\r\ninterface Props {\r\n    maintenanceCenter?: MaintenanceCenter | null;\r\n}\r\n\r\nexport default function AddMaintenanceCenterForm({ maintenanceCenter }: Props) {\r\n    const [error, setError] = useState<string | null>(null);\r\n    const [loading, setLoading] = useState(false);\r\n    const [showSuccessPopup, setShowSuccessPopup] = useState(false);\r\n    const [showCancelPopup, setShowCancelPopup] = useState(false);\r\n    const navigate = useNavigate();\r\n\r\n    const defaultValues = useMemo(\r\n        () => ({\r\n            name: maintenanceCenter?.name || '',\r\n            location: (maintenanceCenter?.location as 'الرياض' | 'الشرقية') || undefined,\r\n            contact_number: maintenanceCenter?.contact_number || '',\r\n            description: maintenanceCenter?.description || '',\r\n            status: (maintenanceCenter?.status as 'active' | 'not active') || undefined,\r\n            contract_status: (maintenanceCenter?.contract_status as 'active' | 'not active') || undefined,\r\n            features: maintenanceCenter?.features || [],\r\n        }),\r\n        [maintenanceCenter],\r\n    );\r\n\r\n    const form = useForm<AddMaintenanceCenterFormValues>({\r\n        resolver: zodResolver(AddMaintenanceCenterSchema),\r\n        defaultValues,\r\n    });\r\n\r\n    const handleAddAnother = () => {\r\n        setShowSuccessPopup(false);\r\n    };\r\n\r\n    const onSubmit = async (data: AddMaintenanceCenterFormValues) => {\r\n        setLoading(true);\r\n        setError(null); // Clear previous errors\r\n        try {\r\n            await apiPost({\r\n                endpoint: maintenanceCenter\r\n                    ? endpoints.maintenanCenter.update + maintenanceCenter.id\r\n                    : endpoints.maintenanCenter.create,\r\n                body: data,\r\n                config: { headers: { 'Content-Type': 'multipart/form-data' } },\r\n            });\r\n            setShowSuccessPopup(true);\r\n        } catch (error: any) {\r\n            if (error.response?.data?.errors) {\r\n                // Handle field-specific errors\r\n                Object.entries(error.response.data.errors).forEach(([field, messages]) => {\r\n                    form.setError(field as any, {\r\n                        type: 'manual',\r\n                        message: (messages as string[]).join(', '),\r\n                    });\r\n                });\r\n            } else {\r\n                // Handle generic error\r\n                let errorMessage = 'حدث خطأ أثناء إرسال البيانات. يرجى المحاولة مرة أخرى.';\r\n                if (error.response) {\r\n                    errorMessage = error.response.data.msg || errorMessage;\r\n                } else if (error.request) {\r\n                    errorMessage = 'تعذر الاتصال بالخادم. يرجى التحقق من اتصالك بالإنترنت.';\r\n                }\r\n                setError(errorMessage);\r\n            }\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Form {...form}>\r\n                <form onSubmit={form.handleSubmit(onSubmit)} className=\"mb-8\">\r\n                    <MaintenanceCenterInfo />\r\n                    <MainHeading text=\"الخدمات\" />\r\n                    <ServicesInfo />\r\n                    {error && (\r\n                        <div className=\"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg\">\r\n                            <div className=\"flex justify-between items-center\">\r\n                                <span>{error}</span>\r\n                                <button onClick={() => setError(null)} className=\"text-red-700 hover:text-red-900\">\r\n                                    ×\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                    <div className=\"flex flex-row justify-between items-center mt-8\">\r\n                        {maintenanceCenter ? (\r\n                            <SecondaryButton\r\n                                type=\"button\"\r\n                                className=\"xl:px-[101px] xl:py-[18px] text-[#A21515] border border-red-error-50 xl:font-bold bg-red-error-50\"\r\n                                onClick={() => setShowCancelPopup(true)}\r\n                            >\r\n                                إلغاء الطلب\r\n                            </SecondaryButton>\r\n                        ) : (\r\n                            <SecondaryButton\r\n                                type=\"button\"\r\n                                className=\"xl:px-[64.5px] xl:py-[18px] border border-r-red-error-50 bg-red-error-50 text-[#A21515] xl:font-bold\"\r\n                                onClick={() => setShowCancelPopup(true)}\r\n                            >\r\n                                الغاء\r\n                            </SecondaryButton>\r\n                        )}\r\n                        <div>\r\n                            {maintenanceCenter ? (\r\n                                <PrimaryButton\r\n                                    className=\"xl:px-[107px] xl:py-[18px] xl:font-bold ms-6\"\r\n                                    disabled={loading}\r\n                                >\r\n                                    {loading ? 'جاري التحميل...' : 'حفظ التغييرات'}\r\n                                </PrimaryButton>\r\n                            ) : (\r\n                                <PrimaryButton\r\n                                    className=\"xl:px-[107px] xl:py-[18px] xl:font-bold ms-6\"\r\n                                    disabled={loading}\r\n                                >\r\n                                    {loading ? 'جاري التحميل...' : 'اضافة'}\r\n                                </PrimaryButton>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n            </Form>\r\n\r\n            <CancelPopup\r\n                open={showCancelPopup}\r\n                onClickButton1={() => {\r\n                    setShowCancelPopup(false);\r\n                }}\r\n                onClickButton2={() => {\r\n                    navigate('/maintenance/centers');\r\n                    setShowCancelPopup(false);\r\n                }}\r\n                text1={maintenanceCenter ? 'إلغاء تعديل بيانات مركز صيانة' : 'إلغاء إضافة مركز صيانة'}\r\n                text2={\r\n                    maintenanceCenter\r\n                        ? 'أنت على وشك إلغاء عملية تعديل بيانات مركز صيانة دون إكمال البيانات المطلوبة. سيتم تجاهل جميع البيانات المدخلة، هل أنت متأكد؟'\r\n                        : 'أنت على وشك إلغاء عملية إضافة مركز صيانة دون إكمال البيانات المطلوبة. سيتم تجاهل جميع البيانات المدخلة، هل أنت متأكد؟'\r\n                }\r\n                textButton1=\"إكمال الطلب\"\r\n                textButton2=\"إلغاء الطلب\"\r\n            />\r\n\r\n            <SuccessPopup\r\n                open={showSuccessPopup}\r\n                text1={maintenanceCenter ? 'تم تعديل بيانات مركز الصيانة بنحاح' : 'تم إضافة مركز صيانة جديد'}\r\n                text2={maintenanceCenter ? 'تم تعديل بيانات مركز الصيانة' : 'تم تسجيل بيانات مركز الصيانة'}\r\n                textButton1=\"العودة لقائمة مراكز الصيانة\"\r\n                textButton2={maintenanceCenter ? 'تعديل بيانات اخرى' : 'انشاء مركز صيانة اخر'}\r\n                onAddAnother={handleAddAnother}\r\n                onReturnToList={() => {\r\n                    navigate('/maintenance/centers');\r\n                    setShowSuccessPopup(false);\r\n                }}\r\n            />\r\n        </>\r\n    );\r\n}\r\n"],"names":["MaintenanceCenterInfo","jsxs","jsx","TextInputForm","SelectInputForm","ToggleServiceInput","className","name","label","control","setValue","watch","useFormContext","features","handleSwitchChange","checked","currentFeatures","feature","FormField","field","FormItem","FormControl","Switch","FormLabel","FormMessage","ServicesInfo","AddMaintenanceCenterForm","maintenanceCenter","error","setError","useState","loading","setLoading","showSuccessPopup","setShowSuccessPopup","showCancelPopup","setShowCancelPopup","navigate","useNavigate","defaultValues","useMemo","form","useForm","zodResolver","AddMaintenanceCenterSchema","handleAddAnother","onSubmit","data","apiPost","endpoints","messages","errorMessage","Fragment","Form","MainHeading","SecondaryButton","PrimaryButton","CancelPopup","SuccessPopup"],"mappings":"moBAGA,SAAwBA,GAAwB,CAExC,OAAAC,EAAA,KAAC,MAAI,CAAA,UAAU,6CACX,SAAA,CAAAC,MAACC,GAAc,KAAK,OAAO,MAAM,mBAAmB,YAAY,wBAAwB,EACxFD,EAAA,IAACE,EAAA,CACG,KAAK,SACL,MAAM,eACN,YAAY,gBACZ,QAAS,CAAC,CAAE,KAAM,SAAU,MAAO,QAAU,CAAA,CAAA,CACjD,EACAF,EAAA,IAACE,EAAA,CACG,KAAK,WACL,MAAM,UACN,YAAY,UACZ,QAAS,CAAC,CAAE,KAAM,SAAU,MAAO,QAAU,CAAA,CAAA,CACjD,QACCD,EAAc,CAAA,KAAK,cAAc,MAAM,qBAAqB,YAAY,0BAA0B,EACnGD,EAAA,IAACC,EAAA,CACG,MAAM,cACN,YAAY,mBACZ,UAAU,oDACV,KAAK,iBACL,KAAK,KAAA,CACT,EACAD,EAAA,IAACE,EAAA,CACG,KAAK,kBACL,MAAM,eACN,YAAY,oBACZ,QAAS,CAAC,CAAE,KAAM,SAAU,MAAO,QAAU,CAAA,CAAA,CAAA,CACjD,EACJ,CAER,CCzBA,SAAwBC,EAAmB,CAAE,UAAAC,EAAW,KAAAC,EAAM,MAAAC,GAAgB,CAC1E,KAAM,CAAE,QAAAC,EAAS,SAAAC,EAAU,MAAAC,CAAA,EAAUC,EAAe,EAC9CC,EAAWF,EAAM,UAAU,GAAK,CAAC,EAEjCG,EAAsBC,GAAqB,CAC7C,MAAMC,EAAkBL,EAAM,UAAU,GAAK,CAAC,EAC1CI,EAEAL,EAAS,WAAY,CAAC,GAAGM,EAAiBR,CAAK,CAAC,EAGhDE,EACI,WACAM,EAAgB,OAAQC,GAAoBA,IAAYT,CAAK,CACjE,CAER,EAGI,OAAAN,EAAA,IAACgB,EAAA,CACG,QAAAT,EACA,KAAAF,EACA,OAAQ,CAAC,CAAE,MAAAY,CACP,IAAAlB,EAAA,KAACmB,GAAS,UAAAd,EACN,SAAA,CAAAJ,MAACmB,EACG,CAAA,SAAAnB,EAAA,IAACoB,EAAA,CACG,IAAI,MACJ,UAAU,2CACV,QAAST,EAAS,SAASL,CAAK,EAChC,gBAAiBM,CAAA,CAAA,EAEzB,EACCZ,EAAA,IAAAqB,EAAA,CAAU,UAAU,wGAChB,SACLf,EAAA,QACCgB,EAAY,CAAA,CAAA,CAAA,CACjB,CAAA,CAAA,CAER,CAER,CChDA,SAAwBC,GAAe,CAE/B,OAAAxB,EAAA,KAAC,MAAI,CAAA,UAAU,8EACX,SAAA,CAAAC,MAACG,GAAmB,UAAU,SAAS,KAAK,GAAG,MAAM,kBAAkB,QACtEA,EAAmB,CAAA,UAAU,SAAS,KAAK,GAAG,MAAM,qBAAqB,QACzEA,EAAmB,CAAA,UAAU,SAAS,KAAK,GAAG,MAAM,oBAAoB,QACxEA,EAAmB,CAAA,UAAU,SAAS,KAAK,GAAG,MAAM,eAAe,QACnEA,EAAmB,CAAA,UAAU,SAAS,KAAK,GAAG,MAAM,yBAAyB,QAC7EA,EAAmB,CAAA,UAAU,SAAS,KAAK,GAAG,MAAM,WAAY,CAAA,CAAA,EACrE,CAER,CCWwB,SAAAqB,GAAyB,CAAE,kBAAAC,GAA4B,CAC3E,KAAM,CAACC,EAAOC,CAAQ,EAAIC,EAAAA,SAAwB,IAAI,EAChD,CAACC,EAASC,CAAU,EAAIF,EAAAA,SAAS,EAAK,EACtC,CAACG,EAAkBC,CAAmB,EAAIJ,EAAAA,SAAS,EAAK,EACxD,CAACK,EAAiBC,CAAkB,EAAIN,EAAAA,SAAS,EAAK,EACtDO,EAAWC,EAAY,EAEvBC,EAAgBC,EAAA,QAClB,KAAO,CACH,MAAMb,GAAA,YAAAA,EAAmB,OAAQ,GACjC,UAAWA,GAAA,YAAAA,EAAmB,WAAqC,OACnE,gBAAgBA,GAAA,YAAAA,EAAmB,iBAAkB,GACrD,aAAaA,GAAA,YAAAA,EAAmB,cAAe,GAC/C,QAASA,GAAA,YAAAA,EAAmB,SAAsC,OAClE,iBAAkBA,GAAA,YAAAA,EAAmB,kBAA+C,OACpF,UAAUA,GAAA,YAAAA,EAAmB,WAAY,CAAA,CAAC,GAE9C,CAACA,CAAiB,CACtB,EAEMc,EAAOC,EAAwC,CACjD,SAAUC,EAAYC,CAA0B,EAChD,cAAAL,CAAA,CACH,EAEKM,EAAmB,IAAM,CAC3BX,EAAoB,EAAK,CAC7B,EAEMY,EAAW,MAAOC,GAAyC,SAC7Df,EAAW,EAAI,EACfH,EAAS,IAAI,EACT,GAAA,CACA,MAAMmB,EAAQ,CACV,SAAUrB,EACJsB,EAAU,gBAAgB,OAAStB,EAAkB,GACrDsB,EAAU,gBAAgB,OAChC,KAAMF,EACN,OAAQ,CAAE,QAAS,CAAE,eAAgB,qBAAwB,CAAA,CAAA,CAChE,EACDb,EAAoB,EAAI,QACnBN,EAAY,CACbA,IAAAA,GAAAA,EAAAA,EAAM,WAANA,YAAAA,EAAgB,OAAhBA,MAAAA,EAAsB,OAEf,OAAA,QAAQA,EAAM,SAAS,KAAK,MAAM,EAAE,QAAQ,CAAC,CAACT,EAAO+B,CAAQ,IAAM,CACtET,EAAK,SAAStB,EAAc,CACxB,KAAM,SACN,QAAU+B,EAAsB,KAAK,IAAI,CAAA,CAC5C,CAAA,CACJ,MACE,CAEH,IAAIC,EAAe,wDACfvB,EAAM,SACSA,EAAAA,EAAM,SAAS,KAAK,KAAOuB,EACnCvB,EAAM,UACEuB,EAAA,0DAEnBtB,EAASsB,CAAY,CAAA,CACzB,QACF,CACEnB,EAAW,EAAK,CAAA,CAExB,EAEA,OAEQ/B,EAAA,KAAAmD,WAAA,CAAA,SAAA,CAAClD,EAAA,IAAAmD,EAAA,CAAM,GAAGZ,EACN,SAACxC,EAAA,KAAA,OAAA,CAAK,SAAUwC,EAAK,aAAaK,CAAQ,EAAG,UAAU,OACnD,SAAA,CAAA5C,EAAA,IAACF,EAAsB,EAAA,EACvBE,EAAAA,IAACoD,EAAY,CAAA,KAAK,SAAU,CAAA,QAC3B7B,EAAa,EAAA,EACbG,SACI,MAAI,CAAA,UAAU,oEACX,SAAC3B,EAAAA,KAAA,MAAA,CAAI,UAAU,oCACX,SAAA,CAAAC,EAAAA,IAAC,QAAM,SAAM0B,CAAA,CAAA,EACb1B,EAAAA,IAAC,UAAO,QAAS,IAAM2B,EAAS,IAAI,EAAG,UAAU,kCAAkC,SAEnF,GAAA,CAAA,CAAA,CAAA,CACJ,CACJ,CAAA,EAEJ5B,EAAAA,KAAC,MAAI,CAAA,UAAU,kDACV,SAAA,CACG0B,EAAAzB,EAAA,IAACqD,EAAA,CACG,KAAK,SACL,UAAU,oGACV,QAAS,IAAMnB,EAAmB,EAAI,EACzC,SAAA,aAAA,CAAA,EAIDlC,EAAA,IAACqD,EAAA,CACG,KAAK,SACL,UAAU,uGACV,QAAS,IAAMnB,EAAmB,EAAI,EACzC,SAAA,OAAA,CAED,EAEJlC,EAAAA,IAAC,OACI,SACGyB,EAAAzB,EAAA,IAACsD,EAAA,CACG,UAAU,+CACV,SAAUzB,EAET,WAAU,kBAAoB,eAAA,CAAA,EAGnC7B,EAAA,IAACsD,EAAA,CACG,UAAU,+CACV,SAAUzB,EAET,WAAU,kBAAoB,OAAA,CAAA,CAG3C,CAAA,CAAA,CACJ,CAAA,CAAA,CAAA,CACJ,CACJ,CAAA,EAEA7B,EAAA,IAACuD,EAAA,CACG,KAAMtB,EACN,eAAgB,IAAM,CAClBC,EAAmB,EAAK,CAC5B,EACA,eAAgB,IAAM,CAClBC,EAAS,sBAAsB,EAC/BD,EAAmB,EAAK,CAC5B,EACA,MAAOT,EAAoB,gCAAkC,yBAC7D,MACIA,EACM,+HACA,wHAEV,YAAY,cACZ,YAAY,aAAA,CAChB,EAEAzB,EAAA,IAACwD,EAAA,CACG,KAAMzB,EACN,MAAON,EAAoB,qCAAuC,2BAClE,MAAOA,EAAoB,+BAAiC,+BAC5D,YAAY,8BACZ,YAAaA,EAAoB,oBAAsB,uBACvD,aAAckB,EACd,eAAgB,IAAM,CAClBR,EAAS,sBAAsB,EAC/BH,EAAoB,EAAK,CAAA,CAC7B,CAAA,CACJ,EACJ,CAER"}