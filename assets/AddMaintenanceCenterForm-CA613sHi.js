import{j as s,r as p,d as P,e as y}from"./index-BYyXun5x.js";import{f as B,a as M,b as I,d as _,c as E,e as T,u as L,t as R,F as V}from"./index-C2_QJ2lf.js";import{P as N}from"./PrimaryButton-CZnRZgcz.js";import{a as q}from"./axios-utils-AvuZ81CO.js";import{S as v}from"./SecondaryButton-DL_Bkgwn.js";import{C as H}from"./CancelPopup-DUQLiKLA.js";import{S as j}from"./SelectInputForm-CG_Opxs4.js";import{T as g}from"./TextInputForm-DXNY8AYK.js";import{M as O}from"./MainHeading-DYhLcFx9.js";import{S as z}from"./switch-K1kCIRsm.js";import{A as D}from"./add-maintenance-center-schema-BRp-CXGW.js";import{S as G}from"./SuccessPopup-D1XZ3Spp.js";function J(){return s.jsxs("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsx(g,{name:"name",label:"اسم مركز الصيانة",placeholder:"ادخل اسم مركز الصيانة"}),s.jsx(j,{name:"status",label:"حالة التعامل",placeholder:"تجديد التعاقد",options:[{name:"active",value:"active"}]}),s.jsx(j,{name:"location",label:"المنطقة",placeholder:"الشرقية",options:[{name:"الرياض",value:"الرياض"}]}),s.jsx(g,{name:"description",label:"عنوان مركز الصيانة",placeholder:"ادخل عنوان مركز الصيانة"}),s.jsx(g,{label:"رقم التواصل",placeholder:"ادخل رقم التواصل",className:"[&>input]:text-end [&>input]:placeholder:text-end",name:"contact_number",type:"tel"}),s.jsx(j,{name:"contract_status",label:"حالة التعاقد",placeholder:"اختر حالة التعاقد",options:[{name:"active",value:"active"}]})]})}function a({className:o,name:i,label:e}){const{control:l,setValue:d,watch:m}=B(),u=m("features")||[],f=t=>{const x=m("features")||[];t?d("features",[...x,e]):d("features",x.filter(b=>b!==e))};return s.jsx(M,{control:l,name:i,render:({field:t})=>s.jsxs(I,{className:o,children:[s.jsx(_,{children:s.jsx(z,{dir:"ltr",className:"data-[state=checked]:bg-primery-blue-600",checked:u.includes(e),onCheckedChange:f})}),s.jsx(E,{className:"!mt-0 ms-2 text-primery-blue-900 font-medium text-[18px] leading-[33.73px] tracking-normal text-start",children:e}),s.jsx(T,{})]})})}function K(){return s.jsxs("div",{className:"mt-8 mb-8 grid grid-cols-[repeat(3,minmax(0,auto))] justify-between gap-y-4",children:[s.jsx(a,{className:"w-full",name:"",label:"الصيانة الدورية"}),s.jsx(a,{className:"w-full",name:"",label:"فحص وتشخيص الأعطال"}),s.jsx(a,{className:"w-full",name:"",label:"إصلاح ناقل الحركة"}),s.jsx(a,{className:"w-full",name:"",label:"إصلاح المحرك"}),s.jsx(a,{className:"w-full",name:"",label:"غسيل السيارات والتلميع"}),s.jsx(a,{className:"w-full",name:"",label:"تغير جنوط"})]})}function ls({maintenanceCenter:o}){const[i,e]=p.useState(null),[l,d]=p.useState(!1),[m,u]=p.useState(!1),[f,t]=p.useState(!1),x=P(),b=p.useMemo(()=>({name:(o==null?void 0:o.name)||"",location:(o==null?void 0:o.location)||void 0,contact_number:(o==null?void 0:o.contact_number)||"",description:(o==null?void 0:o.description)||"",status:(o==null?void 0:o.status)||void 0,contract_status:(o==null?void 0:o.contract_status)||void 0,features:(o==null?void 0:o.features)||[]}),[o]),h=L({resolver:R(D),defaultValues:b}),w=()=>{u(!1)},F=async A=>{var n,S;d(!0),e(null);try{await q({endpoint:o?y.maintenanCenter.update+o.id:y.maintenanCenter.create,body:A,config:{headers:{"Content-Type":"multipart/form-data"}}}),u(!0)}catch(c){if((S=(n=c.response)==null?void 0:n.data)!=null&&S.errors)Object.entries(c.response.data.errors).forEach(([r,k])=>{h.setError(r,{type:"manual",message:k.join(", ")})});else{let r="حدث خطأ أثناء إرسال البيانات. يرجى المحاولة مرة أخرى.";c.response?r=c.response.data.msg||r:c.request&&(r="تعذر الاتصال بالخادم. يرجى التحقق من اتصالك بالإنترنت."),e(r)}}finally{d(!1)}};return s.jsxs(s.Fragment,{children:[s.jsx(V,{...h,children:s.jsxs("form",{onSubmit:h.handleSubmit(F),className:"mb-8",children:[s.jsx(J,{}),s.jsx(O,{text:"الخدمات"}),s.jsx(K,{}),i&&s.jsx("div",{className:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{children:i}),s.jsx("button",{onClick:()=>e(null),className:"text-red-700 hover:text-red-900",children:"×"})]})}),s.jsxs("div",{className:"flex flex-row justify-between items-center mt-8",children:[o?s.jsx(v,{type:"button",className:"xl:px-[101px] xl:py-[18px] text-[#A21515] border border-red-error-50 xl:font-bold bg-red-error-50",onClick:()=>t(!0),children:"إلغاء الطلب"}):s.jsx(v,{type:"button",className:"xl:px-[64.5px] xl:py-[18px] border border-r-red-error-50 bg-red-error-50 text-[#A21515] xl:font-bold",onClick:()=>t(!0),children:"الغاء"}),s.jsx("div",{children:o?s.jsx(N,{className:"xl:px-[107px] xl:py-[18px] xl:font-bold ms-6",disabled:l,children:l?"جاري التحميل...":"حفظ التغييرات"}):s.jsx(N,{className:"xl:px-[107px] xl:py-[18px] xl:font-bold ms-6",disabled:l,children:l?"جاري التحميل...":"اضافة"})})]})]})}),s.jsx(H,{open:f,onClickButton1:()=>{t(!1)},onClickButton2:()=>{x("/maintenance/centers"),t(!1)},text1:o?"إلغاء تعديل بيانات مركز صيانة":"إلغاء إضافة مركز صيانة",text2:o?"أنت على وشك إلغاء عملية تعديل بيانات مركز صيانة دون إكمال البيانات المطلوبة. سيتم تجاهل جميع البيانات المدخلة، هل أنت متأكد؟":"أنت على وشك إلغاء عملية إضافة مركز صيانة دون إكمال البيانات المطلوبة. سيتم تجاهل جميع البيانات المدخلة، هل أنت متأكد؟",textButton1:"إكمال الطلب",textButton2:"إلغاء الطلب"}),s.jsx(G,{open:m,text1:o?"تم تعديل بيانات مركز الصيانة بنحاح":"تم إضافة مركز صيانة جديد",text2:o?"تم تعديل بيانات مركز الصيانة":"تم تسجيل بيانات مركز الصيانة",textButton1:"العودة لقائمة مراكز الصيانة",textButton2:o?"تعديل بيانات اخرى":"انشاء مركز صيانة اخر",onAddAnother:w,onReturnToList:()=>{x("/maintenance/centers"),u(!1)}})]})}export{ls as A};
//# sourceMappingURL=AddMaintenanceCenterForm-CA613sHi.js.map
