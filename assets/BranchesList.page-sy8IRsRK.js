import{j as e,I as g,S as b,L as f,d as j,r as o,e as p,t as y}from"./index-BYyXun5x.js";import{b as h}from"./axios-utils-AvuZ81CO.js";import{U as v}from"./UnderlineHeading-ByjNC2ge.js";import{P as N}from"./PrimaryButton-CZnRZgcz.js";import{A as w}from"./AddIcon-B_YFP14b.js";import{A as C}from"./ArrowBackIcon-DM4diopZ.js";import{C as k}from"./Dropdown-DI0KLpyc.js";import{C as S}from"./CloseIcon-DUkjG1gO.js";import{T as E}from"./TrashIcon-YH55CqcU.js";import{E as D}from"./EditIcon-CtwPxlIY.js";import{D as I}from"./DeletePopup-DO3aEhKp.js";import{D as _}from"./data-table-G-GPousO.js";import{S as P}from"./StatisticsCards-B_8i9ipX.js";import{S as A}from"./ShopIcon-n3tXf-Yi.js";import{C as T}from"./CalendarIcon-BQwuaLHi.js";import{S as u}from"./SettingIcon-Cac9EoGa.js";import"./Combination-cklTRtAe.js";import"./index-CV4wEvKw.js";import"./index-Gk0NKYh3.js";import"./index-CLYNl1a9.js";import"./index-DEdjAgo6.js";import"./chevron-right-CymCusjh.js";import"./SecondaryButton-DL_Bkgwn.js";import"./dialog-CC_6CGm6.js";import"./table-Dfhf1Bk7.js";import"./CustomPagination-BD2pf3AX.js";import"./pagination-DR230PoL.js";import"./chevron-left-DVnc3BG0.js";function L({globalFilter:t,setGlobalFilter:n,filters:a,setFilters:s}){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col p-2 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx(v,{text:"قائمة الفروع"}),e.jsxs("div",{className:"flex flex-row items-center gap-4",children:[e.jsxs("div",{className:"flex flex-row items-center w-[287px] border border-white-blue-300 bg-white-blue-50 h-[36px] p-2 rounded-[6px]",children:[e.jsx(g,{placeholder:"ابحث باسم الفرع",value:t,onChange:r=>n(r.target.value),className:"text-white-blue-800 p-0 tracking-normal text-xs lg:text-sm lg:leading-[16.8px] border-none outline-none focus-visible:ring-0 placeholder:text-white-blue-800"}),e.jsx("button",{className:"bg-transparent border-none",children:e.jsx(b,{className:"text-white-blue-800"})})]}),e.jsxs("div",{className:"flex fle-row items-center gap-4",children:[e.jsx(k,{value:(a==null?void 0:a.status)||"",onValueChange:r=>{s({...a,status:r})},placeholder:"الحالة",width:"min-w-[77px]",options:[{label:"متاح",value:"active"},{label:"غير متاح",value:"not active"}]}),e.jsxs("button",{onClick:()=>s({}),className:"flex flex-row items-center gap-2 h-[22px] p-0 bg-white-blue-50 hover:bg-white-blue-200 border-none shadow-none text-primery-blue-500 font-medium text-xs leading-[22.49px] tracking-normal",children:[e.jsx(S,{className:"!w-[10px] !h-[10px]"}),"إلغاء التصفية"]})]}),e.jsx("div",{children:e.jsx(f,{to:"/branches/add",children:e.jsxs(N,{className:"text-base px-[14px] xl:py-2 leading-5 font-semibold font-cairo tracking-normal",children:[e.jsx(w,{}),e.jsx("p",{className:"text-xs tracking-normal font-normal leading-[22.49px]",children:"إضافة فرع"})]})})}),e.jsxs("div",{className:"flex items-center justify-center gap-2 px-[14px] py-2 bg-primery-blue-50 border border-primery-blue-50 shadow-[0px_1px_2px_0px_#1018280D] rounded-lg ",children:[e.jsx(C,{className:"text-primery-blue-700"}),e.jsx("p",{className:"text-xs text-primery-blue-500 tracking-normal font-normal leading-[22.49px]",children:"تصدير"})]})]})]})})}const B=({row:t})=>{const n=j(),[a,s]=o.useState(!1),r=()=>{s(!0)},x=()=>{s(!1)},m=()=>{var l,c;y.error("تم حذف الفرع بنجاح"),s(!1),(c=(l=t.original).refreshTable)==null||c.call(l)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-7",children:[e.jsx("button",{onClick:()=>n(`/branches/${t.original.id}/edit`),className:"text-primary hover:text-primary/80",children:e.jsx(D,{className:"text-primery-blue-400"})}),e.jsx("button",{onClick:r,children:e.jsx(E,{className:"text-[#E81E1E] cursor-pointer"})})]}),a&&e.jsx(I,{open:a,text:"هل أنت متاكد أنك تريد حذف هذا الفرع",endpoint:p.branch.delete+t.original.id,handleCancel:x,handleSuccess:m})]})},K=[{accessorKey:"name",header:()=>e.jsx("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:"اسم الفرع"}),cell:({row:t})=>e.jsx("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:t.original.name})},{accessorKey:"status",header:()=>e.jsx("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:"المنطقة"}),cell:({row:t})=>e.jsx("div",{className:"text-sm text-[#625E74] font-normal tracking-normal leading-[26.4px]",children:t.original.area})},{accessorKey:"date",header:()=>e.jsx("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:"المدينة"}),cell:({row:t})=>e.jsx("div",{className:"text-sm text-[#625E74] font-normal tracking-normal leading-[26.4px]",children:t.original.city})},{accessorKey:"service",header:()=>e.jsx("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:"العنوان"}),cell:({row:t})=>e.jsx("div",{className:"text-sm text-[#625E74] font-normal tracking-normal leading-[26.4px]",children:t.original.address})},{accessorKey:"location",header:()=>e.jsx("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:"رقم التواصل"}),cell:({row:t})=>e.jsx("div",{className:"text-sm text-[#625E74] font-normal tracking-normal leading-[26.4px]",children:"05xxxxxxxx"})},{id:"actions",cell:({row:t})=>e.jsx(B,{row:t})}],F=()=>{const[t,n]=o.useState([]),[a,s]=o.useState(0),[r,x]=o.useState(0),[m,l]=o.useState(!1),c=o.useCallback(async d=>{l(!0);try{const i=await h({endpoint:p.branch.list,queryParams:{page:d.pageIndex+1,...d.filters,search:d.globalFilter}});n(i.data.data.data),s(Math.ceil(i.data.data.pagination.total/10)),x(i.data.data.pagination.total)}catch(i){console.error("Error fetching data:",i)}finally{l(!1)}},[]);return e.jsx("div",{className:"mb-10 mt-4 rounded-lg border border-[#E8E7EA] shadow-[0px_4px_4px_-1px_#0C0C0D0D,0px_4px_4px_-1px_#0C0C0D1A]",children:e.jsx(_,{columns:K,data:t,pageCount:a,totalCount:r,onFetchData:c,DataTableToolbar:L,isLoading:m})})};function U(){const[t,n]=o.useState(null);o.useEffect(()=>{(async()=>{try{const r=await h({endpoint:p.branch.dashboard});n(r.data.data)}catch{n(null)}})()},[]);const a=[{text:"عدد الفروع",icon:e.jsx(A,{}),num:t==null?void 0:t.total,percent:0},{text:"عدد المناطق",icon:e.jsx(T,{}),num:t==null?void 0:t.areas,percent:-.3},{text:"فروع موقوفه مؤقتا",icon:e.jsx(u,{}),num:t==null?void 0:t.inactive,percent:.3,negative:!0},{text:"فروع مشغله",icon:e.jsx(u,{}),num:t==null?void 0:t.active,percent:.3}];return e.jsx(P,{cards:a})}const pe=()=>e.jsxs("div",{className:"mt-6 w-full",children:[e.jsx(U,{}),e.jsx("div",{className:"mt-6",children:e.jsx(F,{})})]});export{pe as default};
//# sourceMappingURL=BranchesList.page-sy8IRsRK.js.map
