{"version":3,"file":"CarsPieStatistics-DFduUjKO.js","sources":["../../src/features/car/components/statistics/CarsPieStatistics.tsx"],"sourcesContent":["import { PieChartComponent } from '@/components/charts/PieChart';\r\nimport UnderlineHeading from '@/components/heading/UnderlineHeading';\r\nimport List from './List';\r\nimport { CustomSelect } from '@/components/dropDown/Dropdown';\r\nimport { useEffect, useState } from 'react';\r\nimport { ChartConfig } from '@/components/ui/chart';\r\nimport { apiGet } from '@/lib/axios/axios-utils';\r\nimport { endpoints } from '@/lib/axios/axios-global';\r\nimport { VehicleDashboardChart } from '@/features/maintenance/types/vehicleDashboardChart.types';\r\n\r\nconst CarsStatistics = () => {\r\n    const [stats, setStats] = useState<VehicleDashboardChart | null>(null);\r\n    const [selectedValue, setSelectedValue] = useState('');\r\n\r\n    useEffect(() => {\r\n        const fetchStats = async () => {\r\n            try {\r\n                const res = await apiGet({\r\n                    endpoint: endpoints.maintenance.dashboardVehicleChart,\r\n                    queryParams: { period: selectedValue },\r\n                });\r\n                setStats(res.data.data.vehicle_counts);\r\n            } catch (err) {\r\n                setStats(null);\r\n            }\r\n        };\r\n        fetchStats();\r\n    }, [selectedValue]);\r\n\r\n    let chartData: any[] = [];\r\n    let data: string[] = ['سيارات مؤجرة', 'سيارات متاحة', 'سيارات معطلة', 'سيارات في الصيانة', 'ترخيص منتهي'];\r\n\r\n    if (stats) {\r\n        chartData = Object.entries(stats).map(([key, value]) => {\r\n            if (key !== 'rented') {\r\n                return {\r\n                    days: key,\r\n                    visitors: value,\r\n                    fill: `var(--color-${key})`,\r\n                };\r\n            }\r\n        });\r\n\r\n        data = [\r\n            `${stats.leased} سيارات مؤجرة`,\r\n            `${stats.available} سيارات متاحة`,\r\n            `${stats.broken} سيارات معطلة`,\r\n            `${stats.maintenance} سيارات في الصيانة`,\r\n            `${stats.maintenance_completed} سيارات تمت الصيانة`,\r\n        ];\r\n    }\r\n\r\n    const chartConfig = {\r\n        visitors: {\r\n            label: 'Visitors',\r\n        },\r\n        available: {\r\n            label: 'سيارات متاحة',\r\n            color: 'hsl(var(--chart-1))',\r\n        },\r\n        // rented: {\r\n        //     label: 'سيارات متاحة',\r\n        //     color: 'hsl(var(--chart-2))',\r\n        // },\r\n        leased: {\r\n            label: 'سيارات مؤجرة',\r\n            color: 'hsl(var(--chart-2))',\r\n        },\r\n        maintenance: {\r\n            label: 'سيارات في الصيانة',\r\n            color: 'hsl(var(--chart-4))',\r\n        },\r\n        maintenance_completed: {\r\n            label: 'سيارات تمت الصيانة',\r\n            color: 'hsl(var(--chart-3))',\r\n        },\r\n        broken: {\r\n            label: 'سيارات معطلة',\r\n            color: 'hsl(var(--chart-5))',\r\n        },\r\n    } satisfies ChartConfig;\r\n\r\n    return (\r\n        <div className=\"flex flex-col justify-between p-4 shadow-[0px_2px_12px_0px_#14142B14] rounded-[0.5rem]\">\r\n            <div className=\"flex flex-row justify-between mb-4\">\r\n                <UnderlineHeading text=\"حالات السيارات\" />\r\n                <CustomSelect\r\n                    options={[\r\n                        { label: 'يومي', value: 'يومي' },\r\n                        { label: 'أسبوعي ', value: 'أسبوعي ' },\r\n                        { label: 'شهري', value: 'شهري' },\r\n                        { label: 'سنوي', value: 'سنوي' },\r\n                    ]}\r\n                    value={selectedValue}\r\n                    onValueChange={setSelectedValue}\r\n                    placeholder=\"القائمة\"\r\n                    width=\"min-w-[101px]\"\r\n                />\r\n            </div>\r\n            <div className=\"flex flex-row items-center justify-between mb-8\">\r\n                <List text={data} />\r\n                <PieChartComponent chartData={chartData} chartConfig={chartConfig} />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CarsStatistics;\r\n"],"names":["CarsStatistics","stats","setStats","useState","selectedValue","setSelectedValue","useEffect","res","apiGet","endpoints","chartData","data","key","value","chartConfig","jsxs","jsx","UnderlineHeading","CustomSelect","List","PieChartComponent"],"mappings":"+QAUA,MAAMA,EAAiB,IAAM,CACzB,KAAM,CAACC,EAAOC,CAAQ,EAAIC,EAAAA,SAAuC,IAAI,EAC/D,CAACC,EAAeC,CAAgB,EAAIF,EAAAA,SAAS,EAAE,EAErDG,EAAAA,UAAU,IAAM,EACO,SAAY,CACvB,GAAA,CACM,MAAAC,EAAM,MAAMC,EAAO,CACrB,SAAUC,EAAU,YAAY,sBAChC,YAAa,CAAE,OAAQL,CAAc,CAAA,CACxC,EACQF,EAAAK,EAAI,KAAK,KAAK,cAAc,OAC3B,CACVL,EAAS,IAAI,CAAA,CAErB,GACW,CAAA,EACZ,CAACE,CAAa,CAAC,EAElB,IAAIM,EAAmB,CAAC,EACpBC,EAAiB,CAAC,eAAgB,eAAgB,eAAgB,oBAAqB,aAAa,EAEpGV,IACYS,EAAA,OAAO,QAAQT,CAAK,EAAE,IAAI,CAAC,CAACW,EAAKC,CAAK,IAAM,CACpD,GAAID,IAAQ,SACD,MAAA,CACH,KAAMA,EACN,SAAUC,EACV,KAAM,eAAeD,CAAG,GAC5B,CACJ,CACH,EAEMD,EAAA,CACH,GAAGV,EAAM,MAAM,gBACf,GAAGA,EAAM,SAAS,gBAClB,GAAGA,EAAM,MAAM,gBACf,GAAGA,EAAM,WAAW,qBACpB,GAAGA,EAAM,qBAAqB,qBAClC,GAGJ,MAAMa,EAAc,CAChB,SAAU,CACN,MAAO,UACX,EACA,UAAW,CACP,MAAO,eACP,MAAO,qBACX,EAKA,OAAQ,CACJ,MAAO,eACP,MAAO,qBACX,EACA,YAAa,CACT,MAAO,oBACP,MAAO,qBACX,EACA,sBAAuB,CACnB,MAAO,qBACP,MAAO,qBACX,EACA,OAAQ,CACJ,MAAO,eACP,MAAO,qBAAA,CAEf,EAGI,OAAAC,EAAA,KAAC,MAAI,CAAA,UAAU,yFACX,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,qCACX,SAAA,CAACC,EAAAA,IAAAC,EAAA,CAAiB,KAAK,gBAAiB,CAAA,EACxCD,EAAA,IAACE,EAAA,CACG,QAAS,CACL,CAAE,MAAO,OAAQ,MAAO,MAAO,EAC/B,CAAE,MAAO,UAAW,MAAO,SAAU,EACrC,CAAE,MAAO,OAAQ,MAAO,MAAO,EAC/B,CAAE,MAAO,OAAQ,MAAO,MAAO,CACnC,EACA,MAAOd,EACP,cAAeC,EACf,YAAY,UACZ,MAAM,eAAA,CAAA,CACV,EACJ,EACAU,EAAAA,KAAC,MAAI,CAAA,UAAU,kDACX,SAAA,CAACC,EAAAA,IAAAG,EAAA,CAAK,KAAMR,CAAM,CAAA,EAClBK,EAAAA,IAACI,EAAkB,CAAA,UAAAV,EAAsB,YAAAI,CAA0B,CAAA,CAAA,CACvE,CAAA,CAAA,EACJ,CAER"}