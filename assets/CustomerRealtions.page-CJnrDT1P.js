import{j as e,I as y,S as b,L as v,d as j,r as l,e as m}from"./index-BYyXun5x.js";import{b as x}from"./axios-utils-AvuZ81CO.js";import{U as p}from"./UnderlineHeading-ByjNC2ge.js";import{P as C}from"./PrimaryButton-CZnRZgcz.js";import{A as w}from"./AddIcon-B_YFP14b.js";import{A as N}from"./ArrowBackIcon-DM4diopZ.js";import{C as u}from"./Dropdown-DI0KLpyc.js";import{V as _}from"./ViewIcon-BBp0OIKk.js";import{D as S}from"./data-table-G-GPousO.js";import{M as f}from"./MultipleBarChart-CTk_EqXx.js";import{S as k}from"./StatisticsCards-B_8i9ipX.js";import{S as D}from"./SettingIcon-Cac9EoGa.js";import{U as I}from"./UserAddIcon-DyIpALsg.js";import"./Combination-cklTRtAe.js";import"./index-CV4wEvKw.js";import"./index-Gk0NKYh3.js";import"./index-CLYNl1a9.js";import"./index-DEdjAgo6.js";import"./chevron-right-CymCusjh.js";import"./table-Dfhf1Bk7.js";import"./CustomPagination-BD2pf3AX.js";import"./pagination-DR230PoL.js";import"./chevron-left-DVnc3BG0.js";import"./chart-Cu57hkrX.js";import"./index-Cod7pasn.js";import"./BarChart-B8FctPev.js";function E({globalFilter:t,setGlobalFilter:r,filters:a,setFilters:n}){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col p-2 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx(p,{text:"قائمة العملاء"}),e.jsxs("div",{className:"flex flex-row items-center gap-4",children:[e.jsxs("div",{className:"flex flex-row items-center w-[287px] border border-white-blue-300 bg-white-blue-50 h-[36px] p-2 rounded-[6px]",children:[e.jsx(y,{placeholder:"ابحث باسم العميل",value:t,onChange:s=>r(s.target.value),className:"text-white-blue-800 p-0 tracking-normal text-xs lg:text-sm lg:leading-[16.8px] border-none outline-none focus-visible:ring-0 placeholder:text-white-blue-800"}),e.jsx("button",{className:"bg-transparent border-none",children:e.jsx(b,{className:"text-white-blue-800"})})]}),e.jsx("div",{className:"flex fle-row items-center gap-4",children:e.jsx(u,{value:(a==null?void 0:a.status)||"",onValueChange:s=>{n({...a,status:s})},placeholder:"الحالة",width:"min-w-[77px]",options:[{label:"الحالة",value:""},{label:"متاح",value:"active"},{label:"غير متاح",value:"not active"}]})}),e.jsx("div",{children:e.jsx(v,{to:"/customer-relations/add-customer",children:e.jsxs(C,{className:"text-base px-[14px] xl:py-2 leading-5 font-semibold font-cairo tracking-normal",children:[e.jsx(w,{}),e.jsx("p",{className:"text-xs tracking-normal font-normal leading-[22.49px]",children:"إضافة عميل"})]})})}),e.jsxs("div",{className:"flex items-center justify-center gap-2 px-[14px] py-2 bg-primery-blue-50 border border-primery-blue-50 shadow-[0px_1px_2px_0px_#1018280D] rounded-lg ",children:[e.jsx(N,{className:"text-primery-blue-700"}),e.jsx("p",{className:"text-xs text-primery-blue-500 tracking-normal font-normal leading-[22.49px]",children:"تصدير"})]})]})]})})}const V=({row:t})=>{const r=j();return e.jsx("div",{className:"me-6 text-end",children:e.jsx("button",{onClick:()=>r(`/customer-relations/view-customer/${t.original.id}`),className:"text-primary hover:text-primary/80",children:e.jsx(_,{className:"text-primery-blue-400"})})})},H=[{accessorKey:"id",header:()=>e.jsx("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:"ID"}),cell:({row:t})=>e.jsx("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:t.original.id})},{accessorKey:"name",header:()=>e.jsx("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:"اسم العميل"}),cell:({row:t})=>e.jsx("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:t.original.full_name})},{accessorKey:"status",header:()=>e.jsx("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:"رقم الهاتف"}),cell:({row:t})=>e.jsx("div",{className:"text-sm text-[#625E74] font-normal tracking-normal leading-[26.4px]",children:t.original.phone})},{accessorKey:"date",header:()=>e.jsx("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:"العنوان"}),cell:({row:t})=>e.jsx("div",{className:"text-sm text-[#625E74] font-normal tracking-normal leading-[26.4px]",children:t.original.address})},{accessorKey:"service",header:()=>e.jsx("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:"البطاقة الشخصية"}),cell:({row:t})=>e.jsx("div",{className:"text-sm text-[#625E74] font-normal tracking-normal leading-[26.4px]",children:t.original.personal_id_number})},{accessorKey:"location",header:()=>e.jsx("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:"رخصة القيادة"}),cell:({row:t})=>e.jsx("div",{className:"text-sm text-[#625E74] font-normal tracking-normal leading-[26.4px]",children:t.original.driver_license_number})},{accessorKey:"location",header:()=>e.jsx("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:"عدد ايام الايجار"}),cell:({row:t})=>{var r;return e.jsx("div",{className:"text-sm text-[#625E74] font-normal tracking-normal leading-[26.4px]",children:(r=t.original)==null?void 0:r.rent_days})}},{id:"actions",header:()=>e.jsx("div",{className:"text-sm text-center px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:"مشاهدة"}),cell:({row:t})=>e.jsx(V,{row:t})}],M=()=>{const[t,r]=l.useState([]),[a,n]=l.useState(0),[s,o]=l.useState(0),[c,h]=l.useState(!1),g=l.useCallback(async d=>{h(!0);try{const i=await x({endpoint:m.customer.list,queryParams:{page:d.pageIndex+1,...d.filters,search:d.globalFilter}});r(i.data.data.data),n(Math.ceil(i.data.data.pagination.total/10)),o(i.data.data.pagination.total)}catch(i){console.error("Error fetching data:",i)}finally{h(!1)}},[]);return e.jsx("div",{className:"mb-10 mt-4 rounded-lg border border-[#E8E7EA] shadow-[0px_4px_4px_-1px_#0C0C0D0D,0px_4px_4px_-1px_#0C0C0D1A]",children:e.jsx(S,{columns:H,data:t,pageCount:a,totalCount:s,onFetchData:g,DataTableToolbar:E,isLoading:c})})},A=({stats:t,customersStatsPeriod:r,setCustomersStatsPeriod:a})=>{let n=[];t!=null&&t.new_customers&&(n=Object.entries(t==null?void 0:t.new_customers).map(([o,c])=>({days:o,visitors:c})));const s={visitors:{label:"عدد العملاء",color:"hsl(var(--green-success-100))"}};return e.jsxs("div",{className:"shadow-[0px_2px_12px_0px_#14142B14] rounded-[0.5rem]",children:[e.jsxs("div",{className:"px-4 pt-4 flex flex-row justify-between mb-10",children:[e.jsx(p,{text:"عدد العملاء"}),e.jsx(u,{options:[{label:"يومي",value:"daily"},{label:"أسبوعي ",value:"weekly "},{label:"شهري",value:"monthly"}],value:r,onValueChange:a,placeholder:"القائمة",width:"min-w-[101px]"})]}),e.jsx("div",{className:"ps-6 pb-4 flex flex-row items-center justify-center gap-6",children:e.jsx(f,{chartConfig:s,chartData:n})})]})},B=[{days:"friday",visitors:58,fill:"var(--color-friday)"},{days:"thursday",visitors:68,fill:"var(--color-thursday)"},{days:"wednesday",visitors:55,fill:"var(--color-wednesday)"},{days:"tuesday",visitors:62,fill:"var(--color-tuesday)"},{days:"monday",visitors:36,fill:"var(--color-monday)"},{days:"sunday",visitors:17,fill:"var(--color-sunday)"},{days:"saturday",visitors:78,fill:"var(--color-saturday)"}],P={visitors:{label:"السيارات المفضلة",color:"hsl(var(--primery-blue-500))"},saturday:{label:"BMW",color:"hsl(var(--primery-blue-500))"},sunday:{label:"M2",color:"hsl(var(--primery-blue-500))"},monday:{label:"Cerato",color:"hsl(var(--primery-blue-500))"},tuesday:{label:"Sunny",color:"hsl(var(--primery-blue-500))"},wednesday:{label:"Camrey",color:"hsl(var(--primery-blue-500))"},thursday:{label:"320I",color:"hsl(var(--primery-blue-500))"},friday:{label:"x6",color:"hsl(var(--primery-blue-500))"}},K=()=>{const[t,r]=l.useState("");return e.jsxs("div",{className:"shadow-[0px_2px_12px_0px_#14142B14] rounded-[0.5rem]",children:[e.jsxs("div",{className:"px-4 pt-4 flex flex-row justify-between mb-10",children:[e.jsx(p,{text:"السيارات المفضلة"}),e.jsx(u,{options:[{label:"يومي",value:"يومي"},{label:"أسبوعي ",value:"أسبوعي "},{label:"شهري",value:"شهري"},{label:"سنوي",value:"سنوي"}],value:t,onValueChange:r,placeholder:"القائمة",width:"min-w-[101px]"})]}),e.jsx("div",{className:"ps-6 pb-4 flex flex-row items-center justify-center gap-6",children:e.jsx(f,{chartConfig:P,chartData:B,barLabelColor:"#fff"})})]})};function F(){const[t,r]=l.useState(null),[a,n]=l.useState("daily");return l.useEffect(()=>{(async()=>{try{const o=await x({endpoint:m.customer.dashboardNewCustomers,queryParams:{period:a}});r(o.data.data)}catch{r(null)}})()},[a]),e.jsxs("div",{className:"mt-6 grid custom-grid-big gap-6 justify-center sm:justify-between",children:[e.jsx(A,{stats:t,customersStatsPeriod:a,setCustomersStatsPeriod:n}),e.jsx(K,{})]})}const L=({width:t="40",height:r="40",className:a=""})=>e.jsx("span",{className:a,children:e.jsxs("svg",{width:t,height:r,viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{opacity:"0.4",d:"M19.9998 20.0007C24.6022 20.0007 28.3332 16.2697 28.3332 11.6673C28.3332 7.06494 24.6022 3.33398 19.9998 3.33398C15.3975 3.33398 11.6665 7.06494 11.6665 11.6673C11.6665 16.2697 15.3975 20.0007 19.9998 20.0007Z",fill:"currentColor"}),e.jsx("path",{d:"M20.0001 24.166C11.6501 24.166 4.8501 29.766 4.8501 36.666C4.8501 37.1327 5.21676 37.4993 5.68343 37.4993H34.3168C34.7834 37.4993 35.1501 37.1327 35.1501 36.666C35.1501 29.766 28.3501 24.166 20.0001 24.166Z",fill:"currentColor"})]})}),Z=({width:t="40",height:r="40",className:a=""})=>e.jsx("span",{className:a,children:e.jsxs("svg",{width:t,height:r,viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{opacity:"0.4",d:"M35 37.916H5C4.31667 37.916 3.75 37.3493 3.75 36.666C3.75 35.9827 4.31667 35.416 5 35.416H35C35.6833 35.416 36.25 35.9827 36.25 36.666C36.25 37.3493 35.6833 37.916 35 37.916Z",fill:"currentColor"}),e.jsx("path",{d:"M9.33329 13.9668H6.66667C5.75 13.9668 5 14.7168 5 15.6335V30.0001C5 30.9168 5.75 31.6668 6.66667 31.6668H9.33329C10.25 31.6668 11 30.9168 11 30.0001V15.6335C11 14.7001 10.25 13.9668 9.33329 13.9668Z",fill:"currentColor"}),e.jsx("path",{d:"M21.3333 8.65039H18.6667C17.75 8.65039 17 9.40039 17 10.3171V30.0004C17 30.9171 17.75 31.6671 18.6667 31.6671H21.3333C22.25 31.6671 23 30.9171 23 30.0004V10.3171C23 9.40039 22.25 8.65039 21.3333 8.65039Z",fill:"currentColor"}),e.jsx("path",{d:"M33.3333 3.33398H30.6667C29.75 3.33398 29 4.08398 29 5.00065V30.0007C29 30.9173 29.75 31.6673 30.6667 31.6673H33.3333C34.25 31.6673 35 30.9173 35 30.0007V5.00065C35 4.08398 34.25 3.33398 33.3333 3.33398Z",fill:"currentColor"})]})});function U(){const[t,r]=l.useState(null);l.useEffect(()=>{(async()=>{try{const s=await x({endpoint:m.customer.dashboard});r(s.data.data)}catch{r(null)}})()},[]);const a=[{text:"اجمالي عدد العملاء",icon:e.jsx(L,{}),num:t==null?void 0:t.customer_count,percent:0},{text:"العملاء الجدد",icon:e.jsx(I,{}),num:t==null?void 0:t.new_customers,percent:0},{text:"معدل تكرار الحجز",icon:e.jsx(D,{}),num:1,percent:0},{text:"متوسط التقيم",icon:e.jsx(Z,{}),num:t==null?void 0:t.rating_average,percent:0}];return e.jsx(k,{cards:a})}function ue(){return e.jsxs("div",{className:"mt-6 w-full",children:[e.jsx(U,{}),e.jsx(F,{}),e.jsx("div",{className:"mt-6",children:e.jsx(M,{})})]})}export{ue as default};
//# sourceMappingURL=CustomerRealtions.page-CJnrDT1P.js.map
