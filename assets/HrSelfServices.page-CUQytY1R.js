import{j as e,r as n,e as p,I as _,S as C,k as j,L as P,d as $,t as q}from"./index-CG21Kl6L.js";import{b,a as I}from"./axios-utils-DWLLXNPU.js";import{U as v}from"./UnderlineHeading-6dFpHrZu.js";import{C as w}from"./Dropdown-9zztjWeh.js";import{M as H}from"./MultipleBarChart-D-wT-oEb.js";import{A as S}from"./AddLetterRequest-hF0w8jAv.js";import{A as D}from"./ArrowBackIcon-D47HpoSm.js";import{E as k,a as E}from"./jspdf.plugin.autotable-DHPWFDOB.js";import{D as F}from"./data-table-q2Kgxvnv.js";import{S as A}from"./StatisticsCards-BHRSrF9_.js";import{G as T,T as R,M as B}from"./GroupIcon-Bw-De4ev.js";import{U as K}from"./UserRemoveIcon-DAthtcYj.js";import{D as U,a as z,b as Z}from"./dialog-BNTutzAA.js";import{z as h,u as G,t as J,F as Y}from"./index-CVKxZN6H.js";import{P as O}from"./PrimaryButton-CqSNXaEZ.js";import{T as N}from"./TextInputForm-ML6m37PA.js";import{T as Q}from"./TextAreaInputForm-DDtw8I0I.js";import{F as W}from"./FileInput-PhfeDnke.js";import{D as X}from"./DateInputForm-Bteneik4.js";import{S as ee}from"./SubtleButton-CIWvV8XM.js";import{f as te}from"./format-D6Kkl3rb.js";import"./Combination-CF6sjIQ5.js";import"./index-DKOmws7K.js";import"./index-CVxAI6rk.js";import"./index-BuoIejD9.js";import"./index-Iw2dua5F.js";import"./chevron-right-ofNdHrp6.js";import"./chart-kIhB8LJL.js";import"./index-CoxrFmRa.js";import"./BarChart-ByOBWvPW.js";import"./SecondaryButton-C8PAsQMM.js";import"./index-BrlmtnpO.js";import"./removeDuplicated-BgoSiW5F.js";import"./table-VHWg2bm3.js";import"./CustomPagination-CEeDQMqo.js";import"./pagination-B5K0ldzO.js";import"./chevron-left-Dd3efAkK.js";import"./textarea-C5nh8QJ5.js";import"./popover-GWOz0UH_.js";import"./select-cvP0Sup0.js";import"./CalendarIcon-vdySZVWB.js";const se=({stats:t,requsestReportsStatsPeriod:a,setRequsestReportsStatsPeriod:r})=>{let l=[];t!=null&&t.new_customers&&(l=Object.entries(t==null?void 0:t.new_customers).map(([o,x])=>({days:o,visitors:x})));const s={visitors:{label:"تقرير الطلبات",color:"hsl(var(--primery-blue-500))"}};return e.jsxs("div",{className:"shadow-[0px_2px_12px_0px_#14142B14] rounded-[0.5rem]",children:[e.jsxs("div",{className:"px-4 pt-4 flex flex-row justify-between mb-10",children:[e.jsx(v,{text:"تقرير الطلبات"}),e.jsx(w,{options:[{label:"يومي",value:"يومي"},{label:"أسبوعي ",value:"أسبوعي "},{label:"شهري",value:"شهري"},{label:"سنوي",value:"سنوي"}],value:a,onValueChange:r,placeholder:"القائمة",width:"min-w-[101px]"})]}),e.jsx("div",{className:"ps-6 pb-4",children:e.jsx(H,{chartConfig:s,chartData:l,barLabelColor:"#fff"})})]})};function ae(){const[t,a]=n.useState(null),[r,l]=n.useState("daily");return n.useEffect(()=>{(async()=>{try{const o=await b({endpoint:p.customer.dashboardNewCustomers,queryParams:{period:r}});a(o.data.data)}catch{a(null)}})()},[r]),e.jsx("div",{className:"mt-6 grid grid-cols-1",children:e.jsx(se,{stats:t,requsestReportsStatsPeriod:r,setRequsestReportsStatsPeriod:l})})}function re({data:t}){const a=()=>{const r=new k;r.setFontSize(16),r.text("customers information",105,20,{align:"center"}),r.setLanguage("ar");const l=t.map(s=>[(s==null?void 0:s.name)||"N/A",(s==null?void 0:s.email)||"N/A",(s==null?void 0:s.department)||"N/A"]);E(r,{startY:30,head:[["name","email","job"]],body:l,styles:{halign:"center"},headStyles:{fillColor:[41,128,185],textColor:255},alternateRowStyles:{fillColor:[240,240,240]}}),r.save("employees_statistics.pdf")};return e.jsxs("button",{onClick:a,className:"flex items-center justify-center gap-2 px-[14px] py-2 bg-primery-blue-50 border hover:bg-primery-blue-100 border-primery-blue-50 shadow-[0px_1px_2px_0px_#1018280D] rounded-lg ",children:[e.jsx(D,{className:"text-primery-blue-700"}),e.jsx("p",{className:"text-xs text-primery-blue-500 tracking-normal font-normal leading-[22.49px]",children:"تصدير"})]})}function le({globalFilter:t,setGlobalFilter:a,handleRefreshTable:r,filters:l,setFilters:s,data:o}){const[x,d]=n.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col p-2 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx(v,{text:"قائمة الطلبات "}),e.jsxs("div",{className:"flex flex-row items-center gap-4",children:[e.jsxs("div",{className:"flex flex-row items-center w-[287px] border border-white-blue-300 bg-white-blue-50 h-[36px] p-2 rounded-[6px]",children:[e.jsx(_,{placeholder:"ابحث باسم المستفيد",value:t,onChange:i=>a(i.target.value),className:"text-white-blue-800 p-0 tracking-normal text-xs lg:text-sm lg:leading-[16.8px] border-none outline-none focus-visible:ring-0 placeholder:text-white-blue-800"}),e.jsx("button",{className:"bg-transparent border-none",children:e.jsx(C,{className:"text-white-blue-800"})})]}),e.jsx("div",{className:"flex fle-row items-center gap-4",children:e.jsx(w,{value:(l==null?void 0:l.status)||"",onValueChange:i=>{s({...l,status:i})},placeholder:"فلتر",width:"min-w-[77px]",options:[{label:"فلتر",value:""},{label:"متاح",value:"active"},{label:"غير متاح",value:"not active"}]})}),e.jsx(re,{data:o})]})]}),e.jsx(S,{open:x,setAddLetter:d,handleRefreshTable:r})]})}const ne=({row:t})=>e.jsxs("div",{className:"flex flex-row justify-center gap-1",children:[e.jsx("button",{className:"bg-green-success-600 w-14 hover:opacity-85 rounded-lg py-[6px] text-xs font-cairo font-medium border shadow-[0px_1px_2px_0px_#1018280D] text-white-blue-50",children:"موافقة"}),e.jsx("button",{className:"bg-red-error-600 w-14 hover:opacity-85 rounded-lg py-[6px] text-xs font-cairo font-medium border shadow-[0px_1px_2px_0px_#1018280D] text-white-blue-50",children:"رفض"}),e.jsx(P,{to:`/human-resources/self-services/request-preview/${t.original.id}`,children:e.jsx("button",{className:"bg-primery-blue-400 w-14 hover:opacity-85 rounded-lg py-[6px] text-xs font-cairo font-medium border shadow-[0px_1px_2px_0px_#1018280D] text-white-blue-50",children:"معاينة"})})]}),oe=[{accessorKey:"id",header:()=>e.jsx("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:"ID"}),cell:({row:t})=>e.jsx("div",{className:"text-sm text-primery-blue-500 font-normal tracking-normal leading-[26.4px]",children:t.original.id})},{accessorKey:"name",header:()=>e.jsx("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:"بيانات الموظف"}),cell:({row:t})=>e.jsxs("div",{className:"text-sm text-[#625E74] flex flex-col font-normal tracking-normal leading-[26.4px]",children:[e.jsx("p",{children:t.original.employee.name}),e.jsxs("p",{children:["كود الموظف:",t.original.employee_id]})]})},{accessorKey:"name",header:()=>e.jsx("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:"الوظيفة"}),cell:({row:t})=>e.jsx("div",{className:"text-sm text-[#625E74] font-normal tracking-normal leading-[26.4px]"})},{accessorKey:"status",header:()=>e.jsx("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:"نوع الخدمة"}),cell:({row:t})=>e.jsx("div",{className:"text-sm text-[#625E74] font-normal tracking-normal leading-[26.4px]"})},{accessorKey:"service",header:()=>e.jsx("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:"الحالة"}),cell:({row:t})=>e.jsx("div",{className:"text-xs font-medium tracking-normal leading-[115%]",children:e.jsx("p",{className:j("p-1 w-fit rounded-sm",{"bg-[#DAF8E6] text-[#1A8245]":t.original.status==="completed","bg-[#FFFBEB] text-[#D97706]":t.original.status==="pending","bg-[#FEEBEB] text-[#E10E0E]":t.original.status==="rejected"}),children:t.original.status})})},{id:"actions",header:()=>e.jsx("div",{className:"text-sm text-center px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:"الاجراءات"}),cell:({row:t})=>e.jsx(ne,{row:t})}];function ie(){const[t,a]=n.useState([]),[r,l]=n.useState(0),[s,o]=n.useState(0),[x,d]=n.useState(!1),i=n.useCallback(async m=>{d(!0);try{const c=await b({endpoint:p.extraServices.list,queryParams:{page:m.pageIndex+1,...m.filters,search:m.globalFilter}});a(c.data.data.data),l(Math.ceil(c.data.data.pagination.total/10)),o(c.data.data.pagination.total)}catch(c){console.error("Error fetching data:",c)}finally{d(!1)}},[]);return e.jsx("div",{className:"mt-6 mb-20 rounded-lg border border-[#E8E7EA] shadow-[0px_4px_4px_-1px_#0C0C0D0D,0px_4px_4px_-1px_#0C0C0D1A]",children:e.jsx(F,{columns:oe,data:t,pageCount:r,totalCount:s,onFetchData:i,DataTableToolbar:le,isLoading:x})})}function ce(){const[t,a]=n.useState(null);n.useEffect(()=>{(async()=>{try{const s=await b({endpoint:p.employee.dashboard});a(s.data.data)}catch{a(null)}})()},[]);const r=[{text:"عدد الطلبات",num:t==null?void 0:t.total_employees,percent:12,icon:e.jsx(T,{})},{text:"الطلبات المقبوله",num:t==null?void 0:t.total_full_time,percent:-.3,icon:e.jsx(R,{})},{text:"الطلبات المرفوضه",num:t==null?void 0:t.total_part_time,percent:-.3,icon:e.jsx(B,{})},{text:"الطلبات المعلقة",num:35,percent:0,icon:e.jsx(K,{})}];return e.jsx(A,{cards:r,numJustifyStart:!0})}function xe(){return e.jsxs("div",{className:"w-full mt-6",children:[e.jsx(ce,{}),e.jsx(ae,{}),e.jsx(ie,{})]})}function de({data:t}){const a=()=>{const r=new k;r.setFontSize(16),r.text("customers information",105,20,{align:"center"}),r.setLanguage("ar");const l=t.map(s=>[(s==null?void 0:s.name)||"N/A",(s==null?void 0:s.email)||"N/A",(s==null?void 0:s.department)||"N/A"]);E(r,{startY:30,head:[["name","email","job"]],body:l,styles:{halign:"center"},headStyles:{fillColor:[41,128,185],textColor:255},alternateRowStyles:{fillColor:[240,240,240]}}),r.save("employees_statistics.pdf")};return e.jsxs("button",{onClick:a,className:"flex items-center justify-center gap-2 px-[14px] py-2 bg-primery-blue-50 border hover:bg-primery-blue-100 border-primery-blue-50 shadow-[0px_1px_2px_0px_#1018280D] rounded-lg ",children:[e.jsx(D,{className:"text-primery-blue-700"}),e.jsx("p",{className:"text-xs text-primery-blue-500 tracking-normal font-normal leading-[22.49px]",children:"تصدير"})]})}function me({globalFilter:t,setGlobalFilter:a,handleRefreshTable:r,filters:l,setFilters:s,data:o}){const[x,d]=n.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col p-2 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx(v,{text:"طلبات اضافة مستفدين"}),e.jsxs("div",{className:"flex flex-row items-center gap-4",children:[e.jsxs("div",{className:"flex flex-row items-center w-[287px] border border-white-blue-300 bg-white-blue-50 h-[36px] p-2 rounded-[6px]",children:[e.jsx(_,{placeholder:"ابحث باسم المستفيد",value:t,onChange:i=>a(i.target.value),className:"text-white-blue-800 p-0 tracking-normal text-xs lg:text-sm lg:leading-[16.8px] border-none outline-none focus-visible:ring-0 placeholder:text-white-blue-800"}),e.jsx("button",{className:"bg-transparent border-none",children:e.jsx(C,{className:"text-white-blue-800"})})]}),e.jsx("div",{className:"flex fle-row items-center gap-4",children:e.jsx(w,{value:(l==null?void 0:l.status)||"",onValueChange:i=>{s({...l,status:i})},placeholder:"فلتر",width:"min-w-[77px]",options:[{label:"فلتر",value:""},{label:"متاح",value:"active"},{label:"غير متاح",value:"not active"}]})}),e.jsx(de,{data:o})]})]}),e.jsx(S,{open:x,setAddLetter:d,handleRefreshTable:r})]})}const pe=h.object({name:h.string().optional(),id:h.number().optional(),identity_number:h.string().optional(),birth_date:h.date({required_error:"This field is required"}).optional(),note:h.string().optional(),reject_reason:h.string().optional(),reject_attachment:h.instanceof(File,{message:"File is required"}).optional()});function ue({beneficiary:t,setAskForService:a,handleRefreshTable:r}){const[l,s]=n.useState(null),[o,x]=n.useState(!1),d=$(),i=n.useMemo(()=>({name:(t==null?void 0:t.name)||"",id:(t==null?void 0:t.id)||"",identity_number:(t==null?void 0:t.identity_number)||"",birth_date:t!=null&&t.birth_date?new Date(t.birth_date):"",note:(t==null?void 0:t.note)||"",attachment:(t==null?void 0:t.attachment)||null}),[t]),m=G({resolver:J(pe),defaultValues:i}),c=async u=>{var g,L;x(!0),s(null);try{await I({endpoint:t?p.insuranceRelatives.update+t.id:p.insuranceRelatives.create,body:{...u,birth_date:u!=null&&u.birth_date?te(u.birth_date,"yyyy-MM-dd"):"",status:"approved"},config:{headers:{"Content-Type":"multipart/form-data"}}}),q("تمت الموافقة بنجاح"),a(!1),r(),d("/human-resources/self-services?beneficiaries=true")}catch(y){if((L=(g=y.response)==null?void 0:g.data)!=null&&L.errors)Object.entries(y.response.data.errors).forEach(([f,V])=>{m.setError(f,{type:"manual",message:V.join(", ")})});else{let f="حدث خطأ أثناء إرسال البيانات. يرجى المحاولة مرة أخرى.";y.response?f=y.response.data.msg||f:y.request&&(f="تعذر الاتصال بالخادم. يرجى التحقق من اتصالك بالإنترنت."),s(f)}}finally{x(!1)}},M=async()=>{x(!0),s(null);try{await I({endpoint:p.insuranceRelatives.update+(t==null?void 0:t.id),body:{status:"rejected",reject_reason:m.getValues("reject_reason"),reject_attachment:m.getValues("reject_attachment")},config:{headers:{"Content-Type":"multipart/form-data"}}}),q("تمت رفض الطلب بنجاح"),a(!1),r(),d("/human-resources/self-services?beneficiaries=true")}catch(u){let g="حدث خطأ أثناء إرسال البيانات. يرجى المحاولة مرة أخرى.";u.response?g=u.response.data.msg||g:u.request&&(g="تعذر الاتصال بالخادم. يرجى التحقق من اتصالك بالإنترنت."),s(g)}finally{x(!1)}};return e.jsx(e.Fragment,{children:e.jsx(Y,{...m,children:e.jsxs("form",{onSubmit:m.handleSubmit(c),className:"mt-6",children:[l&&e.jsx("div",{className:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"",children:l}),e.jsx("button",{onClick:()=>s(null),className:"text-red-700 hover:text-red-900",children:"×"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6",children:[e.jsx(N,{disabled:!0,name:"name",label:"الاسم",placeholder:""}),e.jsx(N,{disabled:!0,name:"id",label:"رقم المشترك",placeholder:""}),e.jsx(N,{disabled:!0,name:"identity_number",label:"رقم الهوية",placeholder:""}),e.jsx(X,{disabledDate:!0,name:"birth_date",label:"تاريخ الميلاد",placeholder:""})]}),e.jsx(Q,{className:"flex flex-col min-h-[130px]",name:"note",label:"ملاحظات اضافية",placeholder:"",disabled:!0}),e.jsx(W,{name:"attachment",label:"رفع ملف",multiple:!1,maxSize:10*1024*1024}),e.jsxs("div",{className:"flex flex-row justify-end gap-4 mt-6",children:[e.jsx(ee,{type:"button",className:"text-base bg-red-error-50 !px-16 text-[#A21515] leading-5 hover:bg-red-error-50 hover:opacity-80 tracking-normal py-[10px] font-medium",onClick:M,children:"رفض"}),e.jsx(O,{type:"submit",className:"text-base leading-5 !px-28 tracking-normal font-medium py-[10px]",children:o?"جاري الموافقة...":"موافقة"})]})]})})})}function he({open:t,setAskForService:a,handleRefreshTable:r,data:l}){return e.jsxs(U,{open:t,children:[e.jsx("div",{className:j("fixed inset-0 bg-black/50",{"!hidden":!t})}),e.jsxs(z,{showCloseButton:!1,className:"max-w-[623px] rounded-lg p-8 bg-white-blue-50 font-cairo gap-0 [&_[aria-label=Close]]:opacity-0",children:[e.jsxs(Z,{className:"flex flex-col items-center",children:[e.jsx("div",{className:"flex flex-row justify-between mb-4 w-full",children:e.jsxs("div",{className:"flex flex-row gap-2",children:[e.jsxs("svg",{width:"25",height:"25",viewBox:"0 0 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M22.4688 18.5V19.5C22.4688 21.15 22.4688 22.5 19.4688 22.5H5.46875C2.46875 22.5 2.46875 21.15 2.46875 19.5V18.5C2.46875 17.95 2.91875 17.5 3.46875 17.5H21.4688C22.0187 17.5 22.4688 17.95 22.4688 18.5Z",fill:"#145DA0"}),e.jsx("path",{opacity:"0.4",d:"M21.2195 13.5V17.5H3.76953V13.5C3.76953 9.66 6.47953 6.45 10.0895 5.68C10.6295 5.56 11.1895 5.5 11.7695 5.5H13.2195C13.7995 5.5 14.3695 5.56 14.9095 5.68C18.5195 6.46 21.2195 9.66 21.2195 13.5Z",fill:"#125592"}),e.jsx("path",{d:"M15 5C15 5.24 14.97 5.46 14.91 5.68C14.37 5.56 13.8 5.5 13.22 5.5H11.77C11.19 5.5 10.63 5.56 10.09 5.68C10.03 5.46 10 5.24 10 5C10 3.62 11.12 2.5 12.5 2.5C13.88 2.5 15 3.62 15 5Z",fill:"#145DA0"}),e.jsx("path",{d:"M15.5 12.25H9.5C9.09 12.25 8.75 11.91 8.75 11.5C8.75 11.09 9.09 10.75 9.5 10.75H15.5C15.91 10.75 16.25 11.09 16.25 11.5C16.25 11.91 15.91 12.25 15.5 12.25Z",fill:"#145DA0"})]}),e.jsx("h3",{className:"text-[22px] font-bold text-primery-blue-500",children:"طلب خدمة"})]})}),e.jsx("div",{className:"w-full border-b border-[#D1D1D1] !mt-0"})]}),e.jsx(ue,{setAskForService:a,handleRefreshTable:r,beneficiary:l})]})]})}const ge=({row:t})=>{const[a,r]=n.useState(!1);return e.jsxs("div",{className:"flex flex-row justify-center gap-1",children:[e.jsx("button",{className:"bg-green-success-600 w-14 hover:opacity-85 rounded-lg py-[6px] text-xs font-cairo font-medium border shadow-[0px_1px_2px_0px_#1018280D] text-white-blue-50",children:"موافقة"}),e.jsx("button",{className:"bg-red-error-600 w-14 hover:opacity-85 rounded-lg py-[6px] text-xs font-cairo font-medium border shadow-[0px_1px_2px_0px_#1018280D] text-white-blue-50",children:"رفض"}),e.jsx("button",{onClick:()=>r(!0),className:"bg-primery-blue-400 w-14 hover:opacity-85 rounded-lg py-[6px] text-xs font-cairo font-medium border shadow-[0px_1px_2px_0px_#1018280D] text-white-blue-50",children:"معاينة"}),e.jsx(he,{open:a,setAskForService:r,handleRefreshTable:()=>t.original.refreshTable,data:t.original})]})},be=[{accessorKey:"id",header:()=>e.jsx("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:"ID"}),cell:({row:t})=>e.jsx("div",{className:"text-sm text-primery-blue-500 font-normal tracking-normal leading-[26.4px]",children:t.original.id})},{accessorKey:"name",header:()=>e.jsx("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:"بيانات الموظف"}),cell:({row:t})=>{var a,r;return e.jsxs("div",{className:"text-sm text-[#625E74] flex flex-col font-normal tracking-normal leading-[26.4px]",children:[e.jsx("p",{children:(a=t.original)==null?void 0:a.name}),e.jsxs("p",{children:["كود الموظف:",(r=t.original)==null?void 0:r.id]})]})}},{accessorKey:"name",header:()=>e.jsx("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:"اسم المستفيد"}),cell:({row:t})=>{var a;return e.jsx("div",{className:"text-sm text-[#625E74] font-normal tracking-normal leading-[26.4px]",children:(a=t.original)==null?void 0:a.name})}},{accessorKey:"name",header:()=>e.jsx("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:"رقم المشترك"}),cell:({row:t})=>e.jsx("div",{className:"text-sm text-[#625E74] font-normal tracking-normal leading-[26.4px]"})},{accessorKey:"name",header:()=>e.jsx("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:"رقم الهوية"}),cell:({row:t})=>{var a;return e.jsx("div",{className:"text-sm text-[#625E74] font-normal tracking-normal leading-[26.4px]",children:(a=t.original)==null?void 0:a.identity_number})}},{id:"actions",header:()=>e.jsx("div",{className:"text-sm text-center px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:"الاجراءات"}),cell:({row:t})=>e.jsx(ge,{row:t})}];function fe(){const[t,a]=n.useState([]),[r,l]=n.useState(0),[s,o]=n.useState(0),[x,d]=n.useState(!1),i=n.useCallback(async m=>{d(!0);try{const c=await b({endpoint:p.insuranceRelatives.paginate,queryParams:{page:m.pageIndex+1,...m.filters,search:m.globalFilter}});a(c.data.data.data),l(Math.ceil(c.data.data.pagination.total/10)),o(c.data.data.pagination.total)}catch(c){console.error("Error fetching data:",c)}finally{d(!1)}},[]);return e.jsx("div",{className:"mt-6 mb-20 rounded-lg border border-[#E8E7EA] shadow-[0px_4px_4px_-1px_#0C0C0D0D,0px_4px_4px_-1px_#0C0C0D1A]",children:e.jsx(F,{columns:be,data:t,pageCount:r,totalCount:s,onFetchData:i,DataTableToolbar:me,isLoading:x})})}function je(){const[t,a]=n.useState(null);n.useEffect(()=>{(async()=>{try{const s=await b({endpoint:p.employee.dashboard});a(s.data.data)}catch{a(null)}})()},[]);const r=[{text:"عدد المستفدين",num:t==null?void 0:t.total_employees,percent:12,icon:e.jsx(T,{})},{text:"عدد المستفدين",num:t==null?void 0:t.total_full_time,percent:-.3,icon:e.jsx(R,{})}];return e.jsx(A,{cards:r,numJustifyStart:!0})}function ye(){return e.jsxs("div",{className:"w-full mt-6",children:[e.jsx(je,{}),e.jsx(fe,{})]})}function ve({data:t}){const a=()=>{const r=new k;r.setFontSize(16),r.text("customers information",105,20,{align:"center"}),r.setLanguage("ar");const l=t.map(s=>[(s==null?void 0:s.name)||"N/A",(s==null?void 0:s.email)||"N/A",(s==null?void 0:s.department)||"N/A"]);E(r,{startY:30,head:[["name","email","job"]],body:l,styles:{halign:"center"},headStyles:{fillColor:[41,128,185],textColor:255},alternateRowStyles:{fillColor:[240,240,240]}}),r.save("employees_statistics.pdf")};return e.jsxs("button",{onClick:a,className:"flex items-center justify-center gap-2 px-[14px] py-2 bg-primery-blue-50 border hover:bg-primery-blue-100 border-primery-blue-50 shadow-[0px_1px_2px_0px_#1018280D] rounded-lg ",children:[e.jsx(D,{className:"text-primery-blue-700"}),e.jsx("p",{className:"text-xs text-primery-blue-500 tracking-normal font-normal leading-[22.49px]",children:"تصدير"})]})}function we({globalFilter:t,setGlobalFilter:a,handleRefreshTable:r,filters:l,setFilters:s,data:o}){const[x,d]=n.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col p-2 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx(v,{text:"طلبات القروض"}),e.jsxs("div",{className:"flex flex-row items-center gap-4",children:[e.jsxs("div",{className:"flex flex-row items-center w-[287px] border border-white-blue-300 bg-white-blue-50 h-[36px] p-2 rounded-[6px]",children:[e.jsx(_,{placeholder:"ابحث باسم المستفيد",value:t,onChange:i=>a(i.target.value),className:"text-white-blue-800 p-0 tracking-normal text-xs lg:text-sm lg:leading-[16.8px] border-none outline-none focus-visible:ring-0 placeholder:text-white-blue-800"}),e.jsx("button",{className:"bg-transparent border-none",children:e.jsx(C,{className:"text-white-blue-800"})})]}),e.jsx("div",{className:"flex fle-row items-center gap-4",children:e.jsx(w,{value:(l==null?void 0:l.status)||"",onValueChange:i=>{s({...l,status:i})},placeholder:"فلتر",width:"min-w-[77px]",options:[{label:"فلتر",value:""},{label:"متاح",value:"active"},{label:"غير متاح",value:"not active"}]})}),e.jsx(ve,{data:o})]})]}),e.jsx(S,{open:x,setAddLetter:d,handleRefreshTable:r})]})}const Ne=({row:t})=>e.jsxs("div",{className:"flex flex-row justify-center gap-1",children:[e.jsx("button",{className:"bg-green-success-600 w-14 hover:opacity-85 rounded-lg py-[6px] text-xs font-cairo font-medium border shadow-[0px_1px_2px_0px_#1018280D] text-white-blue-50",children:"موافقة"}),e.jsx("button",{className:"bg-red-error-600 w-14 hover:opacity-85 rounded-lg py-[6px] text-xs font-cairo font-medium border shadow-[0px_1px_2px_0px_#1018280D] text-white-blue-50",children:"رفض"}),e.jsx(P,{to:`/human-resources/self-services/loan-request-preview/${t.original.id}`,children:e.jsx("button",{className:"bg-primery-blue-400 w-14 hover:opacity-85 rounded-lg py-[6px] text-xs font-cairo font-medium border shadow-[0px_1px_2px_0px_#1018280D] text-white-blue-50",children:"معاينة"})})]}),_e=[{accessorKey:"id",header:()=>e.jsx("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:"ID"}),cell:({row:t})=>e.jsx("div",{className:"text-sm text-primery-blue-500 font-normal tracking-normal leading-[26.4px]",children:t.original.id})},{accessorKey:"name",header:()=>e.jsx("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:"بيانات الموظف"}),cell:({row:t})=>{var a,r,l;return e.jsxs("div",{className:"text-sm text-[#625E74] flex flex-col font-normal tracking-normal leading-[26.4px]",children:[e.jsx("p",{children:(r=(a=t.original)==null?void 0:a.employee)==null?void 0:r.name}),e.jsxs("p",{children:["كود الموظف:",(l=t.original)==null?void 0:l.employee_id]})]})}},{accessorKey:"name",header:()=>e.jsx("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:"الوظيفة"}),cell:({row:t})=>e.jsx("div",{className:"text-sm text-[#625E74] font-normal tracking-normal leading-[26.4px]"})},{accessorKey:"name",header:()=>e.jsx("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:"نوع السلفة"}),cell:({row:t})=>e.jsx("div",{className:"text-sm text-[#625E74] font-normal tracking-normal leading-[26.4px]",children:t.original.loan_type})},{accessorKey:"name",header:()=>e.jsx("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:"المبلغ"}),cell:({row:t})=>{var a;return e.jsx("div",{className:"text-sm text-[#625E74] font-normal tracking-normal leading-[26.4px]",children:(a=t.original)==null?void 0:a.amount})}},{accessorKey:"service",header:()=>e.jsx("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:"الحالة"}),cell:({row:t})=>e.jsx("div",{className:"text-xs font-medium tracking-normal leading-[115%]",children:e.jsx("p",{className:j("p-1 w-fit rounded-sm",{"bg-[#DAF8E6] text-[#1A8245]":t.original.status==="approved","bg-[#FFFBEB] text-[#D97706]":t.original.status==="pending","bg-[#FEEBEB] text-[#E10E0E]":t.original.status==="rejected"}),children:t.original.status})})},{id:"actions",header:()=>e.jsx("div",{className:"text-sm text-center px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:"الاجراءات"}),cell:({row:t})=>e.jsx(Ne,{row:t})}];function Ce(){const[t,a]=n.useState([]),[r,l]=n.useState(0),[s,o]=n.useState(0),[x,d]=n.useState(!1),i=n.useCallback(async m=>{d(!0);try{const c=await b({endpoint:p.loan.list,queryParams:{page:m.pageIndex+1,...m.filters,search:m.globalFilter}});a(c.data.data.data),l(Math.ceil(c.data.data.pagination.total/10)),o(c.data.data.pagination.total)}catch(c){console.error("Error fetching data:",c)}finally{d(!1)}},[]);return e.jsx("div",{className:"mt-6 mb-20 rounded-lg border border-[#E8E7EA] shadow-[0px_4px_4px_-1px_#0C0C0D0D,0px_4px_4px_-1px_#0C0C0D1A]",children:e.jsx(F,{columns:_e,data:t,pageCount:r,totalCount:s,onFetchData:i,DataTableToolbar:we,isLoading:x})})}function Se(){const[t,a]=n.useState(null);n.useEffect(()=>{(async()=>{try{const s=await b({endpoint:p.employee.dashboard});a(s.data.data)}catch{a(null)}})()},[]);const r=[{text:"قيمة القروض",num:t==null?void 0:t.total_employees,percent:12,icon:e.jsx(T,{})},{text:"اجمالي عدد القروض",num:35,percent:0,icon:e.jsx(K,{})},{text:"القروض المقبوله",num:t==null?void 0:t.total_full_time,percent:-.3,icon:e.jsx(R,{})},{text:"القروض المرفوضه",num:t==null?void 0:t.total_part_time,percent:-.3,icon:e.jsx(B,{})}];return e.jsx(A,{cards:r,numJustifyStart:!0})}function De(){return e.jsxs("div",{className:"w-full mt-6",children:[e.jsx(Se,{}),e.jsx(Ce,{})]})}function ke(){const[t,a]=n.useState(1),l=new URLSearchParams(window.location.search).get("loans"),s=o=>{a(o)};return n.useEffect(()=>{l&&a(3)},[l]),e.jsxs("div",{className:"w-full mt-6",children:[e.jsxs("div",{className:"w-full flex flex-row items-center gap-[1px]",children:[e.jsx("button",{onClick:()=>s(1),className:j("w-full transition-colors text-base py-3 text-white-blue-50 font-bold leading-[120%] tracking-normal rounded-s-lg",{"bg-primery-blue-700":t===1,"bg-primery-blue-400":t!==1}),children:"قائمة الطلبات"}),e.jsx("button",{onClick:()=>s(2),className:j("w-full transition-colors text-base py-3 text-white-blue-50 font-bold leading-[120%] tracking-normal",{"bg-primery-blue-700":t===2,"bg-primery-blue-400":t!==2}),children:"طلبات المستفيدين"}),e.jsx("button",{onClick:()=>s(3),className:j("w-full transition-colors text-base py-3 text-white-blue-50 font-bold leading-[120%] tracking-normal",{"bg-primery-blue-700":t===3,"bg-primery-blue-400":t!==3}),children:"طلبات القروض"})]}),t===1&&e.jsx(xe,{}),t===2&&e.jsx(ye,{}),t===3&&e.jsx(De,{})]})}const gt=()=>e.jsx("div",{className:"w-full mt-6 mb-24",children:e.jsx(ke,{})});export{gt as default};
//# sourceMappingURL=HrSelfServices.page-CUQytY1R.js.map
