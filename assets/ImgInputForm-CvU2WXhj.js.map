{"version":3,"file":"ImgInputForm-CvU2WXhj.js","sources":["../../src/components/icons/UploadImgIcon.tsx","../../src/components/forms/ImgInputForm.tsx"],"sourcesContent":["interface IconProps {\r\n    width?: string;\r\n    height?: string;\r\n    className?: string;\r\n    color?: string;\r\n}\r\nconst UploadImgIcon = ({ width = '148', height = '148', className = '', color = '#B7CDE2' }: IconProps) => {\r\n    return (\r\n        <span className={className}>\r\n            <svg width={width} height={height} viewBox=\"0 0 148 148\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                <path\r\n                    d=\"M55.5001 66.2917C46.1267 66.2917 38.5417 58.7067 38.5417 49.3333C38.5417 39.96 46.1267 32.375 55.5001 32.375C64.8734 32.375 72.4584 39.96 72.4584 49.3333C72.4584 58.7067 64.8734 66.2917 55.5001 66.2917ZM55.5001 41.625C51.2451 41.625 47.7917 45.0783 47.7917 49.3333C47.7917 53.5883 51.2451 57.0417 55.5001 57.0417C59.7551 57.0417 63.2084 53.5883 63.2084 49.3333C63.2084 45.0783 59.7551 41.625 55.5001 41.625Z\"\r\n                    fill={color}\r\n                />\r\n                <path\r\n                    d=\"M92.4999 140.292H55.4999C22.0149 140.292 7.70825 125.985 7.70825 92.5002V55.5002C7.70825 22.0152 22.0149 7.7085 55.4999 7.7085H80.1666C82.6949 7.7085 84.7916 9.80516 84.7916 12.3335C84.7916 14.8618 82.6949 16.9585 80.1666 16.9585H55.4999C27.0716 16.9585 16.9583 27.0718 16.9583 55.5002V92.5002C16.9583 120.929 27.0716 131.042 55.4999 131.042H92.4999C120.928 131.042 131.042 120.929 131.042 92.5002V61.6668C131.042 59.1385 133.138 57.0418 135.667 57.0418C138.195 57.0418 140.292 59.1385 140.292 61.6668V92.5002C140.292 125.985 125.985 140.292 92.4999 140.292Z\"\r\n                    fill={color}\r\n                />\r\n                <path\r\n                    d=\"M131.042 35.4585H97.125C94.5967 35.4585 92.5 33.3618 92.5 30.8335C92.5 28.3052 94.5967 26.2085 97.125 26.2085H131.042C133.57 26.2085 135.667 28.3052 135.667 30.8335C135.667 33.3618 133.57 35.4585 131.042 35.4585Z\"\r\n                    fill={color}\r\n                />\r\n                <path\r\n                    d=\"M114.083 52.4167C111.555 52.4167 109.458 50.32 109.458 47.7917V13.875C109.458 11.3467 111.555 9.25 114.083 9.25C116.612 9.25 118.708 11.3467 118.708 13.875V47.7917C118.708 50.32 116.612 52.4167 114.083 52.4167Z\"\r\n                    fill={color}\r\n                />\r\n                <path\r\n                    d=\"M16.4649 121.483C14.9849 121.483 13.5049 120.743 12.6416 119.448C11.2233 117.351 11.7783 114.453 13.8749 113.035L44.2766 92.6231C50.9366 88.1831 60.1249 88.6765 66.1683 93.7948L68.2033 95.5831C71.2866 98.2348 76.5283 98.2348 79.5499 95.5831L105.203 73.5681C111.802 67.9565 122.038 67.9565 128.637 73.5681L138.688 82.2015C140.6 83.8665 140.847 86.7648 139.182 88.7381C137.517 90.6498 134.618 90.8965 132.645 89.2315L122.593 80.5981C119.51 77.9465 114.268 77.9465 111.247 80.5981L85.5933 102.613C79.0566 108.225 68.7583 108.225 62.1599 102.613L60.1249 100.825C57.2883 98.4198 52.6016 98.1731 49.4566 100.331L19.1166 120.743C18.2533 121.236 17.3283 121.483 16.4649 121.483Z\"\r\n                    fill={color}\r\n                />\r\n            </svg>\r\n        </span>\r\n    );\r\n};\r\n\r\nexport default UploadImgIcon;\r\n","import { useFormContext } from 'react-hook-form';\r\nimport { FormField, FormItem, FormLabel, FormControl, FormMessage } from '@/components/ui/form';\r\nimport { useDropzone } from 'react-dropzone';\r\nimport { SecondaryButton } from '@/components/buttons/SecondaryButton';\r\nimport UploadImgIcon from '@/components/icons/UploadImgIcon';\r\nimport { useEffect, useState } from 'react';\r\nimport removeDuplicates from '@/utils/removeDuplicated';\r\n\r\ninterface Props {\r\n    className?: string;\r\n    name: string;\r\n    label?: string;\r\n    multiple: boolean;\r\n    maxSize: number;\r\n    editImages?: string[] | string;\r\n}\r\n\r\nconst ImgInputForm = ({ className, name, label, maxSize, multiple, editImages }: Props) => {\r\n    const { control, setValue, watch, getValues } = useFormContext();\r\n    const [imgPreviews, setImgPreviews] = useState<string[]>([]);\r\n\r\n    const removeImage = (index: number) => {\r\n        const currentFiles = getValues(name);\r\n        const newFiles = Array.isArray(currentFiles) ? currentFiles.filter((_, i) => i !== index) : [];\r\n\r\n        setValue(name, newFiles, { shouldValidate: true });\r\n\r\n        setImgPreviews((prev) => {\r\n            const newPreviews = prev.filter((_, i) => {\r\n                if (i === index) {\r\n                    URL.revokeObjectURL(prev[i]);\r\n                }\r\n                return i !== index;\r\n            });\r\n            return newPreviews;\r\n        });\r\n    };\r\n\r\n    const onDrop = (acceptedFiles: File[], name: string) => {\r\n        if (multiple && editImages) {\r\n            // Get current files from form value\r\n            const currentValue = getValues(name);\r\n            const existingFiles = Array.isArray(currentValue) ? currentValue : [];\r\n            // Merge existing files with new accepted files\r\n            const combinedFiles = [...existingFiles, ...acceptedFiles];\r\n            setValue(name, removeDuplicates(combinedFiles), { shouldValidate: true });\r\n            // Generate previews for new files and append\r\n            const newPreviews = acceptedFiles.map((file) => URL.createObjectURL(file));\r\n            setImgPreviews((prev) => [...prev, ...newPreviews]);\r\n        } else {\r\n            setValue(name, multiple ? acceptedFiles : acceptedFiles[0], { shouldValidate: true });\r\n            setImgPreviews(acceptedFiles.map((file) => URL.createObjectURL(file)));\r\n        }\r\n    };\r\n\r\n    // Watch the form values for images\r\n    const images = watch(name);\r\n\r\n    // Reset previews when form values are cleared\r\n    useEffect(() => {\r\n        if (!images || images.length === 0) {\r\n            setImgPreviews([]);\r\n        }\r\n    }, [images]);\r\n\r\n    // initailly add editImages to react hook form state when edit\r\n    useEffect(() => {\r\n        if (editImages) {\r\n            setValue(name, editImages, { shouldValidate: true });\r\n            setImgPreviews(Array.isArray(editImages) ? editImages : [editImages]);\r\n        }\r\n    }, []);\r\n\r\n    return (\r\n        <FormField\r\n            control={control}\r\n            name={name}\r\n            render={({ field }) => (\r\n                <FormItem className={className}>\r\n                    <FormLabel className=\"text-primery-blue-900 font-medium text-[18px] leading-[33.73px] tracking-normal text-start\">\r\n                        {label}\r\n                    </FormLabel>\r\n                    <FormControl>\r\n                        <ImgFileUploader\r\n                            onDrop={(files: File[]) => onDrop(files, name)}\r\n                            acceptedFiles={field.value}\r\n                            previews={imgPreviews}\r\n                            maxSize={maxSize}\r\n                            multiple={multiple}\r\n                            removeImage={removeImage}\r\n                        />\r\n                    </FormControl>\r\n                    <FormMessage />\r\n                </FormItem>\r\n            )}\r\n        />\r\n    );\r\n};\r\n\r\nexport default ImgInputForm;\r\n\r\nfunction ImgFileUploader({ onDrop, previews, maxSize, multiple, removeImage }: any) {\r\n    const { getRootProps, getInputProps } = useDropzone({\r\n        onDrop,\r\n        accept: { 'image/*': [] },\r\n        multiple: multiple,\r\n        maxSize: maxSize,\r\n    });\r\n\r\n    return (\r\n        <div\r\n            {...getRootProps()}\r\n            className=\"border-2 border-dashed border-[#B6B5BF] rounded-lg p-4 text-center cursor-pointer\"\r\n        >\r\n            <input {...getInputProps()} />\r\n            <div>\r\n                <div className=\"flex flex-row justify-start items-center\">\r\n                    <UploadImgIcon className=\"me-6\" />\r\n                    <div className=\"text-[#90868C] text-base leading-5 tracking-normal font-medium\">\r\n                        <p>اسحب الصوره الى هنا</p>\r\n                        <p className=\"my-4\">أو</p>\r\n                        <SecondaryButton type=\"button\">تصفح الجهاز</SecondaryButton>\r\n                    </div>\r\n                </div>\r\n                <div className=\"flex flex-row justify-center gap-2 border-2 border-dashed border-[#B6B5BF] rounded-lg p-8\">\r\n                    {previews?.map((preview: any, index: number) => (\r\n                        <div\r\n                            key={index}\r\n                            className=\"relative group flex flex-col items-center text-sm text-muted-foreground\"\r\n                        >\r\n                            {/* <SmallUploadImgIcon className=\"text-[#90868C]\" /> */}\r\n                            <img\r\n                                src={preview}\r\n                                alt={`Preview ${index + 1}`}\r\n                                className=\"w-20 h-20 object-cover rounded-md\"\r\n                            />\r\n                            <button\r\n                                type=\"button\"\r\n                                onClick={(e) => {\r\n                                    e.stopPropagation();\r\n                                    removeImage(index);\r\n                                }}\r\n                                className=\"absolute w-6 h-6 top-1 start-1 bg-red-error-600 text-white-blue-50 p-1 rounded-full text-xs opacity-0 group-hover:opacity-100 transition-opacity\"\r\n                            >\r\n                                ✕\r\n                            </button>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n                <div>\r\n                    <ul className=\"text-xs leading-[22.5px] font-medium tracking-normal text-start text-[#90868C] list-[square] marker:text-[8px] ps-5 mt-2\">\r\n                        <li>\r\n                            اقصى حجم <span className=\"font-bold ms-[2px]\">{maxSize / 1024 / 1024}MB</span>\r\n                        </li>\r\n                        <li>\r\n                            الملفات المسموح بها<span className=\"font-bold ms-[2px]\">jpeg , png , jpg, gif, svg</span>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":["UploadImgIcon","width","height","className","color","jsx","jsxs","ImgInputForm","name","label","maxSize","multiple","editImages","control","setValue","watch","getValues","useFormContext","imgPreviews","setImgPreviews","useState","removeImage","index","currentFiles","newFiles","_","i","prev","onDrop","acceptedFiles","currentValue","combinedFiles","removeDuplicates","newPreviews","file","images","useEffect","FormField","field","FormItem","FormLabel","FormControl","ImgFileUploader","files","FormMessage","previews","getRootProps","getInputProps","useDropzone","SecondaryButton","preview","e"],"mappings":"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"}