import{j as e,r as n,b as y,e as j,t as C,k}from"./index-CG21Kl6L.js";import{S as w}from"./StatisticsCards-BHRSrF9_.js";import{U as f}from"./UserMinusIcon-Lbr4fSWK.js";import{U as N}from"./UnderlineHeading-6dFpHrZu.js";import{P as L}from"./PrimaryButton-CqSNXaEZ.js";import{C as D}from"./Dropdown-9zztjWeh.js";import{A as M}from"./AddIcon-tb5zEqxV.js";import{P as V}from"./PlusIcon-Bj6ya-hJ.js";import{D as S,a as F,b as E}from"./dialog-BNTutzAA.js";import{z as u,u as A,t as T,F as Z}from"./index-CVKxZN6H.js";import{a as _,b as I}from"./axios-utils-DWLLXNPU.js";import{S as P}from"./SecondaryButton-C8PAsQMM.js";import{T as q}from"./TextAreaInputForm-DDtw8I0I.js";import{S as B}from"./SelectInputForm-nhbT-0nq.js";import{D as H}from"./DateInputForm-Bteneik4.js";import{T as b}from"./TextInputForm-ML6m37PA.js";import{f as R}from"./format-D6Kkl3rb.js";import{T as W}from"./TrashIcon-B-yPmS4K.js";import{F as K}from"./FileDownloadIcon-BUq89Jnb.js";import{D as U}from"./DeletePopup-Cp9aF88T.js";import{D as G}from"./data-table-q2Kgxvnv.js";import"./Combination-CF6sjIQ5.js";import"./index-DKOmws7K.js";import"./index-CVxAI6rk.js";import"./index-BuoIejD9.js";import"./index-Iw2dua5F.js";import"./chevron-right-ofNdHrp6.js";import"./textarea-C5nh8QJ5.js";import"./select-cvP0Sup0.js";import"./popover-GWOz0UH_.js";import"./chevron-left-Dd3efAkK.js";import"./CalendarIcon-vdySZVWB.js";import"./table-VHWg2bm3.js";import"./CustomPagination-CEeDQMqo.js";import"./pagination-B5K0ldzO.js";function J(){const t=[{text:"عدد الطلبات",icon:e.jsx(f,{}),num:8,percent:-.3},{text:"تم الاصدار",icon:e.jsx(f,{}),num:8,percent:-.3},{text:"قيد المراجعة",icon:e.jsx(f,{}),num:3,percent:-.3},{text:"ملغي",icon:e.jsx(f,{}),num:3,percent:-.3}];return e.jsx(w,{cards:t,numJustifyStart:!0})}const O=u.object({date:u.date(),installments:u.string().min(1,"Installments field is required."),loan_type:u.string().min(1,"Loan type field is required."),amount:u.string().min(1,"Amount field is required.")});function z({setShowPopup:t}){const[a,s]=n.useState(null),[d,o]=n.useState(!1),i=JSON.parse(y.get("user")||"{}").id,r=A({resolver:T(O)}),c=async h=>{var l,g;o(!0),s(null);const x={...h,employee_id:i,data:R(h.date,"yyyy-MM-dd")};try{await _({endpoint:j.loan.create,body:x,config:{headers:{"Content-Type":"multipart/form-data"}}}),C("تم اضافة الطلب بنجاح"),t(!1)}catch(p){if((g=(l=p.response)==null?void 0:l.data)!=null&&g.errors)Object.entries(p.response.data.errors).forEach(([m,v])=>{r.setError(m,{type:"manual",message:v.join(", ")})});else{let m="حدث خطأ أثناء إرسال البيانات. يرجى المحاولة مرة أخرى.";p.response?m=p.response.data.msg||m:p.request&&(m="تعذر الاتصال بالخادم. يرجى التحقق من اتصالك بالإنترنت."),s(m)}}finally{o(!1)}};return e.jsx(e.Fragment,{children:e.jsx(Z,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(c),className:"mt-6",children:[a&&e.jsx("div",{className:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"",children:a}),e.jsx("button",{onClick:()=>s(null),className:"text-red-700 hover:text-red-900",children:"×"})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-6",children:[e.jsx(B,{name:"loan_type",label:"نوع القرض",options:[{value:"sick",name:"قرض طارئ"},{value:"annual",name:"قرض سنوي"},{value:"religious",name:"قرض ادياني"},{value:"other",name:"قرض أخرى"}],placeholder:"اختر نوع القرض"}),e.jsx(b,{name:"amount",label:"القيمة",placeholder:"100",type:"number"}),e.jsx(H,{name:"date",label:"التاريخ",placeholder:"2004/04/30"}),e.jsx(b,{name:"installments",label:"المدة",placeholder:"2004/04/30"})]}),e.jsx(q,{className:"flex flex-col min-h-[157px]",name:"reason",label:"السبب",placeholder:"اكتب السبب"}),e.jsxs("div",{className:"flex flex-row gap-4 mt-12",children:[e.jsx(P,{onClick:()=>t(!1),type:"button",className:"w-full text-base leading-5 tracking-normal py-[10px] font-medium",children:"إلغاء"}),e.jsx(L,{type:"submit",className:"w-full text-base leading-5 tracking-normal font-medium py-[10px]",children:d?"جاري الحفظ...":"تقديم الطلب"})]})]})})})}function Q({open:t,setShowPopup:a}){return e.jsxs(S,{open:t,children:[e.jsx("div",{className:k("fixed inset-0",{"!hidden":!t})}),e.jsxs(F,{showCloseButton:!1,className:"max-w-[623px] rounded-lg p-8 bg-white-blue-50 font-cairo gap-0 [&_[aria-label=Close]]:opacity-0",children:[e.jsxs(E,{className:"flex flex-col items-center",children:[e.jsx("div",{className:"flex flex-row justify-between mb-4 w-full",children:e.jsxs("div",{className:"flex flex-row gap-2",children:[e.jsx(V,{}),e.jsx("h3",{className:"text-[22px] font-bold text-primery-blue-500",children:" طلب قرض"})]})}),e.jsx("div",{className:"w-full border-b border-[#D1D1D1] !mt-0"})]}),e.jsx(z,{setShowPopup:a})]})]})}function X({globalFilter:t,setGlobalFilter:a,filters:s,setFilters:d}){const[o,i]=n.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col p-2 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx(N,{text:"قائمة طلبات القروض"}),e.jsxs("div",{className:"flex flex-row items-center gap-4",children:[e.jsx("div",{children:e.jsxs(L,{onClick:()=>i(!0),className:"text-base px-[14px] xl:py-2 leading-5 font-semibold font-cairo tracking-normal",children:[e.jsx(M,{}),e.jsx("p",{className:"text-xs tracking-normal font-normal leading-[22.49px]",children:"انشاء طلب قرض"})]})}),e.jsx("div",{className:"flex fle-row items-center gap-4",children:e.jsx(D,{value:(s==null?void 0:s.status)||"",onValueChange:r=>{d({...s,status:r})},placeholder:"القائمة",width:"min-w-[77px]",options:[{label:"القائمة",value:""},{label:"متاح",value:"active"},{label:"غير متاح",value:"not active"}]})})]})]}),e.jsx(Q,{open:o,setShowPopup:i})]})}const Y=({row:t})=>{const[a,s]=n.useState(!1),d=()=>{s(!0)},o=()=>{s(!1)},i=()=>{var r,c;C.success("تم حذف الفرع بنجاح"),s(!1),(c=(r=t.original).refreshTable)==null||c.call(r)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-row justify-center gap-6",children:[e.jsx(K,{className:"cursor-pointer text-primery-blue-400"}),e.jsx("button",{onClick:d,children:e.jsx(W,{className:"text-[#E81E1E] cursor-pointer"})})]}),a&&e.jsx(U,{open:a,text:"هل أنت متاكد أنك تريد حذف هذا الفرع",endpoint:j.holiday.delete+t.original.id,handleCancel:o,handleSuccess:i})]})},$=[{accessorKey:"id",header:()=>e.jsx("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:"الرقم"}),cell:({row:t})=>e.jsx("div",{className:"text-sm text-[#625E74] font-normal tracking-normal leading-[26.4px]",children:t.original.id})},{accessorKey:"loan_type",header:()=>e.jsx("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:"نوع القرض"}),cell:({row:t})=>e.jsx("div",{className:"text-sm text-[#625E74] font-normal tracking-normal leading-[26.4px]",children:t.original.loan_type})},{accessorKey:"name",header:()=>e.jsx("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:"القيمة"}),cell:({row:t})=>e.jsx("div",{className:"text-sm  font-normal tracking-normal leading-[26.4px]",children:t.original.amount})},{accessorKey:"data",header:()=>e.jsx("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:"التاريخ"}),cell:({row:t})=>e.jsx("div",{className:"text-xs font-medium tracking-normal leading-[115%]",children:t.original.data})},{accessorKey:"status",header:()=>e.jsxs("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:["الحالة"," "]}),cell:({row:t})=>e.jsx("div",{className:"text-xs text-white-blue-50 font-medium tracking-normal leading-[115%]",children:e.jsx("p",{className:"bg-[#22AD5C] p-1 w-fit rounded-sm",children:t.original.status})})},{accessorKey:"status",header:()=>e.jsx("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:"الملاحظات"}),cell:({row:t})=>e.jsx("div",{className:"text-xs font-medium tracking-normal leading-[115%]",children:t.original.reason})},{id:"actions",cell:({row:t})=>e.jsx(Y,{row:t})}];function ee(){const[t,a]=n.useState([]),[s,d]=n.useState(0),[o,i]=n.useState(0),[r,c]=n.useState(!1),h=n.useCallback(async x=>{c(!0);try{const l=await I({endpoint:j.loan.list,queryParams:{page:x.pageIndex+1,...x.filters,search:x.globalFilter}});a(l.data.data.data),d(Math.ceil(l.data.data.pagination.total/10)),i(l.data.data.pagination.total)}catch(l){console.error("Error fetching data:",l)}finally{c(!1)}},[]);return e.jsx("div",{className:"mt-6 mb-20 rounded-lg border border-[#E8E7EA] shadow-[0px_4px_4px_-1px_#0C0C0D0D,0px_4px_4px_-1px_#0C0C0D1A]",children:e.jsx(G,{columns:$,data:t,pageCount:s,totalCount:o,onFetchData:h,DataTableToolbar:X,isLoading:r})})}const te=[{title:"قرض شخصي",amount:"100,000 ريال",duration:"حتى 48 شهر",rate:"2.5%",icon:e.jsx("div",{className:"bg-[#B6CDE2] rounded-xl p-3",children:e.jsxs("svg",{width:"46",height:"46",viewBox:"0 0 46 46",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M24.9036 42.0495H9.66546C5.85593 42.0495 3.95117 40.1447 3.95117 36.3352V21.0971C3.95117 17.2876 5.85593 15.3828 9.66546 15.3828H19.1893V36.3352C19.1893 40.1447 21.094 42.0495 24.9036 42.0495Z",stroke:"#145DA0",strokeWidth:"1.71429",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M19.3988 7.76562C19.2465 8.33705 19.1893 8.96562 19.1893 9.67039V15.3847H9.66553V11.5751C9.66553 9.47991 11.3798 7.76562 13.4751 7.76562H19.3988Z",stroke:"#145DA0",strokeWidth:"1.71429",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M26.8081 15.3828V24.9066",stroke:"#145DA0",strokeWidth:"1.71429",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M34.4287 15.3828V24.9066",stroke:"#145DA0",strokeWidth:"1.71429",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M32.5224 32.5234H28.7129C27.6652 32.5234 26.8081 33.3806 26.8081 34.4282V42.0472H34.4272V34.4282C34.4272 33.3806 33.57 32.5234 32.5224 32.5234Z",stroke:"#145DA0",strokeWidth:"1.71429",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M11.5718 24.9062V32.5253",stroke:"#145DA0",strokeWidth:"1.71429",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M19.1924 36.3341V9.66741C19.1924 5.85789 21.0971 3.95312 24.9067 3.95312H36.3352C40.1448 3.95312 42.0495 5.85789 42.0495 9.66741V36.3341C42.0495 40.1436 40.1448 42.0484 36.3352 42.0484H24.9067C21.0971 42.0484 19.1924 40.1436 19.1924 36.3341Z",stroke:"#145DA0",strokeWidth:"1.71429",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"})]})}),maxLabel:"المبلغ الأقصى:",durationLabel:"المدة:",rateLabel:"معدل العائد:"},{title:"قرض سيارة",amount:"150,000 ريال",duration:"حتى 60 شهر",rate:"3%",icon:e.jsx("div",{className:"bg-[#B6CDE2] rounded-xl p-3",children:e.jsx("svg",{width:"46",height:"46",viewBox:"0 0 46 46",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M42.7861 10.7857C42.7861 10.7143 42.7147 10.7143 42.7147 10.6429C42.2147 9.92857 41.5004 9.28571 40.6433 8.92857L25.2147 1.85714C23.7861 1.21429 22.2147 1.21429 20.7861 1.85714L5.42899 8.92857C4.57185 9.28571 3.92899 9.92857 3.35756 10.5714C3.28613 10.6429 3.2147 10.7143 3.14328 10.7857C3.14328 10.8571 3.07185 10.8571 3.07185 10.9286C2.57185 11.7857 2.28613 12.7143 2.28613 13.7143V31.5714C2.28613 33.5714 3.42899 35.4286 5.2147 36.2857L20.5718 44C21.2861 44.3571 22.1433 44.5714 22.929 44.5714C23.7147 44.5714 24.5718 44.3571 25.2861 44L40.6433 36.2857C42.429 35.3571 43.5718 33.5714 43.5718 31.5714V13.7143C43.7147 12.6429 43.3576 11.6429 42.7861 10.7857ZM22.1433 4.78571C22.429 4.64286 22.7147 4.57143 23.0004 4.57143C23.2861 4.57143 23.5718 4.64286 23.8576 4.78571L38.2861 11.4286L32.5719 14.2143L17.7861 6.78571L22.1433 4.78571ZM23.0004 18.9286L7.7147 11.4286L14.0718 8.5L29.0004 16L23.0004 18.9286ZM6.64328 33.4286C5.92899 33.0714 5.50042 32.3571 5.50042 31.5714V13.9286L21.3576 21.7143V40.8571L6.64328 33.4286ZM39.3576 33.4286L24.5718 40.8571V21.7143L30.8576 18.6429V24.4286C30.8576 25.2857 31.5718 26 32.429 26C33.2861 26 34.0004 25.2857 34.0004 24.4286V17.0714L40.3576 13.9286V31.5714C40.5004 32.3571 40.0004 33.0714 39.3576 33.4286Z",fill:"#082743"})})}),maxLabel:"المبلغ الأقصى:",durationLabel:"المدة:",rateLabel:"معدل العائد:"},{title:"قرض سكني",amount:"500,000 ريال",duration:"حتى 240 شهر",rate:"3.5%",icon:e.jsx("div",{className:"bg-[#B6CDE2] rounded-xl p-3",children:e.jsx("svg",{width:"46",height:"46",viewBox:"0 0 46 46",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M42.7861 10.7857C42.7861 10.7143 42.7147 10.7143 42.7147 10.6429C42.2147 9.92857 41.5004 9.28571 40.6433 8.92857L25.2147 1.85714C23.7861 1.21429 22.2147 1.21429 20.7861 1.85714L5.42899 8.92857C4.57185 9.28571 3.92899 9.92857 3.35756 10.5714C3.28613 10.6429 3.2147 10.7143 3.14328 10.7857C3.14328 10.8571 3.07185 10.8571 3.07185 10.9286C2.57185 11.7857 2.28613 12.7143 2.28613 13.7143V31.5714C2.28613 33.5714 3.42899 35.4286 5.2147 36.2857L20.5718 44C21.2861 44.3571 22.1433 44.5714 22.929 44.5714C23.7147 44.5714 24.5718 44.3571 25.2861 44L40.6433 36.2857C42.429 35.3571 43.5718 33.5714 43.5718 31.5714V13.7143C43.7147 12.6429 43.3576 11.6429 42.7861 10.7857ZM22.1433 4.78571C22.429 4.64286 22.7147 4.57143 23.0004 4.57143C23.2861 4.57143 23.5718 4.64286 23.8576 4.78571L38.2861 11.4286L32.5719 14.2143L17.7861 6.78571L22.1433 4.78571ZM23.0004 18.9286L7.7147 11.4286L14.0718 8.5L29.0004 16L23.0004 18.9286ZM6.64328 33.4286C5.92899 33.0714 5.50042 32.3571 5.50042 31.5714V13.9286L21.3576 21.7143V40.8571L6.64328 33.4286ZM39.3576 33.4286L24.5718 40.8571V21.7143L30.8576 18.6429V24.4286C30.8576 25.2857 31.5718 26 32.429 26C33.2861 26 34.0004 25.2857 34.0004 24.4286V17.0714L40.3576 13.9286V31.5714C40.5004 32.3571 40.0004 33.0714 39.3576 33.4286Z",fill:"#082743"})})}),maxLabel:"المبلغ الأقصى:",durationLabel:"المدة:",rateLabel:"معدل العائد:"}];function se(){return e.jsx("div",{className:"flex flex-wrap gap-6 w-full mt-6",children:te.map((t,a)=>e.jsxs("div",{className:"flex-1 rounded-2xl border border-[#B6CDE2] bg-[#F4F8FB] p-6 flex items-center justify-between gap-2 shadow-sm min-w-[260px]",children:[e.jsxs("div",{className:"text-sm text-gray-700 text-start font-extrabold",children:[e.jsx("div",{className:"font-bold text-xl text-start mt-2 mb-1",children:t.title}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold",children:t.maxLabel})," ",t.amount]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold",children:t.durationLabel})," ",t.duration]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold",children:t.rateLabel})," ",t.rate]})]}),t.icon]},a))})}function ae(){return e.jsxs("div",{className:"w-full mt-6",children:[e.jsx(J,{}),e.jsx(se,{}),e.jsx(ee,{})]})}function qe(){return e.jsx("div",{className:"w-full mt-6 mb-24",children:e.jsx(ae,{})})}export{qe as default};
//# sourceMappingURL=LoansRequests.page-pLKM6UC7.js.map
