import{j as e,r as o,e as l}from"./index-BYyXun5x.js";import{C as d}from"./CarsPieStatistics-ChOQ4cEv.js";import{U as x}from"./UnderlineHeading-ByjNC2ge.js";import{C as f}from"./Dropdown-DI0KLpyc.js";import{C as u,a as h,b,B as j}from"./chart-Cu57hkrX.js";import{B as y,C,X as g,Y as S}from"./BarChart-B8FctPev.js";import{b as m}from"./axios-utils-AvuZ81CO.js";import{S as v}from"./SettingIcon-Cac9EoGa.js";import{U as w,C as k}from"./CarIcon-SD5csyUe.js";import{C as _}from"./CalendarIcon-BQwuaLHi.js";import{S as B}from"./StatisticsCards-B_8i9ipX.js";import"./PieChart-C-LOPB26.js";import"./PieChart-CfdriHgv.js";import"./List-BAalZDAy.js";import"./Combination-cklTRtAe.js";import"./index-CV4wEvKw.js";import"./index-Gk0NKYh3.js";import"./index-CLYNl1a9.js";import"./index-DEdjAgo6.js";import"./chevron-right-CymCusjh.js";import"./index-Cod7pasn.js";const N=t=>t>=1e9?`${(t/1e9).toFixed(1)}B`:t>=1e6?`${(t/1e6).toFixed(1)}M`:t>=1e3?`${(t/1e3).toFixed(1)}K`:t===0?null:t;function L({barLabelColor:t="#000",chartConfig:r,chartData:i}){return e.jsx("div",{className:"min-w-[508px] min-h-[260px]",children:e.jsx(u,{config:r,children:e.jsxs(y,{margin:{top:0,right:0,left:0,bottom:0},accessibilityLayer:!0,data:i,barCategoryGap:105,children:[e.jsx(C,{vertical:!1,strokeDasharray:"5 5"}),e.jsx(g,{dataKey:"days",tickLine:!1,tickMargin:10,axisLine:!0,tickFormatter:a=>{var s;return a&&((s=r[a])==null?void 0:s.label)},tick:{fill:"#000000B2"}}),e.jsx(S,{axisLine:!0,tickLine:!1,tick:{fill:"#6b7280",textAnchor:"start"}}),e.jsx(h,{formatter:a=>a,cursor:!1,content:e.jsx(b,{hideLabel:!0})}),e.jsx(j,{dataKey:"visitors",strokeWidth:2,radius:[9999,9999,0,0],barSize:68,activeIndex:2,background:{fill:"#D6DBED",opacity:.4},label:{position:"insideTop",fill:t,opacity:.7,fontSize:12,fontWeight:"bold",formatter:N}})]})})})}const D=()=>{const[t,r]=o.useState(null),[i,a]=o.useState("");o.useEffect(()=>{(async()=>{try{const n=await m({endpoint:l.maintenance.dashboardChart,queryParams:{period:i}});r(n.data.data.maintenance_counts)}catch{r(null)}})()},[i]);let s=[];t&&(s=Object.entries(t).map(([c,n])=>({days:c,visitors:n,fill:`var(--color-${c})`})));const p={visitors:{label:"Visitors"},in_progress:{label:"معطل",color:"hsl(var(--chart-5))"},completed:{label:"جاري الصيانة",color:"hsl(var(--chart-4))"},broken:{label:"تم الاصلاح",color:"hsl(var(--chart-1))"}};return e.jsxs("div",{className:"shadow-[0px_2px_12px_0px_#14142B14] rounded-[0.5rem]",children:[e.jsxs("div",{className:"px-4 pt-4 flex flex-row justify-between mb-10",children:[e.jsx(x,{text:"تقرير عن حالات الصيانه"}),e.jsx(f,{options:[{label:"يومي",value:"daily"},{label:"أسبوعي ",value:"weekly "},{label:"شهري",value:"monthly"},{label:"سنوي",value:"yearly"}],value:i,onValueChange:a,placeholder:"المدة",width:"min-w-[101px]"})]}),e.jsx("div",{className:"ps-6 pb-4 flex flex-row items-center justify-center gap-6",children:e.jsx(L,{chartData:s,chartConfig:p})})]})},Q=()=>{const[t,r]=o.useState(null);o.useEffect(()=>{(async()=>{try{const s=await m({endpoint:l.maintenance.dashboard});r(s.data.data)}catch{r(null)}})()},[]);const i=[{text:"زيارة خلال الشهر",icon:e.jsx(_,{}),num:t==null?void 0:t.monthly_maintenances,percent:0},{text:"معطل",icon:e.jsx(w,{}),num:t==null?void 0:t.broken_count,percent:0},{text:"جاري الصيانة",icon:e.jsx(v,{}),num:t==null?void 0:t.in_progress_count,percent:0,negative:!0},{text:"تم تصليح",icon:e.jsx(k,{}),num:t==null?void 0:t.completed_count,percent:0}];return e.jsxs("div",{className:"mt-6 w-full",children:[e.jsx(B,{cards:i}),e.jsxs("div",{className:"mt-6 grid custom-grid-big gap-6 justify-center sm:justify-between",children:[e.jsx(d,{}),e.jsx(D,{})]})]})};export{Q as default};
//# sourceMappingURL=Maintenance.page-s7fyeJVA.js.map
