import{j as e,d as u,r as i,e as p,t as h,I as g,S as f,L as b}from"./index-CG21Kl6L.js";import{b as j}from"./axios-utils-DWLLXNPU.js";import{T as v}from"./TrashIcon-B-yPmS4K.js";import{E as y}from"./EditIcon-DiFVlmg6.js";import{D as N}from"./DeletePopup-Cp9aF88T.js";import{f as w}from"./format-D6Kkl3rb.js";import{U as C}from"./UnderlineHeading-6dFpHrZu.js";import{P as k}from"./PrimaryButton-CqSNXaEZ.js";import{A as _}from"./AddIcon-tb5zEqxV.js";import{A as D}from"./ArrowBackIcon-D47HpoSm.js";import{C as E}from"./Dropdown-9zztjWeh.js";import{C as I}from"./CloseIcon-BTJxsa4F.js";import{D as S}from"./data-table-q2Kgxvnv.js";import{S as P}from"./SettingIcon-DkjSzmqf.js";import{U as A,C as T}from"./CarIcon-CpZFcRsM.js";import{C as L}from"./CalendarIcon-D_I8iYE_.js";import{S as K}from"./StatisticsCards-BHRSrF9_.js";import"./SecondaryButton-C8PAsQMM.js";import"./dialog-BNTutzAA.js";import"./Combination-CF6sjIQ5.js";import"./index-DKOmws7K.js";import"./index-BuoIejD9.js";import"./index-CVxAI6rk.js";import"./index-Iw2dua5F.js";import"./chevron-right-ofNdHrp6.js";import"./table-VHWg2bm3.js";import"./CustomPagination-CEeDQMqo.js";import"./pagination-B5K0ldzO.js";import"./chevron-left-Dd3efAkK.js";const M=({row:t})=>{const r=u(),[a,n]=i.useState(!1),s=()=>{n(!0)},m=()=>{n(!1)},x=()=>{var l,c;h.error("تم حذف طلب الصيانة بنجاح"),n(!1),(c=(l=t.original).refreshTable)==null||c.call(l)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-7",children:[e.jsx("button",{onClick:()=>r(`/maintenance/${t.original.id}/edit`),className:"text-primary hover:text-primary/80",children:e.jsx(y,{className:"text-primery-blue-400"})}),e.jsx("button",{onClick:s,children:e.jsx(v,{className:"text-[#E81E1E] cursor-pointer"})})]}),a&&e.jsx(N,{open:a,text:"هل أنت متاكد أنك تريد حذف طلب الصيانة",endpoint:p.maintenance.delete+t.original.id,handleCancel:m,handleSuccess:x})]})},F=[{accessorKey:"name",header:()=>e.jsx("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:"اسم السيارة والموديل"}),cell:({row:t})=>e.jsx("div",{className:"flex flex-row items-center justify-start gap-2",children:e.jsxs("div",{children:[e.jsx("div",{children:`${t.original.vehicle.brand.name} ${t.original.vehicle.brand_model.name}`}),e.jsx("div",{children:t.original.vehicle.make_year})]})})},{accessorKey:"status",header:()=>e.jsx("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:"الحالة"}),cell:({row:t})=>e.jsx("div",{className:"p-1 w-fit bg-[#F59E0B] rounded text-xs text-white-blue-50 font-medium tracking-normal leading-[13.8px]",children:"فى الصيانة"})},{accessorKey:"date",header:()=>e.jsx("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:"التاريخ"}),cell:({row:t})=>e.jsx("div",{className:"text-sm text-[#625E74] font-normal tracking-normal leading-[26.4px]",children:w(t.original.created_at,"yyyy-MM-dd")})},{accessorKey:"service",header:()=>e.jsx("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:"الخدمة"}),cell:({row:t})=>e.jsx("div",{className:"text-sm text-[#625E74] font-normal tracking-normal leading-[26.4px]",children:t.original.maintenance_type})},{accessorKey:"location",header:()=>e.jsx("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:"المكان"}),cell:({row:t})=>{var r;return e.jsx("div",{className:"text-sm text-[#625E74] font-normal tracking-normal leading-[26.4px]",children:(r=t.original.maintenance_center)==null?void 0:r.name})}},{id:"actions",cell:({row:t})=>e.jsx(M,{row:t})}];function U({globalFilter:t,setGlobalFilter:r,filters:a,setFilters:n}){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col p-2 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx(C,{text:"قائمة الصيانات"}),e.jsxs("div",{className:"flex flex-row items-center gap-4",children:[e.jsxs("div",{className:"flex flex-row items-center w-[287px] border border-white-blue-300 bg-white-blue-50 h-[36px] p-2 rounded-[6px]",children:[e.jsx(g,{placeholder:"ابحث باسم السيارة",value:t,onChange:s=>r(s.target.value),className:"text-white-blue-800 p-0 tracking-normal text-xs lg:text-sm lg:leading-[16.8px] border-none outline-none focus-visible:ring-0 placeholder:text-white-blue-800"}),e.jsx("button",{className:"bg-transparent border-none",children:e.jsx(f,{className:"text-white-blue-800"})})]}),e.jsxs("div",{className:"flex fle-row items-center gap-4",children:[e.jsx(E,{value:(a==null?void 0:a.status)||"",onValueChange:s=>{n({...a,status:s})},placeholder:"الحالة",width:"min-w-[77px]",options:[{label:"متاح",value:"active"},{label:"غير متاح",value:"not active"}]}),e.jsxs("button",{onClick:()=>n({}),className:"flex flex-row items-center gap-2 h-[22px] p-0 bg-white-blue-50 hover:bg-white-blue-200 border-none shadow-none text-primery-blue-500 font-medium text-xs leading-[22.49px] tracking-normal",children:[e.jsx(I,{className:"!w-[10px] !h-[10px]"}),"إلغاء التصفية"]})]}),e.jsx("div",{children:e.jsx(b,{to:"/maintenance/order",children:e.jsxs(k,{className:"text-base px-[14px] xl:py-2 leading-5 font-semibold font-cairo tracking-normal",children:[e.jsx(_,{}),e.jsx("p",{className:"text-xs tracking-normal font-normal leading-[22.49px]",children:"طلب صيانة"})]})})}),e.jsxs("div",{className:"flex items-center justify-center gap-2 px-[14px] py-2 bg-primery-blue-50 border border-primery-blue-50 shadow-[0px_1px_2px_0px_#1018280D] rounded-lg ",children:[e.jsx(D,{className:"text-primery-blue-700"}),e.jsx("p",{className:"text-xs text-primery-blue-500 tracking-normal font-normal leading-[22.49px]",children:"تصدير"})]})]})]})})}const B=()=>{const[t,r]=i.useState([]),[a,n]=i.useState(0),[s,m]=i.useState(0),[x,l]=i.useState(!1),c=i.useCallback(async d=>{l(!0);try{const o=await j({endpoint:p.maintenance.list,queryParams:{page:d.pageIndex+1,...d.filters,search:d.globalFilter}});r(o.data.data.data),n(Math.ceil(o.data.data.pagination.total/10)),m(o.data.data.pagination.total)}catch(o){console.error("Error fetching data:",o)}finally{l(!1)}},[]);return e.jsx("div",{className:"mb-10 mt-4 rounded-lg border border-[#E8E7EA] shadow-[0px_4px_4px_-1px_#0C0C0D0D,0px_4px_4px_-1px_#0C0C0D1A]",children:e.jsx(S,{columns:F,data:t,pageCount:a,totalCount:s,onFetchData:c,DataTableToolbar:U,isLoading:x})})},$=[{text:"زيارة خلال الشهر",icon:e.jsx(L,{}),num:12,percent:0},{text:"معطل",icon:e.jsx(A,{}),num:2,percent:-.3},{text:"جاري الصيانة",icon:e.jsx(P,{}),num:15,percent:.3,negative:!0},{text:"تم تصليح",icon:e.jsx(T,{}),num:1500,percent:12}],ge=()=>e.jsxs("div",{className:"mt-6 w-full",children:[e.jsx(K,{cards:$}),e.jsx("div",{className:"mt-6",children:e.jsx(B,{})})]});export{ge as default};
//# sourceMappingURL=MaintenanceList.page-DiYbPnoa.js.map
