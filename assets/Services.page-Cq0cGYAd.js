import{j as e,r as l,d as R,e as g,t as $,k as f,m as G,g as Z,I as z,S as U,L as J}from"./index-CG21Kl6L.js";import{U as j}from"./UnderlineHeading-6dFpHrZu.js";import{a as _,b as E}from"./axios-utils-DWLLXNPU.js";import{C}from"./Dropdown-9zztjWeh.js";import{P as v}from"./PrimaryButton-CqSNXaEZ.js";import{A}from"./AddIcon-tb5zEqxV.js";import{D as O,a as X,b as Y}from"./dialog-BNTutzAA.js";import{z as w,u as Q,t as W,F as ee}from"./index-CVKxZN6H.js";import{S as B}from"./SecondaryButton-C8PAsQMM.js";import{T as te}from"./TextInputForm-ML6m37PA.js";import{T as se}from"./TextAreaInputForm-DDtw8I0I.js";import{F as ae,A as le}from"./AddLetterRequest-hF0w8jAv.js";import{S as re}from"./SelectInputForm-nhbT-0nq.js";import{T as ne}from"./TimeInputForm-BFPlDzwH.js";import{D as ie}from"./DateInputForm-Bteneik4.js";import{F as M}from"./FileDownloadIcon-BUq89Jnb.js";import{E as I}from"./EditIcon-DiFVlmg6.js";import{T as V}from"./TrashIcon-B-yPmS4K.js";import{D as T}from"./data-table-q2Kgxvnv.js";import{f as F}from"./format-D6Kkl3rb.js";import{V as P}from"./ViewIcon-Bs2vSTKu.js";import{P as oe}from"./PieChart-KEh5fsAa.js";import{C as ce,a as de,b as xe,c as me,d as ue,B as D}from"./chart-kIhB8LJL.js";import{B as pe,C as he,X as be,Y as fe}from"./BarChart-ByOBWvPW.js";import{S as ge}from"./SubtleButton-CIWvV8XM.js";import{T as je}from"./textarea-C5nh8QJ5.js";import{u as ve}from"./useDebounce-YbtC9wqL.js";import"./Combination-CF6sjIQ5.js";import"./index-DKOmws7K.js";import"./index-CVxAI6rk.js";import"./index-BuoIejD9.js";import"./index-Iw2dua5F.js";import"./chevron-right-ofNdHrp6.js";import"./index-BrlmtnpO.js";import"./index-CoxrFmRa.js";import"./removeDuplicated-BgoSiW5F.js";import"./select-cvP0Sup0.js";import"./popover-GWOz0UH_.js";import"./chevron-left-Dd3efAkK.js";import"./CalendarIcon-vdySZVWB.js";import"./table-VHWg2bm3.js";import"./CustomPagination-CEeDQMqo.js";import"./pagination-B5K0ldzO.js";import"./PieChart-DYThle-m.js";function ye(){return e.jsx("div",{className:"mb-6",children:e.jsx(j,{text:"الخدمات"})})}const Ne=w.object({service_type:w.string().min(1,"This field is required"),purpose:w.string().min(1,"This field is required"),time:w.string().min(1,"This field is required"),date:w.date({required_error:"This field is required"}),note:w.string().min(1,"This field is required"),attachment:w.instanceof(File,{message:"File is required"})});function we({employee:t,setAskForService:r,handleRefreshTable:a}){const[s,n]=l.useState(null),[o,c]=l.useState(!1),d=R(),p=l.useMemo(()=>({}),[t]),x=Q({resolver:W(Ne),defaultValues:p}),i=async m=>{var y,k;c(!0),n(null);try{await _({endpoint:t?g.extraServices.update+t.id:g.extraServices.create,body:{...m,attachment:""},config:{headers:{"Content-Type":"multipart/form-data"}}}),$("تم اضافة الطلب بنجاح"),r(!1),a(),d("/self-services/services")}catch(b){if((k=(y=b.response)==null?void 0:y.data)!=null&&k.errors)Object.entries(b.response.data.errors).forEach(([h,S])=>{x.setError(h,{type:"manual",message:S.join(", ")})});else{let h="حدث خطأ أثناء إرسال البيانات. يرجى المحاولة مرة أخرى.";b.response?h=b.response.data.msg||h:b.request&&(h="تعذر الاتصال بالخادم. يرجى التحقق من اتصالك بالإنترنت."),n(h)}}finally{c(!1)}};return e.jsx(e.Fragment,{children:e.jsx(ee,{...x,children:e.jsxs("form",{onSubmit:x.handleSubmit(i),className:"mt-6",children:[s&&e.jsx("div",{className:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"",children:s}),e.jsx("button",{onClick:()=>n(null),className:"text-red-700 hover:text-red-900",children:"×"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6",children:[e.jsx(re,{name:"service_type",label:"نوع الخدمة",placeholder:"طلب تقرير",options:[{name:"شهادة خبرة",value:"experience certificate"},{name:"طلب تدريب",value:"trainee"},{name:"حجز تذكرة طلب اجتماع",value:"meeting ticket"},{name:"استقالة",value:"resignation"},{name:"طلب تقرير",value:"report request"}]}),e.jsx(te,{name:"purpose",label:"الغرض",placeholder:"متابعة الاداء"}),e.jsx(ne,{name:"time",label:"الوقت",placeholder:"9:00 PM"}),e.jsx(ie,{name:"date",label:"التاريخ",placeholder:"2025/05/10"})]}),e.jsx(se,{className:"flex flex-col min-h-[130px]",name:"note",label:"ملاحظات اضافية",placeholder:"اكتب ملاحظات اضافية"}),e.jsx(ae,{name:"attachment",label:"رفع ملف",multiple:!1,maxSize:10*1024*1024}),e.jsxs("div",{className:"flex flex-row gap-4 mt-12",children:[e.jsx(B,{onClick:()=>r(!1),type:"button",className:"w-full text-base leading-5 tracking-normal py-[10px] font-medium",children:"إلغاء"}),e.jsx(v,{type:"submit",className:"w-full text-base leading-5 tracking-normal font-medium py-[10px]",children:o?"جاري الحفظ...":"حفظ"})]})]})})})}function ke({open:t,setAskForService:r,handleRefreshTable:a}){return e.jsxs(O,{open:t,children:[e.jsx("div",{className:f("fixed inset-0 bg-black/50",{"!hidden":!t})}),e.jsxs(X,{showCloseButton:!1,className:"max-w-[623px] rounded-lg p-8 bg-white-blue-50 font-cairo gap-0 [&_[aria-label=Close]]:opacity-0",children:[e.jsxs(Y,{className:"flex flex-col items-center",children:[e.jsx("div",{className:"flex flex-row justify-between mb-4 w-full",children:e.jsxs("div",{className:"flex flex-row gap-2",children:[e.jsxs("svg",{width:"25",height:"25",viewBox:"0 0 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M22.4688 18.5V19.5C22.4688 21.15 22.4688 22.5 19.4688 22.5H5.46875C2.46875 22.5 2.46875 21.15 2.46875 19.5V18.5C2.46875 17.95 2.91875 17.5 3.46875 17.5H21.4688C22.0187 17.5 22.4688 17.95 22.4688 18.5Z",fill:"#145DA0"}),e.jsx("path",{opacity:"0.4",d:"M21.2195 13.5V17.5H3.76953V13.5C3.76953 9.66 6.47953 6.45 10.0895 5.68C10.6295 5.56 11.1895 5.5 11.7695 5.5H13.2195C13.7995 5.5 14.3695 5.56 14.9095 5.68C18.5195 6.46 21.2195 9.66 21.2195 13.5Z",fill:"#125592"}),e.jsx("path",{d:"M15 5C15 5.24 14.97 5.46 14.91 5.68C14.37 5.56 13.8 5.5 13.22 5.5H11.77C11.19 5.5 10.63 5.56 10.09 5.68C10.03 5.46 10 5.24 10 5C10 3.62 11.12 2.5 12.5 2.5C13.88 2.5 15 3.62 15 5Z",fill:"#145DA0"}),e.jsx("path",{d:"M15.5 12.25H9.5C9.09 12.25 8.75 11.91 8.75 11.5C8.75 11.09 9.09 10.75 9.5 10.75H15.5C15.91 10.75 16.25 11.09 16.25 11.5C16.25 11.91 15.91 12.25 15.5 12.25Z",fill:"#145DA0"})]}),e.jsx("h3",{className:"text-[22px] font-bold text-primery-blue-500",children:"طلب خدمة"})]})}),e.jsx("div",{className:"w-full border-b border-[#D1D1D1] !mt-0"})]}),e.jsx(we,{setAskForService:r,handleRefreshTable:a})]})]})}function Ce({globalFilter:t,handleRefreshTable:r,setGlobalFilter:a,filters:s,setFilters:n}){const[o,c]=l.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col p-2 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx(j,{text:"قائمة الخدمات"}),e.jsxs("div",{className:"flex flex-row items-center gap-4",children:[e.jsx("div",{children:e.jsxs(v,{onClick:()=>c(!0),className:"text-base px-[14px] xl:py-2 leading-5 font-semibold font-cairo tracking-normal",children:[e.jsx(A,{}),e.jsx("p",{className:"text-xs tracking-normal font-normal leading-[22.49px]",children:"طلب خدمة"})]})}),e.jsx("div",{className:"flex fle-row items-center gap-4",children:e.jsx(C,{value:(s==null?void 0:s.status)||"",onValueChange:d=>{n({...s,status:d})},placeholder:"القائمة",width:"min-w-[77px]",options:[{label:"القائمة",value:""},{label:"متاح",value:"active"},{label:"غير متاح",value:"not active"}]})})]})]}),e.jsx(ke,{open:o,setAskForService:c,handleRefreshTable:r})]})}const Ee=({row:t})=>e.jsxs("div",{className:"flex flex-row justify-center gap-6",children:[e.jsx("button",{className:"hover:bg-white-blue-300 rounded-full p-1",children:e.jsx(M,{className:"cursor-pointer text-primery-blue-400"})}),e.jsx("button",{className:"hover:bg-white-blue-300 rounded-full p-1",children:e.jsx(I,{className:"text-primery-blue-400 cursor-pointer"})}),e.jsx("button",{className:"hover:bg-white-blue-300 rounded-full p-1",children:e.jsx(V,{className:"text-[#E81E1E] cursor-pointer"})})]}),Se=[{accessorKey:"id",header:()=>e.jsx("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:"نوع الخدمة"}),cell:({row:t})=>e.jsx("div",{className:"text-sm text-[#625E74] font-normal tracking-normal leading-[26.4px]",children:t.original.service_type})},{accessorKey:"name",header:()=>e.jsx("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:"تاريخ الطلب"}),cell:({row:t})=>e.jsx("div",{className:"text-sm text-[#625E74] font-normal tracking-normal leading-[26.4px]",children:new Date(t.original.created_at).toLocaleString()})},{accessorKey:"status",header:()=>e.jsx("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:"الحالة"}),cell:({row:t})=>e.jsx("div",{className:"text-xs text-white-blue-50 font-medium tracking-normal leading-[115%]",children:e.jsx("p",{className:"bg-[#22AD5C] p-1 w-fit rounded-sm",children:t.original.status})})},{id:"actions",header:()=>e.jsx("div",{className:"text-sm text-center px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal"}),cell:({row:t})=>e.jsx(Ee,{row:t})}];function Fe(){const[t,r]=l.useState([]),[a,s]=l.useState(0),[n,o]=l.useState(0),[c,d]=l.useState(!1),p=l.useCallback(async x=>{d(!0);try{const i=await E({endpoint:g.extraServices.list,queryParams:{page:x.pageIndex+1,...x.filters,search:x.globalFilter}});r(i.data.data.data),s(Math.ceil(i.data.data.pagination.total/10)),o(i.data.data.pagination.total)}catch(i){console.error("Error fetching data:",i)}finally{d(!1)}},[]);return e.jsx("div",{className:"mt-6 mb-20 rounded-lg border border-[#E8E7EA] shadow-[0px_4px_4px_-1px_#0C0C0D0D,0px_4px_4px_-1px_#0C0C0D1A]",children:e.jsx(T,{columns:Se,data:t,pageCount:a,totalCount:n,onFetchData:p,DataTableToolbar:Ce,isLoading:c})})}function De({globalFilter:t,setGlobalFilter:r,handleRefreshTable:a,filters:s,setFilters:n}){const[o,c]=l.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col p-2 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx(j,{text:"قائمة الخطابات"}),e.jsxs("div",{className:"flex flex-row items-center gap-4",children:[e.jsx("div",{children:e.jsxs(v,{onClick:()=>c(!0),className:"text-base px-[14px] xl:py-2 leading-5 font-semibold font-cairo tracking-normal",children:[e.jsx(A,{}),e.jsx("p",{className:"text-xs tracking-normal font-normal leading-[22.49px]",children:"طلب إصدار خطاب"})]})}),e.jsx("div",{className:"flex fle-row items-center gap-4",children:e.jsx(C,{value:(s==null?void 0:s.status)||"",onValueChange:d=>{n({...s,status:d})},placeholder:"القائمة",width:"min-w-[77px]",options:[{label:"القائمة",value:""},{label:"متاح",value:"active"},{label:"غير متاح",value:"not active"}]})})]})]}),e.jsx(le,{open:o,setAddLetter:c,handleRefreshTable:a})]})}const _e=({row:t})=>e.jsxs("div",{className:"flex flex-row justify-center gap-6",children:[e.jsx("button",{className:"hover:bg-white-blue-300 rounded-full p-1",children:e.jsx(M,{className:"cursor-pointer text-primery-blue-400"})}),e.jsx("button",{className:"hover:bg-white-blue-300 rounded-full p-1",children:e.jsx(I,{className:"text-primery-blue-400 cursor-pointer"})}),e.jsx("button",{className:"hover:bg-white-blue-300 rounded-full p-1",children:e.jsx(V,{className:"text-[#E81E1E] cursor-pointer"})})]}),Ae=[{accessorKey:"id",header:()=>e.jsx("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:"موجهه الى"}),cell:({row:t})=>e.jsx("div",{className:"text-sm text-[#625E74] font-normal tracking-normal leading-[26.4px]",children:t.original.letter_for})},{accessorKey:"name",header:()=>e.jsx("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:"تاريخ الطلب"}),cell:({row:t})=>e.jsx("div",{className:"text-sm text-[#625E74] font-normal tracking-normal leading-[26.4px]",children:F(t.original.created_at,"yyyy-MM-dd")})},{accessorKey:"name",header:()=>e.jsx("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:"تاريخ الخطاب"}),cell:({row:t})=>e.jsx("div",{className:"text-sm text-[#625E74] font-normal tracking-normal leading-[26.4px]"})},{accessorKey:"status",header:()=>e.jsx("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:"الحالة"}),cell:({row:t})=>e.jsx("div",{className:"text-xs text-white-blue-50 font-medium tracking-normal leading-[115%]",children:e.jsx("p",{className:f("p-1 w-fit rounded-sm",{"bg-[#DAF8E6] text-[#1A8245]":t.original.status==="completed","bg-[#FFFBEB] text-[#D97706]":t.original.status==="pending","bg-[#FEEBEB] text-[#E10E0E]":t.original.status==="rejected"}),children:t.original.status})})},{id:"actions",header:()=>e.jsx("div",{className:"text-sm text-center px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal"}),cell:({row:t})=>e.jsx(_e,{row:t})}];function Te(){const[t,r]=l.useState([]),[a,s]=l.useState(0),[n,o]=l.useState(0),[c,d]=l.useState(!1),p=l.useCallback(async x=>{d(!0);try{const i=await E({endpoint:g.letterRequests.paginate,queryParams:{page:x.pageIndex+1,...x.filters,search:x.globalFilter}});r(i.data.data.data),s(Math.ceil(i.data.data.pagination.total/10)),o(i.data.data.pagination.total)}catch(i){console.error("Error fetching data:",i)}finally{d(!1)}},[]);return e.jsx("div",{className:"mt-6 mb-20 rounded-lg border border-[#E8E7EA] shadow-[0px_4px_4px_-1px_#0C0C0D0D,0px_4px_4px_-1px_#0C0C0D1A]",children:e.jsx(T,{columns:Ae,data:t,pageCount:a,totalCount:n,onFetchData:p,DataTableToolbar:De,isLoading:c})})}function u({content:t,subtitle:r,title:a}){return e.jsxs("div",{className:"rounded-2xl bg-secondary-blue-50 border-s-primery-blue-600 border-r-[3px] border-y-[0.5px] border-e-[0.5px] border-y-secondary-blue-200 border-e-secondary-blue-200 px-6 py-4",children:[e.jsxs("div",{className:"flex flex-row items-center gap-2 text-nowrap",children:[e.jsx("p",{className:"font-cairo font-semibold text-[22px] leading-[150%] tracking-normal text-start text-[#333333]",children:a}),r&&e.jsx("p",{className:"font-cairo font-semibold text-[14px] leading-[150%] tracking-normal text-start text-[#333333]",children:r})]}),e.jsx("p",{className:"mt-2 font-cairo font-bold text-[22px] leading-[150%] tracking-normal text-start text-primery-blue-700",children:t})]})}function Le(){return e.jsxs("div",{className:"p-4 rounded-lg shadow-[0px_2px_12px_0px_#14142B14]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(j,{text:"الحضور والانصراف"}),e.jsxs(v,{children:[e.jsx(P,{}),"معاينة"]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-6",children:[e.jsx(u,{content:"18",title:"أيام الحضور",subtitle:"(الشهر الحالي)"}),e.jsx(u,{content:"1",title:"التأخير",subtitle:"(بالساعات)"}),e.jsx(u,{content:"2.5",title:"التأخير",subtitle:"(بالساعات)"}),e.jsx(u,{content:"6",title:"العمل الإضافي",subtitle:"(بالساعات)"})]})]})}function Be(){return e.jsxs("div",{className:"p-4 rounded-lg shadow-[0px_2px_12px_0px_#14142B14]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(j,{text:"بيانات العقد"}),e.jsxs(v,{children:[e.jsx(P,{}),"تنزيل العقد"]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-6",children:[e.jsx(u,{content:"سنتان",title:"مدة العقد"}),e.jsx(u,{content:"تاريخ انتهاء العقد",title:"15 مارس 2026"}),e.jsx(u,{content:"تاريخ التعيين",title:"15 مارس 2022"}),e.jsx(u,{content:"نوع العقد",title:"دوام كامل"})]})]})}function Me(){const[t,r]=l.useState("");return e.jsxs("div",{className:"p-4 rounded-lg shadow-[0px_2px_12px_0px_#14142B14]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(j,{text:"التأمينات الاجتماعية"}),e.jsx(C,{options:[{label:"يومي",value:"يومي"},{label:"أسبوعي ",value:"أسبوعي "},{label:"شهري",value:"شهري"},{label:"سنوي",value:"سنوي"}],value:t,onValueChange:r,placeholder:"القائمة",width:"min-w-[101px]"})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-6",children:[e.jsx(u,{content:"10057832",title:"رقم الاشتراك"}),e.jsx(u,{content:"1,850 ر.س",title:"قيمة الاشتراك",subtitle:"شهري"}),e.jsx(u,{content:"15 مارس 2022",title:"تاريخ التعيين"}),e.jsx(u,{content:"دوام كامل",title:"نوع العقد"})]})]})}const Ie=({text:t,className:r})=>e.jsx("div",{className:f("flex flex-col gap-6 ps-[19.5px]",r),children:t.map((a,s)=>e.jsxs("div",{className:"flex flex-row w-max items-center justify-start gap-3",children:[e.jsx("div",{className:f("w-3 h-3 rounded-full",{"bg-primery-blue-100":s+1===1,"bg-primery-blue-400":s+1===2,"bg-chart-5":s+1===3,"bg-chart-4":s+1===4,"bg-chart-3":s+1===5})}),e.jsx("p",{className:"flex flex-row font-cairo font-medium text-white-blue-900 text-[14px] leading-[16.8px] tracking-normal text-start",children:a})]},s))});function Ve(){const[t,r]=l.useState(null),[a,s]=l.useState("");let n=[],o=[];o=["المتبقي","المدفوع"],n=[{days:"المدفوع",visitors:50,fill:"var(--color-available)"},{days:"المتبقي",visitors:50,fill:"var(--color-leased)"}];const c={visitors:{label:"Visitors"},available:{label:"المدفوع",color:"hsl(var(--primery-blue-400))"},leased:{label:"المتبقي",color:"hsl(var(--primery-blue-100))"}};return e.jsxs("div",{className:"p-4 rounded-lg shadow-[0px_2px_12px_0px_#14142B14]",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx(j,{text:"القروض"})}),e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-6",children:[e.jsx(u,{content:"50,000 ر.س",title:"إجمالي القروض"}),e.jsx(u,{content:"35,000 ر.س",title:"المبلغ المتبقي"}),e.jsx(u,{content:"1,250 ر.س",title:"القسط الشهري"}),e.jsx(u,{content:"28",title:"عدد الأقساط",subtitle:"المتبقي"})]}),e.jsxs("div",{className:"flex flex-row items-center justify-between mb-8 mt-10",children:[e.jsx(Ie,{text:o}),e.jsx(oe,{chartData:n,chartConfig:c})]})]})}function Pe({globalFilter:t,setGlobalFilter:r,filters:a,setFilters:s}){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col p-2 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx(j,{text:"الطلبات"}),e.jsx("div",{className:"flex flex-row items-center gap-4",children:e.jsx("div",{className:"flex fle-row items-center gap-4",children:e.jsx(C,{value:(a==null?void 0:a.status)||"",onValueChange:n=>{s({...a,status:n})},placeholder:"الحالة",width:"min-w-[77px]",options:[{label:"الحالة",value:""},{label:"متاح",value:"active"},{label:"غير متاح",value:"not active"}]})})})]})})}const qe=[{accessorKey:"name",header:()=>e.jsx("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:"نوع الطلب"}),cell:({row:t})=>e.jsx("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:"محمد علاء"})},{accessorKey:"status",header:()=>e.jsx("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:"تاريخ التقديم"}),cell:({row:t})=>e.jsx("div",{className:"text-sm text-[#625E74] font-normal tracking-normal leading-[26.4px]",children:"11/6/2025"})},{accessorKey:"location",header:()=>e.jsx("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:"الحالة"}),cell:({row:t})=>e.jsx("div",{className:"text-xs font-medium tracking-normal leading-[115%]",children:e.jsx("p",{className:f("p-1 w-fit rounded-sm",{"bg-[#DAF8E6] text-[#1A8245]":t.original.status==="completed","bg-[#F59E0B] text-white-blue-50":!0,"bg-[#FEEBEB] text-[#E10E0E]":t.original.status==="rejected"}),children:"قيد الإجراء"})})}];function Ke({className:t}){const[r,a]=l.useState([]),[s,n]=l.useState(0),[o,c]=l.useState(0),[d,p]=l.useState(!1),x=l.useCallback(async i=>{p(!0);try{const m=await E({endpoint:g.employee.attendance,queryParams:{page:i.pageIndex+1,...i.filters,search:i.globalFilter}});a(m.data.data.data),n(Math.ceil(m.data.data.pagination.total/10)),c(m.data.data.pagination.total)}catch(m){console.error("Error fetching data:",m)}finally{p(!1)}},[]);return e.jsx("div",{className:f("rounded-lg border border-[#E8E7EA] shadow-[0px_4px_4px_-1px_#0C0C0D0D,0px_4px_4px_-1px_#0C0C0D1A]",t),children:e.jsx(T,{columns:qe,data:r,pageCount:s,totalCount:o,onFetchData:x,DataTableToolbar:Pe,isLoading:d})})}function He(){return e.jsx(Ke,{})}const Re=[{month:"January",desktop:186,mobile:80,tablet:50},{month:"February",desktop:305,mobile:200,tablet:50},{month:"March",desktop:237,mobile:120,tablet:50},{month:"April",desktop:73,mobile:190,tablet:50},{month:"May",desktop:209,mobile:130,tablet:50},{month:"June",desktop:214,mobile:140,tablet:50}],$e={desktop:{label:"الخصومات",color:"hsl(var(--primery-blue-400))"},mobile:{label:"البدلات",color:"hsl(var(--primery-blue-500))"},tablet:{label:"الراتب الاساسي",color:"hsl(var(--primery-blue-200))"}},Ge=t=>t>=1e9?`${(t/1e9).toFixed(1)}B`:t>=1e6?`${(t/1e6).toFixed(1)}M`:t>=1e3?`${(t/1e3).toFixed(1)}K`:t===0?null:t;function Ze(){return e.jsx("div",{className:"w-full",children:e.jsx(ce,{config:$e,children:e.jsxs(pe,{accessibilityLayer:!0,data:Re,children:[e.jsx(he,{vertical:!1}),e.jsx(be,{dataKey:"month",tickLine:!1,tickMargin:10,axisLine:!1,tickFormatter:t=>t.slice(0,3)}),e.jsx(de,{cursor:!1,content:e.jsx(xe,{indicator:"dashed"})}),e.jsx(me,{content:e.jsx(ue,{})}),e.jsx(fe,{axisLine:!0,tickLine:!1,tick:{fill:"#6b7280",textAnchor:"start"},tickFormatter:Ge}),e.jsx(D,{dataKey:"desktop",fill:"var(--color-desktop)",radius:4}),e.jsx(D,{dataKey:"mobile",fill:"var(--color-mobile)",radius:4}),e.jsx(D,{dataKey:"tablet",fill:"var(--color-tablet)",radius:4})]})})})}function ze(){const[t,r]=l.useState(null),[a,s]=l.useState("");return e.jsxs("div",{className:"p-4 rounded-lg shadow-[0px_2px_12px_0px_#14142B14]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(j,{text:"الراتب والماليات"}),e.jsx(C,{options:[{label:"يومي",value:"يومي"},{label:"أسبوعي ",value:"أسبوعي "},{label:"شهري",value:"شهري"},{label:"سنوي",value:"سنوي"}],value:a,onValueChange:s,placeholder:"القائمة",width:"min-w-[101px]"})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-6",children:[e.jsx(u,{content:"25,000 ر.س",title:"الراتب الأساسي"}),e.jsx(u,{content:"1,850 ر.س",title:"إجمالي البدلات"}),e.jsx(u,{content:"18,000 ر.س",title:"صافي الراتب"}),e.jsx(u,{content:"500 ر.س",title:"خصومات الشهر"})]}),e.jsx("div",{className:"flex flex-row items-center justify-between mb-8 mt-10",children:e.jsx(Ze,{})})]})}function Ue(){return e.jsxs("div",{className:"mt-6 mb-40 grid grid-cols-1 xl:grid-cols-2 gap-6",children:[e.jsx(Be,{}),e.jsx(Le,{}),e.jsx(Ve,{}),e.jsx(ze,{}),e.jsx(He,{}),e.jsx(Me,{})]})}function Je({apparentComplaint:t,refresh:r,setRefresh:a}){const[s,n]=l.useState(""),[o,c]=l.useState(null),[d,p]=l.useState(!1),x=async()=>{p(!0),c(null);try{await _({endpoint:g.employeeComplaint.update+(t==null?void 0:t.id),body:{answer:s},config:{headers:{"Content-Type":"multipart/form-data"}}}),n(""),c(null),a(!r)}catch(i){let m="حدث خطأ أثناء إرسال البيانات. يرجى المحاولة مرة أخرى.";i.response?m=i.response.data.msg||m:i.request&&(m="تعذر الاتصال بالخادم. يرجى التحقق من اتصالك بالإنترنت."),c(m)}finally{p(!1)}};return e.jsxs("div",{className:"px-4 mt-3",children:[e.jsxs("div",{className:"rounded-lg border border-[#93919F] p-2",children:[e.jsx(je,{placeholder:"نص رسالة جديدة....",className:"text-[#575155] placeholder:text-[#2D364880] text-base font-medium tracking-normal border-none shadow-none resize-none mb-[10px] custom-scrollbar",onChange:i=>n(i.target.value),value:s}),e.jsx(ge,{disabled:s.trim().length<1,className:"block ms-auto w-32 h-11",onClick:x,children:d?"جاري التحميل...":"رد"})]}),o&&e.jsx("div",{className:"mt-3 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"",children:o}),e.jsx("button",{onClick:()=>c(null),className:"text-red-700 hover:text-red-900",children:"×"})]})})]})}function Oe({apparentComplaint:t,setِِِِِِِِِApparentComplaint:r,refresh:a,setRefresh:s}){var x;const[n,o]=l.useState(null),[c,d]=l.useState(!1),p=async()=>{d(!0),o(null);try{await _({endpoint:g.complaint.update+(t==null?void 0:t.id),body:{status:"resolved",customer_id:t==null?void 0:t.customer.id},config:{headers:{"Content-Type":"multipart/form-data"}}}),o(null),s(!a)}catch(i){let m="حدث خطأ أثناء إرسال البيانات. يرجى المحاولة مرة أخرى.";i.response?m=i.response.data.msg||m:i.request&&(m="تعذر الاتصال بالخادم. يرجى التحقق من اتصالك بالإنترنت."),o(m)}finally{d(!1)}};return t?e.jsxs("div",{className:"w-2/3 rounded-xl overflow-hidden",children:[e.jsxs("div",{className:"bg-primery-blue-50 px-4 py-2 flex flex-row items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex flex-row items-center justify-between gap-7",children:[e.jsx("img",{className:"w-10 h-10 rounded-full",src:G,alt:""}),e.jsxs("div",{className:"flex flex-col items-start justify-center gap-2",children:[e.jsx("p",{className:"text-sm font-normal text-[#120E2B] tracking-normal",children:(x=t==null?void 0:t.customer)==null?void 0:x.full_name}),e.jsx("p",{className:"text-sm font-normal text-[#70686D] tracking-normal",children:"نوع وتاريخ العضوية"})]})]}),e.jsx("div",{className:"text-sm font-normal text-[#70686D] tracking-normal",children:F(new Date(t.created_at),"dd/MM/yyyy")})]}),e.jsxs("div",{className:"flex flex-col gap-4 px-4 pt-2",children:[e.jsx("p",{className:"text-base font-semibold text-[#100147] tracking-normal",children:"تفاصيل الشكوى"}),e.jsxs("div",{className:"flex flex-row gap-4",children:[e.jsx("p",{className:"text-base w-[110px] font-semibold text-[#100147] tracking-normal",children:"رقم الشكوى"}),e.jsx("p",{className:"bg-[#F5F4F5] w-[195px] border border-[#E1DEE0] text-[#9E939A] text-xs font-semibold tracking-normal px-4 py-2",children:t.id})]}),e.jsxs("div",{className:"flex flex-row gap-4",children:[e.jsx("p",{className:"text-base w-[110px] font-semibold text-[#100147] tracking-normal",children:"تاريخ الشكوى"}),e.jsx("p",{className:"bg-[#F5F4F5] w-[195px] border border-[#E1DEE0] text-[#9E939A] text-xs font-semibold tracking-normal px-4 py-2",children:F(new Date(t.created_at),"dd/MM/yyyy")})]}),e.jsxs("div",{className:"flex flex-row gap-4",children:[e.jsx("p",{className:"text-base w-[110px] font-semibold text-[#100147] tracking-normal",children:"حالة الشكوى"}),e.jsx("p",{className:"bg-[#D1FAE5] w-[195px] border border-[#E1DEE0] text-[#065F46] text-xs text-center font-semibold tracking-normal px-4 py-2",children:t.status})]})]}),e.jsxs("div",{className:"mt-7 px-4",children:[e.jsx("p",{className:"text-base font-semibold text-[#100147] tracking-normal mb-4",children:"نص الشكوى"}),e.jsx("p",{dangerouslySetInnerHTML:{__html:t.description},className:"border border-[#E8E7EA] rounded-lg p-2 max-h-[480px] custom-scrollbar overflow-y-auto text-[#575155] text-base font-medium tracking-normal"})]}),e.jsx("div",{children:e.jsxs("div",{className:"mt-7 px-4",children:[e.jsx("p",{className:"text-base font-semibold text-[#100147] tracking-normal mb-4",children:"الرد"}),e.jsx("p",{className:"border border-[#E8E7EA] rounded-lg p-2 max-h-[480px] custom-scrollbar overflow-y-auto text-[#575155] text-base font-medium tracking-normal",children:t==null?void 0:t.answer})]})}),e.jsx(Je,{apparentComplaint:t,refresh:a,setRefresh:s}),n&&e.jsx("div",{className:"px-4",children:e.jsx("div",{className:"mt-3 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"",children:n}),e.jsx("button",{onClick:()=>o(null),className:"text-red-700 hover:text-red-900",children:"×"})]})})}),e.jsxs("div",{className:"flex flex-row justify-end items-start gap-6 p-2 mt-3",children:[e.jsx(B,{className:"xl:px-10",children:"تحويل الى قسم اخر"}),e.jsx(v,{disabled:t.status==="resolved",onClick:p,className:"xl:px-24",children:c?"جاري التحميل...":"إغلاق الشكوى"})]})]}):null}function Xe({complaint:t,setِِِِِِِِِApparentComplaint:r,apparentComplaint:a}){var n;const s=()=>{r(t)};return e.jsxs("div",{onClick:s,className:f("flex flex-col justify-between cursor-pointer gap-2 bg-white-blue-50 p-4 border-b border-[#D2CDD1] transition-all duration-200",{"bg-primery-blue-50":(a==null?void 0:a.id)===t.id}),children:[e.jsxs("div",{className:"flex flex-row justify-between items-center",children:[e.jsx("p",{className:"text-sm font-normal text-[#120E2B] tracking-normal",children:(n=t==null?void 0:t.customer)==null?void 0:n.full_name}),e.jsx("div",{className:"w-[14px] h-[14px] bg-[#FEE2E2] rounded-full"})]}),e.jsxs("div",{className:"flex flex-row justify-between items-center",children:[e.jsx("p",{className:"text-xs font-normal text-[#70686D] tracking-normal",children:t.title}),e.jsx("span",{className:"text-[9px] font-normal text-[#70686D] tracking-normal",children:F(new Date(t.created_at),"dd/MM/yyyy")})]})]})}function Ye({setِِِِِِِِِApparentComplaint:t,apparentComplaint:r,complaints:a,currentPage:s,error:n,loading:o,pagination:c,filterValue:d,setCurrentPage:p,setPagination:x,setSearch:i,setFilterValue:m}){const y=()=>{p(s+1)},k=h=>{i(h.target.value),x(null)},b=h=>{m(h),x(null)};return o?e.jsx(Z,{}):n?e.jsx("div",{className:"mt-6 mb-[102px] text-center py-20",children:e.jsx("h2",{className:"text-xl text-red-500",children:n})}):a?e.jsx("div",{className:"w-1/3",children:e.jsxs("div",{className:"rounded-[13px] overflow-hidden",children:[e.jsx("div",{className:"bg-primery-blue-50 px-4 py-[13px]",children:e.jsxs("div",{className:"flex flex-row items-center gap-2",children:[e.jsxs("div",{className:"flex flex-row items-center w-full h-10 border border-white-blue-300 bg-white-blue-50 p-2 rounded-[6px]",children:[e.jsx(z,{placeholder:"ابحث باسم  العميل",className:"text-white-blue-800 p-0 tracking-normal text-base font-normal border-none outline-none focus-visible:ring-0 placeholder:text-[#B6B5BF]",onChange:k}),e.jsx("button",{className:"bg-transparent border-none",children:e.jsx(U,{className:"text-[#B6B5BF]"})})]}),e.jsx(C,{options:[{label:"معلقه",value:"pending"},{label:"قيد التقدم",value:"in_progress"},{label:"تم حلها",value:"resolved"},{label:"الكل",value:""}],value:d,onValueChange:b,placeholder:"الحاله",width:"min-w-[77px]",className:"h-10"})]})}),e.jsxs("div",{className:"border border-[#E8E7EA] max-h-[740px] overflow-y-auto custom-scrollbar",children:[a.map(h=>e.jsx(Xe,{complaint:h,setِِِِِِِِِApparentComplaint:t,apparentComplaint:r},h.id)),a.length===0&&e.jsx("div",{className:"text-center py-20",children:e.jsx("h2",{className:"text-xl",children:"لا توجد نتائج لعرضها"})}),c&&a.length<c.total&&e.jsx("div",{className:"flex justify-center mt-4",children:e.jsx(v,{onClick:y,className:"text-base font-normal",children:"تحميل المزيد"})})]})]})}):e.jsx("div",{className:"mt-6 w-1/3 mb-[102px] text-center py-20",children:e.jsx("h2",{className:"text-xl",children:"Complaints not found"})})}function Qe(){const[t,r]=l.useState(null),[a,s]=l.useState(1),[n,o]=l.useState(!0),[c,d]=l.useState(null),[p,x]=l.useState(null),[i,m]=l.useState(null),[y,k]=l.useState(""),[b,h]=l.useState(""),[S,q]=l.useState(!1),L=ve(y,150);return l.useEffect(()=>{(async()=>{try{const N=await E({endpoint:g.employeeComplaint.list,queryParams:{page:a,search:L,status:b}});x(H=>a===1?N.data.data.data:[...H||[],...N.data.data.data]),m(N.data.data.pagination)}catch{d("Failed to load complaints details")}finally{o(!1)}})()},[a,L,b]),l.useEffect(()=>{t&&(async()=>{try{const N=await E({endpoint:g.employeeComplaint.show+t.id,queryParams:{page:a,search:y,status:b}});r(N.data.data),d(null)}catch{d("Failed to load complaint details")}})()},[S]),e.jsxs("div",{className:"mt-6 w-full flex flex-row gap-6 mb-10",children:[e.jsx(Ye,{setِِِِِِِِِApparentComplaint:r,apparentComplaint:t,complaints:p,currentPage:a,error:c,loading:n,pagination:i,filterValue:b,setCurrentPage:s,setPagination:m,setSearch:k,setFilterValue:h}),e.jsx(Oe,{apparentComplaint:t,setِِِِِِِِِApparentComplaint:r,setRefresh:q,refresh:S})]})}function We(){return e.jsxs("div",{className:"mt-6 w-full",children:[e.jsxs("div",{className:"flex flex-row items-center justify-between mt-6",children:[e.jsx("h1",{className:"font-bold text-[#080614] text-[24px] tracking-normal",children:"قائمة الشكاوي"}),e.jsx(J,{to:"/self-services/services/complaints/add",children:e.jsxs(v,{className:"!px-[25px] !py-3",children:[e.jsx(A,{}),"تسجيل شكوى جديدة"]})})]}),e.jsx(Qe,{})]})}function et(){const[t,r]=l.useState(1),s=new URLSearchParams(window.location.search).get("complaints"),n=o=>{r(o)};return l.useEffect(()=>{s&&r(2)},[s]),e.jsxs("div",{className:"w-full mt-6",children:[e.jsxs("div",{className:"w-full flex flex-row items-center gap-[1px]",children:[e.jsx("button",{onClick:()=>n(1),className:f("w-full transition-colors text-base py-3 text-white-blue-50 font-bold leading-[120%] tracking-normal rounded-s-lg",{"bg-primery-blue-700":t===1,"bg-primery-blue-400":t!==1}),children:"التقارير"}),e.jsx("button",{onClick:()=>n(2),className:f("w-full transition-colors text-base py-3 text-white-blue-50 font-bold leading-[120%] tracking-normal",{"bg-primery-blue-700":t===2,"bg-primery-blue-400":t!==2}),children:"الشكاوي"}),e.jsx("button",{onClick:()=>n(3),className:f("w-full transition-colors text-base py-3 text-white-blue-50 font-bold leading-[120%] tracking-normal",{"bg-primery-blue-700":t===3,"bg-primery-blue-400":t!==3}),children:"طلب خطاب"}),e.jsx("button",{onClick:()=>n(4),className:f("w-full transition-colors text-base py-3 text-white-blue-50 font-bold leading-[120%] tracking-normal rounded-e-lg",{"bg-primery-blue-700":t===4,"bg-primery-blue-400":t!==4}),children:"الخدمات الأضافية"})]}),t===1&&e.jsx(Ue,{}),t===2&&e.jsx(We,{}),t===3&&e.jsx(Te,{}),t===4&&e.jsx(Fe,{})]})}function Zt(){return e.jsxs("div",{className:"w-full mt-6 mb-24",children:[e.jsx(ye,{}),e.jsx(et,{})]})}export{Zt as default};
//# sourceMappingURL=Services.page-Cq0cGYAd.js.map
