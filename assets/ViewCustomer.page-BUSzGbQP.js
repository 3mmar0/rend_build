import{j as e,L as j,d as C,r as t,e as h,t as b,k as y,f as k,g as _}from"./index-BYyXun5x.js";import{b as w}from"./axios-utils-AvuZ81CO.js";import{H as B,B as E,D}from"./DocumentIcon-BwLfLdHU.js";import{C as S}from"./CircularProgress-CmGGO_gc.js";import{P as f}from"./PrimaryButton-CZnRZgcz.js";import{S as L}from"./SecondaryButton-DL_Bkgwn.js";import{S as N}from"./SubtleButton-CpZm4xzO.js";import{E as v}from"./EditIcon-CtwPxlIY.js";import{U as g}from"./UnderlineHeading-ByjNC2ge.js";import{D as P}from"./data-table-G-GPousO.js";import{T as F}from"./TrashIcon-YH55CqcU.js";import{D as I}from"./DeletePopup-DO3aEhKp.js";import{C as T}from"./Dropdown-DI0KLpyc.js";import{C as M}from"./CloseIcon-DUkjG1gO.js";import{D as H,a as Z,b as A,c as K}from"./dialog-CC_6CGm6.js";import"./table-Dfhf1Bk7.js";import"./CustomPagination-BD2pf3AX.js";import"./pagination-DR230PoL.js";import"./chevron-right-CymCusjh.js";import"./chevron-left-DVnc3BG0.js";import"./Combination-cklTRtAe.js";import"./index-CV4wEvKw.js";import"./index-Gk0NKYh3.js";import"./index-CLYNl1a9.js";import"./index-DEdjAgo6.js";function z({customer:l,setShowBlockPopup:a}){const r=()=>{a(!0)};return e.jsxs("div",{children:[e.jsx(B,{}),e.jsxs("div",{className:"flex relative flex-row justify-between px-4 bg-primery-blue-800 w-full text-white-blue-50 rounded-2xl",children:[e.jsx("div",{className:"absolute bottom-0 translate-y-[53%]",children:e.jsx("div",{className:"flex flex-col items-center justify-center",children:e.jsx("div",{className:"w-[242px] h-[242px] rounded-full overflow-hidden",children:l.profile_img?e.jsx("img",{src:l.profile_img,alt:"Customer Image",className:"w-full h-full object-cover"}):e.jsx("div",{className:"flex items-center justify-center h-full bg-gray-300",children:e.jsx("p",{className:"text-white-blue-50 text-8xl font-normal tracking-normal",children:l.full_name.split(" ").map(s=>s[0]).join("")})})})})}),e.jsxs("div",{className:"ms-[242px] ps-6 py-4",children:[e.jsx("p",{className:"text-start font-bold text-4xl leading-none tracking-normal py-3 mb-3",children:l.full_name}),e.jsx("p",{className:"text-start font-medium text-xl leading-none tracking-normal mt-2 mb-1",children:"عميل"})]}),e.jsxs("div",{className:"my-[5.5px] flex flex-col justify-between items-center",children:[e.jsx("p",{className:"font-medium text-xs tracking-normal",children:"التقييم"}),e.jsx(S,{textClassName:"text-white-blue-50",progressClassName:"stroke-white-blue-50",backgroundClassName:"stroke-white-blue-700",size:48}),e.jsx("p",{className:"font-medium text-xs tracking-normal border border-white-blue-50 p-1 rounded-sm",children:"مقبول"})]})]}),e.jsxs("div",{className:"flex flex-row",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex flex-col w-[242px] gap-6 ms-4 mt-[150px]",children:[e.jsx(j,{to:`/customer-relations/customer-communication/add-message/${l.id}`,children:e.jsx(f,{className:"w-full h-[44px]",children:"إرسال رسالة"})}),e.jsx(j,{to:`/customer-relations/edit-customer/${l.id}`,children:e.jsxs(L,{className:"bg-primery-blue-50 h-[44px] w-full",children:[e.jsx(v,{}),"تعديل"]})}),e.jsxs(N,{onClick:r,className:"bg-red-error-50 h-[44px] text-[#A21515]",children:[e.jsx(E,{}),"حظر"]})]})}),e.jsxs("div",{className:"ms-6 mt-5 w-full",children:[e.jsx(g,{text:"البيانات الأساسية"}),e.jsxs("div",{className:"w-full mt-2",children:[e.jsxs("div",{className:"flex flex-row items-center border-b border-b-white-blue-500",children:[e.jsx("p",{className:"bg-white-blue-100 px-4 py-4 text-sm text-primery-blue-500 font-semibold tracking-normal leading-6 w-[128px]",children:"الاسم الكامل"}),e.jsx("p",{className:"flex flex-row items-center gap-4 p-2 w-full",children:l.full_name})]}),e.jsxs("div",{className:"flex flex-row items-center border-b border-b-white-blue-500",children:[e.jsx("p",{className:"bg-white-blue-100 px-4 py-4 text-sm text-primery-blue-500 font-semibold tracking-normal leading-6 w-[128px]",children:"رقم الهاتف"}),e.jsx("p",{className:"flex flex-row items-center gap-4 p-2 w-full",children:l.phone})]}),e.jsxs("div",{className:"flex flex-row items-center border-b border-b-white-blue-500",children:[e.jsx("p",{className:"bg-white-blue-100 px-4 py-4 text-sm text-primery-blue-500 font-semibold tracking-normal leading-6 w-[128px]",children:"رقم الهوية"}),e.jsx("p",{className:"flex flex-row items-center gap-4 p-2 w-full",children:l.personal_id_number})]}),e.jsxs("div",{className:"flex flex-row items-center border-b border-b-white-blue-500",children:[e.jsx("p",{className:"bg-white-blue-100 px-4 py-4 text-sm text-primery-blue-500 font-semibold tracking-normal leading-6 w-[128px]",children:"العنوان"}),e.jsx("p",{className:"flex flex-row items-center gap-4 p-2 w-full",children:l==null?void 0:l.address})]}),e.jsxs("div",{className:"flex flex-row items-center border-b border-b-white-blue-500",children:[e.jsx("p",{className:"bg-white-blue-100 px-4 py-4 text-sm text-primery-blue-500 font-semibold tracking-normal leading-6 w-[128px]",children:"رقم الرخصة"}),e.jsx("p",{className:"flex flex-row items-center gap-4 p-2 w-full",children:l==null?void 0:l.driver_license_number})]})]})]})]})]})}const R=({row:l})=>{const a=C(),[r,s]=t.useState(!1),i=()=>{s(!0)},n=()=>{s(!1)},d=()=>{var c,o;b.error("تم حذف الفرع بنجاح"),s(!1),(o=(c=l.original).refreshTable)==null||o.call(c)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-7",children:[e.jsx("button",{onClick:()=>a(`/branches/${l.original.id}/edit`),className:"text-primary hover:text-primary/80",children:e.jsx(v,{className:"text-primery-blue-400"})}),e.jsx("button",{onClick:i,children:e.jsx(F,{className:"text-[#E81E1E] cursor-pointer"})})]}),r&&e.jsx(I,{open:r,text:"هل أنت متاكد أنك تريد حذف هذا الفرع",endpoint:h.branch.delete+l.original.id,handleCancel:n,handleSuccess:d})]})},U=[{accessorKey:"name",header:()=>e.jsx("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:"المستأجر"}),cell:({row:l})=>e.jsx("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:l.original.name})},{accessorKey:"status",header:()=>e.jsx("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:"المدة"}),cell:({row:l})=>e.jsx("div",{className:"text-sm text-[#625E74] font-normal tracking-normal leading-[26.4px]",children:l.original.area})},{accessorKey:"date",header:()=>e.jsx("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:"طريقة الدفع"}),cell:({row:l})=>e.jsx("div",{className:"text-sm text-[#625E74] font-normal tracking-normal leading-[26.4px]",children:l.original.city})},{accessorKey:"service",header:()=>e.jsx("div",{className:"text-sm px-4 py-3 !text-primery-blue-500 leading-[26.24px] font-semibold tracking-normal",children:"قيمة الإيجار"}),cell:({row:l})=>e.jsx("div",{className:"text-sm text-[#625E74] font-normal tracking-normal leading-[26.4px]",children:l.original.address})},{id:"actions",cell:({row:l})=>e.jsx(R,{row:l})}];function $({table:l,globalFilter:a,setGlobalFilter:r,filters:s,setFilters:i}){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col p-2 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx(g,{text:"سجل التأجيرات"}),e.jsx("div",{className:"flex flex-row items-center gap-4",children:e.jsxs("div",{className:"flex fle-row items-center gap-4",children:[e.jsx(T,{value:(s==null?void 0:s.status)||"",onValueChange:n=>{i({...s,status:n})},placeholder:"الحالة",width:"min-w-[77px]",options:[{label:"متاح",value:"active"},{label:"غير متاح",value:"not active"}]}),e.jsxs("button",{onClick:()=>i({}),className:"flex flex-row items-center gap-2 h-[22px] p-0 bg-white-blue-50 hover:bg-white-blue-200 border-none shadow-none text-primery-blue-500 font-medium text-xs leading-[22.49px] tracking-normal",children:[e.jsx(M,{className:"!w-[10px] !h-[10px]"}),"إلغاء التصفية"]})]})})]})})}function G({customer:l}){const[a,r]=t.useState([]),[s,i]=t.useState(0),[n,d]=t.useState(0),[c,o]=t.useState(!1),x=t.useCallback(async m=>{o(!0);try{}catch(p){console.error("Error fetching data:",p)}finally{o(!1)}},[]);return e.jsx("div",{className:"mb-10 mt-4 rounded-lg border border-[#E8E7EA] shadow-[0px_4px_4px_-1px_#0C0C0D0D,0px_4px_4px_-1px_#0C0C0D1A]",children:e.jsx(P,{columns:U,data:a,pageCount:s,totalCount:n,onFetchData:x,DataTableToolbar:$,isLoading:c})})}function V({customer:l}){return e.jsxs("div",{className:"w-full mt-5",children:[e.jsxs("div",{className:"flex flex-row justify-between mb-5",children:[e.jsx(g,{text:"المستدات الشخصية"}),e.jsxs(N,{children:[e.jsx(D,{className:"text-[#616161]"}),"تحميل المستندات"]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 mb-[21px]",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[#100147] mb-3 font-medium text-[18px] leading-none tracking-normal text-start",children:"الهوية الشخصيه"}),e.jsx("div",{className:"mb-4 h-[240px] border-2 border-dashed border-[#B6B5BF] rounded-lg p-8",children:e.jsx("img",{className:"w-full h-full object-contain",src:l==null?void 0:l.personal_id_img_front,alt:"personal id img front"})}),e.jsxs("div",{className:"flex flex-row gap-5",children:[e.jsx("div",{className:"w-full h-[107px] border-2 border-dashed border-[#B6B5BF] rounded-lg p-8",children:e.jsx("img",{className:"w-full h-full object-contain",src:l==null?void 0:l.personal_id_img_front,alt:"personal id img front"})}),e.jsx("div",{className:"w-full h-[107px] border-2 border-dashed border-[#B6B5BF] rounded-lg p-8",children:e.jsx("img",{className:"w-full h-full object-contain",src:l==null?void 0:l.personal_id_img_back,alt:"personal id img back"})})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[#100147] mb-3 font-medium text-[18px] leading-none tracking-normal text-start",children:"رخصة القيادة"}),e.jsx("div",{className:"mb-4 h-[240px] border-2 border-dashed border-[#B6B5BF] rounded-lg p-8",children:e.jsx("img",{className:"w-full h-full object-contain",src:l==null?void 0:l.driver_license_img_back,alt:"driver license img back"})}),e.jsxs("div",{className:"flex flex-row gap-5",children:[e.jsx("div",{className:"w-full h-[107px] border-2 border-dashed border-[#B6B5BF] rounded-lg p-8",children:e.jsx("img",{className:"w-full h-full object-contain",src:l==null?void 0:l.driver_license_img_back,alt:"driver license img back"})}),e.jsx("div",{className:"w-full h-[107px] border-2 border-dashed border-[#B6B5BF] rounded-lg p-8",children:e.jsx("img",{className:"w-full h-full object-contain",src:l==null?void 0:l.driver_license_img_back,alt:"driver license img back"})})]})]})]}),e.jsx(G,{customer:l})]})}const q=({width:l="40",height:a="40",className:r=""})=>e.jsx("span",{className:r,children:e.jsxs("svg",{width:l,height:a,viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{opacity:"0.4",d:"M20 40C31.0457 40 40 31.0457 40 20C40 8.9543 31.0457 0 20 0C8.9543 0 0 8.9543 0 20C0 31.0457 8.9543 40 20 40Z",fill:"#E81E1E"}),e.jsx("path",{opacity:"0.4",d:"M29.0901 29.5C29.0901 29.78 28.8701 30 28.5901 30H11.4102C11.1302 30 10.9102 29.78 10.9102 29.5C10.9102 25.36 14.9902 22 20.0002 22C21.0302 22 22.0302 22.14 22.9502 22.41C22.3602 23.11 22.0002 24.02 22.0002 25C22.0002 25.75 22.2101 26.46 22.5801 27.06C22.7801 27.4 23.0401 27.71 23.3401 27.97C24.0401 28.61 24.9702 29 26.0002 29C27.1202 29 28.1302 28.54 28.8502 27.8C29.0102 28.34 29.0901 28.91 29.0901 29.5Z",fill:"#E81E1E"}),e.jsx("path",{d:"M29.8802 24.0417C29.7802 23.6517 29.6202 23.2617 29.4002 22.9117C29.2502 22.6517 29.0502 22.4017 28.8302 22.1717C28.1102 21.4517 27.1702 21.0617 26.2102 21.0117C25.1202 20.9417 24.0102 21.3417 23.1702 22.1717C22.3802 22.9617 21.9802 24.0117 22.0002 25.0617C22.0102 26.0617 22.4102 27.0617 23.1702 27.8317C23.7002 28.3617 24.3502 28.7117 25.0402 28.8717C25.4202 28.9717 25.8202 29.0117 26.2202 28.9817C27.1702 28.9417 28.1002 28.5617 28.8302 27.8317C29.8602 26.8018 30.2102 25.3517 29.8802 24.0417ZM27.6002 26.6017C27.3102 26.8917 26.8302 26.8917 26.5402 26.6017L25.9902 26.0517L25.4602 26.5817C25.1702 26.8717 24.6902 26.8717 24.4002 26.5817C24.1102 26.2817 24.1102 25.8118 24.4002 25.5218L24.9302 24.9917L24.4202 24.4917C24.1302 24.1917 24.1302 23.7217 24.4202 23.4217C24.7202 23.1317 25.1902 23.1317 25.4902 23.4217L25.9902 23.9317L26.5202 23.4018C26.8102 23.1118 27.2802 23.1118 27.5802 23.4018C27.8702 23.6918 27.8702 24.1718 27.5802 24.4618L27.0502 24.9917L27.6002 25.5417C27.8902 25.8317 27.8902 26.3117 27.6002 26.6017Z",fill:"#E81E1E"}),e.jsx("path",{d:"M20 20C22.7614 20 25 17.7614 25 15C25 12.2386 22.7614 10 20 10C17.2386 10 15 12.2386 15 15C15 17.7614 17.2386 20 20 20Z",fill:"#E81E1E"})]})}),J=({open:l,text1:a,text2:r,endpoint:s,handleCancel:i,handleSuccess:n})=>{const[d,c]=t.useState(!1),o=async()=>{c(!0);try{await w({endpoint:s}),n()}catch(x){let m="حدث خطأ أثناء إرسال البيانات. يرجى المحاولة مرة أخرى.";x.response?m=x.response.data.msg||m:x.request&&(m="تعذر الاتصال بالخادم. يرجى التحقق من اتصالك بالإنترنت."),b(m)}finally{c(!1)}};return e.jsxs(H,{open:l,children:[e.jsx("div",{className:y("fixed inset-0 bg-black/50 z-[999]",{"!hidden":!l})}),e.jsxs(Z,{showCloseButton:!1,className:"z-[1000] max-w-lg rounded-lg p-6 bg-white-blue-50 font-cairo gap-0 [&_[aria-label=Close]]:opacity-0",children:[e.jsxs(A,{className:"flex flex-col items-center",children:[e.jsx("div",{className:"p-1 mb-4",children:e.jsx(q,{})}),e.jsx(K,{className:"text-center text-red-error-600 font-bold text-[22px] leading-[33px] tracking-normal",children:a})]}),e.jsx("div",{className:"mt-2 mb-6 text-center text-[#6B7280] font-medium text-[14px] leading-[28px] tracking-normal",children:e.jsx("p",{children:r})}),e.jsxs("div",{className:"flex flex-row gap-3",children:[e.jsx(f,{onClick:()=>o(),className:"w-full h-10 text-base text-red-error-600 hover:text-white-blue-50 bg-red-error-50 hover:bg-red-error-600 leading-5 tracking-normal font-medium py-[10px]",children:d?"جاري الحظر...":"حظر"}),e.jsx(f,{onClick:i,className:"w-full h-10 text-base leading-5 tracking-normal py-[10px] font-medium border border-red-error-50",children:"العودة لقائمة بيانات العميل"})]})]})]})};function Ne(){const l=k(),{id:a}=l,[r,s]=t.useState(!0),[i,n]=t.useState(null),[d,c]=t.useState(null),[o,x]=t.useState(!1);if(t.useEffect(()=>{a?(async()=>{try{const u=await w({endpoint:h.customer.show+a});c(u.data.data)}catch{n("Failed to load customer details")}finally{s(!1)}})():(n("Invalid customer ID"),s(!1))},[a]),r)return e.jsx(_,{});if(i)return e.jsx("div",{className:"mt-6 mb-[102px] text-center py-20",children:e.jsx("h2",{className:"text-xl text-red-500",children:i})});if(!d)return e.jsx("div",{className:"mt-6 mb-[102px] text-center py-20",children:e.jsx("h2",{className:"text-xl",children:"Customer not found"})});const m=()=>{x(!1)},p=()=>{b.error("تم حظر العميل بنجاح"),x(!1)};return e.jsxs("div",{className:"w-full mt-6",children:[e.jsx(z,{customer:d,setShowBlockPopup:x}),e.jsx(V,{customer:d}),o&&e.jsx(J,{open:o,text1:"سيتم حظر العميل",text2:"أنت على وشك حظر هذا العميل سيتم حظر  العميل ,ومنعه من عمليات التاجير القادمة، هل أنت متأكد؟",endpoint:h.customer.block+d.id,handleCancel:m,handleSuccess:p})]})}export{Ne as default};
//# sourceMappingURL=ViewCustomer.page-BUSzGbQP.js.map
